const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/HomePage-CCulOmby.js","assets/js/react-vendor-D6vaw4E_.js","assets/js/vendor-BKIB45Nt.js","assets/js/useSpacedRepetition-2HlXaz1F.js","assets/js/data-vendor-CRo3OXJP.js","assets/js/useProgress-BVcE7BS_.js","assets/js/apiAdapter-4y4I9PLQ.js","assets/js/EnhancedLearnPage-DfxeZYLT.js","assets/js/useLearnContent-CNy0BfiU.js","assets/js/Badge-DLWuO9O4.js","assets/js/EnhancedPracticePage-BSmsl3Au.js","assets/js/useSpecies-qoKZee_J.js","assets/js/SpeciesPage-BWEORfiB.js","assets/js/LazyImage-BuJprSXT.js","assets/js/SpeciesDetailPage-3GlLCvni.js","assets/js/ProgressBar-BiRo9b8T.js","assets/js/LoginPage-B0O1UTlg.js","assets/js/AdminAnnotationReviewPage-dubEbpx0.js","assets/js/Modal-Bb1NX3G2.js","assets/js/ToastContainer-ntMMWNyK.js","assets/js/ImageManagementPage-B2fUPgk6.js","assets/js/MLAnalyticsPage-FNJY4OTX.js","assets/js/UserDashboardPage-D74PIqNK.js"])))=>i.map(i=>d[i]);
import{r as e,j as s,B as a,L as r,R as t,b as n,u as i,c as o,d as l,e as c}from"./react-vendor-D6vaw4E_.js";import{Q as d}from"./data-vendor-CRo3OXJP.js";import{k as h,l as m,_ as u,o as x}from"./vendor-BKIB45Nt.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&s(e)}).observe(document,{childList:!0,subtree:!0})}function s(e){if(e.ep)return;e.ep=!0;const s=function(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?s.credentials="include":"anonymous"===e.crossOrigin?s.credentials="omit":s.credentials="same-origin",s}(e);fetch(e.href,s)}}();const g=h({level:"error",browser:{asObject:!0,serialize:!0,write:{info:e=>console.info(e),error:e=>console.error(e),warn:e=>console.warn(e),debug:e=>console.debug(e),trace:e=>console.trace(e)}},base:{env:"gh-pages"}}),p=(e,s)=>{g.info(s||{},e)},f=(e,s)=>{g.warn(s||{},e)},j=(e,s)=>{s instanceof Error?g.error({err:s,stack:s.stack},e):g.error(s||{},e)},y=(e,s)=>{g.debug(s||{},e)},b=m("https://ubqnfiwxghkxltluyczd.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InVicW5maXd4Z2hreGx0bHV5Y3pkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2NTA1NTAsImV4cCI6MjA3NTIyNjU1MH0.GNEjJ_ralYnpIeUVnDSpF64WSlPK-Z_69wIdAgwRj0U",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"aves-auth-token"},db:{schema:"public"},global:{headers:{"X-Client-Info":"aves-frontend@0.1.0"}}}),v=()=>{const[s,a]=e.useState(null),[r,t]=e.useState(null),[n,i]=e.useState(!0),[o,l]=e.useState(null);e.useEffect(()=>{b.auth.getSession().then(({data:{session:e}})=>{t(e),a(e?.user??null),i(!1),e&&p("User session restored",{userId:e.user.id})});const{data:{subscription:e}}=b.auth.onAuthStateChange((e,s)=>{t(s),a(s?.user??null),i(!1),s&&p("Auth state changed",{userId:s.user.id,event:e})});return()=>e.unsubscribe()},[]);return{user:s,session:r,loading:n,error:o,signIn:async(e,s)=>{try{i(!0),l(null);const r=await(async(e,s)=>{const{data:a,error:r}=await b.auth.signInWithPassword({email:e,password:s});if(r)throw new Error(r.message);return a})(e,s);t(r.session),a(r.user),p("User signed in successfully",{userId:r.user?.id})}catch(r){const e=r instanceof Error?r.message:"Failed to sign in";throw l(e),j("Sign in failed",r),r}finally{i(!1)}},signUp:async(e,s,r)=>{try{i(!0),l(null);const n=await(async(e,s,a)=>{const{data:r,error:t}=await b.auth.signUp({email:e,password:s,options:{data:{name:a||e.split("@")[0]}}});if(t)throw new Error(t.message);return r})(e,s,r);t(n.session),a(n.user),p("User signed up successfully",{userId:n.user?.id})}catch(n){const e=n instanceof Error?n.message:"Failed to sign up";throw l(e),j("Sign up failed",n),n}finally{i(!1)}},signOut:async()=>{try{i(!0),l(null),await(async()=>{const{error:e}=await b.auth.signOut();if(e)throw new Error(e.message)})(),t(null),a(null),p("User signed out successfully")}catch(e){const s=e instanceof Error?e.message:"Failed to sign out";throw l(s),j("Sign out failed",e),e}finally{i(!1)}},refreshSession:async()=>{try{i(!0);const{data:{session:e},error:s}=await b.auth.refreshSession();if(s)throw s;t(e),a(e?.user??null)}catch(e){const s=e instanceof Error?e.message:"Failed to refresh session";l(s),j("Session refresh failed",e)}finally{i(!1)}}}},w=({targetId:e,children:a})=>s.jsx("a",{href:`#${e}`,className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-blue-600 focus:text-white focus:rounded-md focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2",children:a}),L=({to:e,children:a,isAdmin:t=!1,ariaLabel:n})=>{const o=i(),l=o.pathname===e||"/"!==e&&o.pathname.startsWith(e),c=t?"text-orange-700 bg-orange-50":"text-blue-700 bg-blue-50",d=t?"text-orange-600 hover:text-orange-700 hover:bg-orange-50":"text-gray-700 hover:text-gray-900 hover:bg-gray-50";return s.jsx(r,{to:e,className:`inline-flex items-center px-3 py-2 text-sm font-medium transition-colors rounded-md ${l?c:d}`,"aria-label":n,"aria-current":l?"page":void 0,children:a})},_=()=>{const{user:e,signOut:a,loading:r}=v(),t=o(),n=async()=>{try{await a(),t("/")}catch(e){j("Logout failed",e instanceof Error?e:{error:e})}};return r?s.jsx("div",{className:"px-3 py-2",children:s.jsx("div",{className:"animate-pulse flex items-center",children:s.jsx("div",{className:"w-4 h-4 bg-gray-300 rounded-full"})})}):e?s.jsxs("button",{onClick:n,className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-50 transition-colors rounded-md","aria-label":"Logout from your account",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]}):s.jsxs(L,{to:"/login",ariaLabel:"Login to your account",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Login"]})},N=e.lazy(()=>u(()=>import("./HomePage-CCulOmby.js"),__vite__mapDeps([0,1,2,3,4,5,6])).then(e=>({default:e.HomePage}))),E=e.lazy(()=>u(()=>import("./EnhancedLearnPage-DfxeZYLT.js"),__vite__mapDeps([7,1,2,8,4,9,3])).then(e=>({default:e.EnhancedLearnPage}))),I=e.lazy(()=>u(()=>import("./EnhancedPracticePage-BSmsl3Au.js"),__vite__mapDeps([10,1,2,3,4,11,6])).then(e=>({default:e.EnhancedPracticePage}))),k=e.lazy(()=>u(()=>import("./SpeciesPage-BWEORfiB.js"),__vite__mapDeps([12,1,2,13,11,4,6])).then(e=>({default:e.SpeciesPage}))),P=e.lazy(()=>u(()=>import("./SpeciesDetailPage-3GlLCvni.js"),__vite__mapDeps([14,1,2,13,11,4,6,8,15])).then(e=>({default:e.SpeciesDetailPage}))),A=e.lazy(()=>u(()=>import("./LoginPage-B0O1UTlg.js"),__vite__mapDeps([16,1,2,4])).then(e=>({default:e.LoginPage}))),S=e.lazy(()=>u(()=>import("./AdminAnnotationReviewPage-dubEbpx0.js"),__vite__mapDeps([17,1,2,4,18,19,9])).then(e=>({default:e.AdminAnnotationReviewPage}))),O=e.lazy(()=>u(()=>import("./ImageManagementPage-B2fUPgk6.js"),__vite__mapDeps([20,1,2,11,4,6,18,19,9,15,13]))),z=e.lazy(()=>u(()=>import("./MLAnalyticsPage-FNJY4OTX.js"),__vite__mapDeps([21,1,2,18,4,9])).then(e=>({default:e.MLAnalyticsPage}))),M=e.lazy(()=>u(()=>import("./UserDashboardPage-D74PIqNK.js"),__vite__mapDeps([22,1,2,3,4,8,5,6])));function R(){const i=window.location.hostname.includes("github.io")?"/aves/":"/";return s.jsx(a,{basename:i,children:s.jsxs("div",{className:"min-h-screen",children:[s.jsx(w,{targetId:"main-content",children:"Skip to main content"}),s.jsx("nav",{className:"bg-white shadow-sm border-b sticky top-0 z-50",role:"navigation","aria-label":"Main navigation",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between h-16",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsxs(r,{to:"/",className:"flex items-center px-2 py-2 text-gray-900 hover:text-gray-700","aria-label":"Aves home page",children:[s.jsx("span",{className:"text-2xl mr-2",role:"img","aria-label":"Eagle",children:"ðŸ¦…"}),s.jsx("span",{className:"font-bold text-xl",children:"Aves"})]}),s.jsxs("div",{className:"hidden sm:ml-8 sm:flex sm:space-x-2",children:[s.jsx(L,{to:"/learn",ariaLabel:"Learn about bird species and their features",children:"Learn"}),s.jsx(L,{to:"/practice",ariaLabel:"Practice identifying birds with interactive exercises",children:"Practice"}),s.jsx(L,{to:"/species",ariaLabel:"Browse all bird species in the database",children:"Species"}),s.jsx(L,{to:"/dashboard",ariaLabel:"View your learning progress and dashboard",children:"Dashboard"})]})]}),s.jsxs("div",{className:"hidden sm:flex sm:items-center sm:space-x-1",role:"navigation","aria-label":"Admin navigation",children:[s.jsx("span",{className:"text-xs text-gray-400 mr-2 hidden md:inline","aria-hidden":"true",children:"Admin:"}),s.jsxs(L,{to:"/admin/annotations",isAdmin:!0,ariaLabel:"Admin: Review and manage bird annotations",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Review"]}),s.jsxs(L,{to:"/admin/images",isAdmin:!0,ariaLabel:"Admin: Manage bird images in the database",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Images"]}),s.jsxs(L,{to:"/admin/analytics",isAdmin:!0,ariaLabel:"Admin: View machine learning analytics and performance",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Analytics"]}),s.jsx("div",{className:"ml-2 pl-2 border-l border-gray-300",children:s.jsx(_,{})})]}),s.jsxs("div",{className:"sm:hidden flex items-center",children:[s.jsx(r,{to:"/learn",className:"px-2 py-1 text-gray-700 text-sm",children:"Learn"}),s.jsx(r,{to:"/admin/annotations",className:"px-2 py-1 text-orange-600 text-sm",children:"Admin"})]})]})})}),s.jsx("main",{id:"main-content",role:"main",tabIndex:-1,children:s.jsx(e.Suspense,{fallback:s.jsx("div",{className:"flex items-center justify-center min-h-screen",role:"status","aria-live":"polite",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl mb-4",role:"img","aria-label":"Eagle",children:"ðŸ¦…"}),s.jsx("div",{className:"text-gray-600",children:"Loading..."})]})}),children:s.jsxs(t,{children:[s.jsx(n,{path:"/",element:s.jsx(N,{})}),s.jsx(n,{path:"/learn",element:s.jsx(E,{})}),s.jsx(n,{path:"/practice",element:s.jsx(I,{})}),s.jsx(n,{path:"/species",element:s.jsx(k,{})}),s.jsx(n,{path:"/species/:id",element:s.jsx(P,{})}),s.jsx(n,{path:"/login",element:s.jsx(A,{})}),s.jsx(n,{path:"/dashboard",element:s.jsx(M,{})}),s.jsx(n,{path:"/admin/annotations",element:s.jsx(S,{})}),s.jsx(n,{path:"/admin/images",element:s.jsx(O,{})}),s.jsx(n,{path:"/admin/analytics",element:s.jsx(z,{})})]})})})]})})}class V extends e.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,s){j("ErrorBoundary caught an error:",e),this.setState({error:e,errorInfo:s})}handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};render(){return this.state.hasError?this.props.fallback?this.props.fallback:s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6",children:[s.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h2",{className:"mt-4 text-xl font-semibold text-gray-900 text-center",children:"Oops! Something went wrong"}),s.jsx("p",{className:"mt-2 text-sm text-gray-600 text-center",children:"We encountered an unexpected error. Please try again."}),!1,s.jsxs("div",{className:"mt-6 flex gap-3",children:[s.jsx("button",{onClick:this.handleReset,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Try Again"}),s.jsx("button",{onClick:()=>window.location.href="/",className:"flex-1 px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors",children:"Go Home"})]})]})}):this.props.children}}const D=new x({defaultOptions:{queries:{staleTime:3e5,gcTime:6e5,retry:2,retryDelay:e=>Math.min(1e3*2**e,3e4),refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!0},mutations:{retry:1,onError:e=>{j("Mutation error",e instanceof Error?e:{error:e})}}}}),T={species:{all:["species"],lists:()=>[...T.species.all,"list"],list:e=>[...T.species.lists(),e],details:()=>[...T.species.all,"detail"],detail:e=>[...T.species.details(),e],search:e=>[...T.species.all,"search",e],stats:()=>[...T.species.all,"stats"]},annotations:{all:["annotations"]}};l.createRoot(document.getElementById("root")).render(s.jsx(c.StrictMode,{children:s.jsx(V,{children:s.jsxs(d,{client:D,children:[s.jsx(R,{}),!1]})})}));export{y as d,j as e,T as q,v as u,f as w};
