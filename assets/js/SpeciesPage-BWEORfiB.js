import{e,j as a,c as s,r}from"./react-vendor-D6vaw4E_.js";import{L as t}from"./LazyImage-BuJprSXT.js";import{u as l}from"./useSpecies-qoKZee_J.js";import{d as i}from"./index-BgZ62Jpe.js";import"./vendor-BKIB45Nt.js";import"./data-vendor-CRo3OXJP.js";import"./apiAdapter-4y4I9PLQ.js";const o={"Northern Cardinal":"https://images.unsplash.com/photo-1606567595334-d39972c85dfd?w=800","Cardenal Rojo":"https://images.unsplash.com/photo-1606567595334-d39972c85dfd?w=800","Blue Jay":"https://images.unsplash.com/photo-1591608971362-f08b2a75731a?w=800","Arrendajo Azul":"https://images.unsplash.com/photo-1591608971362-f08b2a75731a?w=800","American Robin":"https://images.unsplash.com/photo-1552728089-57bdde30beb3?w=800","Petirrojo Americano":"https://images.unsplash.com/photo-1552728089-57bdde30beb3?w=800","Mourning Dove":"https://images.unsplash.com/photo-1596071915134-94f36f1d3188?w=800","Paloma Huilota":"https://images.unsplash.com/photo-1596071915134-94f36f1d3188?w=800","House Sparrow":"https://images.unsplash.com/photo-1521651201144-634f700b36ef?w=800","GorriÃ³n ComÃºn":"https://images.unsplash.com/photo-1521651201144-634f700b36ef?w=800","American Goldfinch":"https://images.unsplash.com/photo-1580774998750-bfb65320b286?w=800","Jilguero Americano":"https://images.unsplash.com/photo-1580774998750-bfb65320b286?w=800","Red-winged Blackbird":"https://images.unsplash.com/photo-1588690203882-81b0d1a39b51?w=800","Tordo Sargento":"https://images.unsplash.com/photo-1588690203882-81b0d1a39b51?w=800","Great Blue Heron":"https://images.unsplash.com/photo-1604608672516-f1b9a53a4ed6?w=800","Garza Azulada":"https://images.unsplash.com/photo-1604608672516-f1b9a53a4ed6?w=800","Ruby-throated Hummingbird":"https://images.unsplash.com/photo-1520808663317-647b476a81b9?w=800","ColibrÃ­ Garganta de RubÃ­":"https://images.unsplash.com/photo-1520808663317-647b476a81b9?w=800","Bald Eagle":"https://images.unsplash.com/photo-1611689342806-0863700ce1e4?w=800","Ãguila Calva":"https://images.unsplash.com/photo-1611689342806-0863700ce1e4?w=800"},n=e.memo(({species:e,onClick:s,viewMode:r="grid"})=>{const l=e.primaryImageUrl?e.primaryImageUrl:o[e.englishName]?o[e.englishName]:o[e.spanishName]?o[e.spanishName]:"https://images.unsplash.com/photo-1444464666168-49d633b86797?w=800",i=e=>{switch(e){case"LC":return"bg-green-100 text-green-800";case"NT":return"bg-yellow-100 text-yellow-800";case"VU":return"bg-orange-100 text-orange-800";case"EN":return"bg-red-100 text-red-800";case"CR":return"bg-red-200 text-red-900";default:return"bg-gray-100 text-gray-800"}},n=e=>{switch(e){case"small":return"ðŸ¦";case"medium":return"ðŸ¦…";case"large":return"ðŸ¦¢";default:return"ðŸ¦œ"}};return"list"===r?a.jsxs("div",{onClick:()=>s?.(e),className:"flex items-center gap-4 p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer border border-gray-200",children:[l?a.jsx(t,{src:l,alt:e.spanishName,className:"w-16 h-16 rounded-lg",blurAmount:10}):a.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center text-2xl",children:n(e.sizeCategory)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.spanishName}),a.jsx("p",{className:"text-sm text-gray-600",children:e.englishName}),a.jsx("p",{className:"text-xs text-gray-500 italic",children:e.scientificName})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-500",children:e.familyName}),e.conservationStatus&&a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${i(e.conservationStatus)}`,children:e.conservationStatus})]}),a.jsx("div",{className:"flex gap-1",children:Array.isArray(e.habitats)&&e.habitats.slice(0,2).map(e=>a.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded",children:e},e))})]}):a.jsxs("div",{onClick:()=>s?.(e),className:"bg-white rounded-lg shadow-md hover:shadow-xl transition-all cursor-pointer overflow-hidden group",children:[a.jsxs("div",{className:"aspect-square bg-gradient-to-br from-gray-200 to-gray-300 relative",children:[l?a.jsx(t,{src:l,alt:e.spanishName,className:"w-full h-full"}):a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-6xl opacity-50",children:n(e.sizeCategory)}),e.conservationStatus&&a.jsx("span",{className:`absolute top-2 right-2 text-xs px-2 py-1 rounded-full ${i(e.conservationStatus)}`,children:e.conservationStatus})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-bold text-gray-900 text-lg group-hover:text-blue-600 transition-colors",children:e.spanishName}),a.jsx("p",{className:"text-sm text-gray-600",children:e.englishName}),a.jsx("p",{className:"text-xs text-gray-500 italic mt-1",children:e.scientificName}),a.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[a.jsx("div",{className:"flex gap-1",children:Array.isArray(e.primaryColors)&&e.primaryColors.slice(0,3).map(e=>a.jsx("span",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:e},title:e},e))}),a.jsx("span",{className:"text-xs text-gray-500",children:e.familyName})]}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:Array.isArray(e.habitats)&&e.habitats.slice(0,2).map(e=>a.jsx("span",{className:"text-xs bg-green-50 text-green-700 px-2 py-1 rounded",children:e},e))}),(e.descriptionSpanish||e.descriptionEnglish)&&a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:a.jsx("p",{className:"text-xs text-gray-600 line-clamp-2",children:e.descriptionSpanish||e.descriptionEnglish})}),void 0!==e.annotationCount&&a.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:a.jsxs("p",{className:"text-xs text-gray-500",children:[e.annotationCount," annotations available"]})})]})]})}),c=({filters:e,onFilterChange:s,availableFilters:r})=>{const t=(a,r)=>{s({...e,[a]:r||void 0})},l=Object.values(e).filter(e=>e).length;return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Filters"}),l>0&&a.jsxs("button",{onClick:()=>{s({})},className:"text-sm text-blue-600 hover:text-blue-800",children:["Clear all (",l,")"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),a.jsx("input",{type:"text",value:e.searchTerm||"",onChange:e=>t("searchTerm",e.target.value),placeholder:"Spanish or English name...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order"}),a.jsxs("select",{value:e.orderName||"",onChange:e=>t("orderName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"All Orders"}),r.orders.map(e=>a.jsx("option",{value:e,children:e},e))]})]}),e.orderName&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Family"}),a.jsxs("select",{value:e.familyName||"",onChange:e=>t("familyName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"All Families"}),r.families.map(e=>a.jsx("option",{value:e,children:e},e))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size"}),a.jsx("div",{className:"flex gap-2",children:["small","medium","large"].map(s=>a.jsx("button",{onClick:()=>t("sizeCategory",e.sizeCategory===s?null:s),className:"flex-1 px-3 py-2 rounded-md border text-sm capitalize transition-colors "+(e.sizeCategory===s?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:s},s))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Habitat"}),a.jsxs("select",{value:e.habitat||"",onChange:e=>t("habitat",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"All Habitats"}),r.habitats.map(e=>a.jsx("option",{value:e,children:e},e))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Color"}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:r.colors.map(s=>a.jsx("button",{onClick:()=>t("primaryColor",e.primaryColor===s?null:s),className:"w-full h-8 rounded border-2 transition-all "+(e.primaryColor===s?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:border-gray-400"),style:{backgroundColor:s},title:s},s))})]})]})},d=()=>{const e=s(),{data:t=[],isLoading:o,error:d}=l(),[m,h]=r.useState({}),[x,p]=r.useState("grid"),g=r.useMemo(()=>{let e=[...t];if(m.searchTerm){const a=m.searchTerm.toLowerCase();e=e.filter(e=>e.spanishName?.toLowerCase().includes(a)||e.englishName?.toLowerCase().includes(a)||e.scientificName?.toLowerCase().includes(a))}return m.orderName&&(e=e.filter(e=>e.orderName===m.orderName)),m.familyName&&(e=e.filter(e=>e.familyName===m.familyName)),m.sizeCategory&&(e=e.filter(e=>e.sizeCategory===m.sizeCategory)),m.habitat&&(e=e.filter(e=>Array.isArray(e.habitats)&&e.habitats.includes(m.habitat))),m.primaryColor&&(e=e.filter(e=>Array.isArray(e.primaryColors)&&e.primaryColors.includes(m.primaryColor))),e},[t,m]),u=r.useMemo(()=>({orders:[...new Set(t.map(e=>e.orderName).filter(Boolean))].sort(),families:m.orderName?[...new Set(t.filter(e=>e.orderName===m.orderName).map(e=>e.familyName).filter(Boolean))].sort():[...new Set(t.map(e=>e.familyName).filter(Boolean))].sort(),habitats:[...new Set(t.flatMap(e=>Array.isArray(e.habitats)?e.habitats:[]))].sort(),colors:[...new Set(t.flatMap(e=>Array.isArray(e.primaryColors)?e.primaryColors:[]))].sort()}),[t,m.orderName]),b=r.useCallback(a=>{i("Selected species:",{name:a.spanishName}),e(`/species/${a.id}`,{state:{species:a}})},[e]),f=r.useCallback(e=>{h(e)},[]),y=r.useCallback(e=>{p(e)},[]),N=r.useCallback(()=>{h({})},[]);return o?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-gray-500",children:"Loading species..."})}):d?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-red-500",children:["Error loading species: ",d instanceof Error?d.message:"Unknown error"]})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Species Browser"}),a.jsxs("p",{className:"text-gray-600",children:["Explore ",t.length," bird species with Spanish vocabulary"]})]}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("div",{className:"w-64 flex-shrink-0",children:a.jsx(c,{filters:m,onFilterChange:f,availableFilters:u})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4 flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",g.length," of ",t.length," species"]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>y("grid"),className:"p-2 rounded "+("grid"===x?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),"aria-label":"Grid view",children:a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM13 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2h-2z"})})}),a.jsx("button",{onClick:()=>y("list"),className:"p-2 rounded "+("list"===x?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),"aria-label":"List view",children:a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})})]})})]}),0===g.length?a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[a.jsx("p",{className:"text-gray-500",children:"No species found matching your filters."}),a.jsx("button",{onClick:N,className:"mt-4 text-blue-600 hover:text-blue-800",children:"Clear filters"})]}):a.jsx("div",{className:"grid"===x?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-4",children:g.map(e=>a.jsx(n,{species:e,onClick:b,viewMode:x},e.id))})]})]})]})},m=()=>a.jsx(d,{});export{m as SpeciesPage};
