import{r as e,j as s,L as t}from"./react-vendor-D6vaw4E_.js";import{a as r,C as a,c as i,b as n,M as l}from"./Modal-Bb1NX3G2.js";import{B as o}from"./Badge-DLWuO9O4.js";import{u as c}from"./data-vendor-CRo3OXJP.js";import{e as d,u as x}from"./index-BgZ62Jpe.js";import"./vendor-BKIB45Nt.js";const m=({content:t,children:r,position:a="top",delay:i=200,disabled:n=!1,className:l=""})=>{const[o,c]=e.useState(!1),d=e.useRef(null);e.useEffect(()=>()=>{d.current&&clearTimeout(d.current)},[]);return s.jsxs("div",{className:"relative inline-block",onMouseEnter:()=>{n||(d.current=setTimeout(()=>{c(!0)},i))},onMouseLeave:()=>{d.current&&clearTimeout(d.current),c(!1)},children:[r,o&&!n&&s.jsx("div",{className:`absolute z-[9999] ${{top:"bottom-full left-1/2 transform -translate-x-1/2 mb-2",bottom:"top-full left-1/2 transform -translate-x-1/2 mt-2",left:"right-full top-1/2 transform -translate-y-1/2 mr-2",right:"left-full top-1/2 transform -translate-y-1/2 ml-2"}[a]} ${l}`,role:"tooltip",style:{position:"absolute",maxWidth:"280px",wordWrap:"break-word"},children:s.jsxs("div",{className:"bg-gray-900 text-white text-sm px-3 py-2 rounded-lg shadow-xl pointer-events-none",children:[s.jsx("div",{className:"whitespace-normal break-words leading-relaxed",children:t}),s.jsx("div",{className:`absolute border-6 ${{top:"top-full left-1/2 transform -translate-x-1/2 border-l-transparent border-r-transparent border-b-transparent border-t-gray-900",bottom:"bottom-full left-1/2 transform -translate-x-1/2 border-l-transparent border-r-transparent border-t-transparent border-b-gray-900",left:"left-full top-1/2 transform -translate-y-1/2 border-t-transparent border-b-transparent border-r-transparent border-l-gray-900",right:"right-full top-1/2 transform -translate-y-1/2 border-t-transparent border-b-transparent border-l-transparent border-r-gray-900"}[a]}`,style:{borderWidth:"6px"}})]})})]})},h={all:["ml-analytics"],overview:()=>[...h.all,"overview"],vocabularyBalance:()=>[...h.all,"vocabulary-balance"],patternLearning:()=>[...h.all,"pattern-learning"],qualityTrends:()=>[...h.all,"quality-trends"],performanceMetrics:()=>[...h.all,"performance-metrics"]},p=()=>{const{data:t,isLoading:x}=c({queryKey:h.overview(),queryFn:async()=>{try{return(await r.get("/api/ml/analytics/overview")).data}catch(e){throw d("Error fetching ML overview:",e instanceof Error?e:new Error(String(e))),e}},staleTime:12e4,gcTime:6e5,retry:2}),{data:p,isLoading:g}=c({queryKey:h.vocabularyBalance(),queryFn:async()=>{try{return(await r.get("/api/ml/analytics/vocabulary-balance")).data}catch(e){throw d("Error fetching vocabulary balance:",e instanceof Error?e:new Error(String(e))),e}},staleTime:3e5,gcTime:9e5,retry:2}),{data:u,isLoading:j}=c({queryKey:h.patternLearning(),queryFn:async()=>{try{return(await r.get("/api/ml/analytics/pattern-learning")).data}catch(e){throw d("Error fetching pattern learning:",e instanceof Error?e:new Error(String(e))),e}},staleTime:18e4,gcTime:6e5,retry:2}),{data:b,isLoading:y}=c({queryKey:h.qualityTrends(),queryFn:async()=>{try{return(await r.get("/api/ml/analytics/quality-trends")).data}catch(e){throw d("Error fetching quality trends:",e instanceof Error?e:new Error(String(e))),e}},staleTime:3e5,gcTime:9e5,retry:2}),{data:v,isLoading:f}=c({queryKey:h.performanceMetrics(),queryFn:async()=>{try{return(await r.get("/api/ml/analytics/performance-metrics")).data}catch(e){throw d("Error fetching performance metrics:",e instanceof Error?e:new Error(String(e))),e}},staleTime:12e4,gcTime:6e5,retry:2}),[N,w]=e.useState(null),[L,k]=e.useState(!1);return x||g||j||y||f?s.jsx("div",{className:"flex items-center justify-center p-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading ML analytics..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-end",children:s.jsx(o,{variant:"active"===u?.learningStatus?"success":"warning",size:"lg",children:"active"===u?.learningStatus?"üß† Learning Active":"‚è≥ Initializing"})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(a,{variant:"elevated",children:s.jsx(i,{children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Learned Patterns"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2 px-2",children:"Unique patterns identified from approved annotations"}),s.jsx("p",{className:"text-4xl font-bold text-purple-600",children:t?.patternLearning.totalPatterns||0}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Across ",t?.patternLearning.speciesTracked||0," species"]})]})})}),s.jsx(a,{variant:"elevated",children:s.jsx(i,{children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Quality Improvement"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2 px-2",children:"Change in annotation quality over time"}),s.jsx("p",{className:"text-4xl font-bold "+(t?.qualityMetrics.improvement.startsWith("+")?"text-green-600":"text-gray-600"),children:t?.qualityMetrics.improvement||"0%"}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Recent vs Historical"})]})})}),s.jsx(a,{variant:"elevated",children:s.jsx(i,{children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Vocab Coverage"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2 px-2",children:"Bird anatomy features covered by annotations"}),s.jsxs("p",{className:"text-4xl font-bold text-blue-600",children:[p?.coverage||0,"%"]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[p?.totalFeatures||0," features tracked"]})]})})}),s.jsx(a,{variant:"elevated",children:s.jsx(i,{children:s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Throughput"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2 px-2",children:"Images processed per second"}),s.jsx("p",{className:"text-4xl font-bold text-orange-600",children:(v?.pipeline?.throughput||0).toFixed(2)}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"images/second"})]})})})]}),u&&u.topPatterns.length>0&&s.jsxs(a,{variant:"elevated",children:[s.jsx(n,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Learned Patterns"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Visual and vocabulary features recognized from approved annotations"})]}),u.topPatterns.length>6&&s.jsxs("button",{onClick:()=>k(!0),className:"text-sm text-blue-600 hover:text-blue-800 underline",children:["View all ",u.topPatterns.length," patterns"]})]})}),s.jsx(i,{children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:u.topPatterns.slice(0,6).map((e,t)=>s.jsxs("button",{onClick:()=>w(e),className:"text-left border-2 rounded-lg p-4 cursor-pointer transition-all hover:shadow-md "+("high"===e.reliability?"border-green-300 bg-green-50 hover:border-green-400":"medium"===e.reliability?"border-yellow-300 bg-yellow-50 hover:border-yellow-400":"border-gray-300 bg-gray-50 hover:border-gray-400"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-900",children:e.feature}),s.jsxs(o,{variant:"high"===e.reliability?"success":"medium"===e.reliability?"warning":"default",size:"sm",children:[(100*e.confidence).toFixed(0),"%"]})]}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[s.jsxs("span",{children:[e.observations," observations"]}),s.jsx("span",{className:"text-blue-600",children:"Click for details"})]})]},t))})})]}),s.jsx(l,{isOpen:null!==N,onClose:()=>w(null),title:"Pattern Details",size:"md",children:N&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"p-4 rounded-lg "+("high"===N.reliability?"bg-green-50":"medium"===N.reliability?"bg-yellow-50":"bg-gray-50"),children:[s.jsx("h4",{className:"text-xl font-bold text-gray-900 mb-2",children:N.feature}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Confidence Score"}),s.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[(100*N.confidence).toFixed(1),"%"]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Observations"}),s.jsx("p",{className:"text-2xl font-bold text-purple-600",children:N.observations})]})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Reliability Level"}),s.jsxs(o,{variant:"high"===N.reliability?"success":"medium"===N.reliability?"warning":"default",size:"lg",children:[N.reliability.charAt(0).toUpperCase()+N.reliability.slice(1)," Reliability"]})]}),s.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"What this means:"}),' The ML system has learned to recognize "',N.feature,'" with'," ","high"===N.reliability?"high":"medium"===N.reliability?"moderate":"low"," ","accuracy based on ",N.observations," verified examples in the training data."]})})]})}),s.jsx(l,{isOpen:L,onClose:()=>k(!1),title:"All Learned Patterns",size:"lg",children:u&&s.jsx("div",{className:"max-h-96 overflow-y-auto",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:u.topPatterns.map((e,t)=>s.jsxs("button",{onClick:()=>{k(!1),w(e)},className:"text-left border-2 rounded-lg p-3 cursor-pointer transition-all hover:shadow-md "+("high"===e.reliability?"border-green-300 bg-green-50":"medium"===e.reliability?"border-yellow-300 bg-yellow-50":"border-gray-300 bg-gray-50"),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-semibold text-gray-900",children:e.feature}),s.jsxs(o,{variant:"high"===e.reliability?"success":"medium"===e.reliability?"warning":"default",size:"sm",children:[(100*e.confidence).toFixed(0),"%"]})]}),s.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[e.observations," observations"]})]},t))})})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[p&&p.topGaps&&p.topGaps.length>0&&s.jsxs(a,{variant:"elevated",children:[s.jsx(n,{children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Vocabulary Gaps"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Underrepresented bird anatomy features needing more annotations"})]})}),s.jsxs(i,{children:[s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:p.topGaps.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between py-2 px-3 bg-yellow-50 border border-yellow-200 rounded hover:bg-yellow-100 transition-colors",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:e}),s.jsx(o,{variant:"warning",size:"sm",children:"Needs more"})]},t))}),s.jsx("p",{className:"text-xs text-gray-600 mt-3",children:"üí° Run ML-optimized pipeline to target these features"})]})]}),b&&b.summary&&s.jsxs(a,{variant:"elevated",children:[s.jsx(n,{children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quality Trend"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Annotation quality comparison over time"})]})}),s.jsx(i,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(m,{content:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-semibold",children:"Current Quality Score"}),s.jsx("p",{children:"This shows the average confidence level of AI-generated annotations from the most recent week."}),s.jsxs("p",{className:"text-xs opacity-90",children:["‚Ä¢ ",s.jsx("strong",{children:"85-100%"}),": Excellent - AI is highly confident",s.jsx("br",{}),"‚Ä¢ ",s.jsx("strong",{children:"70-84%"}),": Good - AI is reliable",s.jsx("br",{}),"‚Ä¢ ",s.jsx("strong",{children:"Below 70%"}),": Needs improvement"]}),s.jsx("p",{className:"text-xs opacity-75 italic",children:"Based on confidence scores from approved annotations"})]}),position:"bottom",children:s.jsx("span",{className:"text-sm font-medium text-gray-700 cursor-help border-b border-dotted border-gray-400",children:"Current Quality"})}),s.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[(100*(b.summary.currentQuality||0)).toFixed(1),"%"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(m,{content:s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"font-semibold",children:"Quality Improvement Trend"}),s.jsx("p",{children:"Compares the first week vs. the most recent week of annotation data to show learning progress."}),s.jsxs("p",{className:"text-xs opacity-90",children:["‚Ä¢ ",s.jsx("strong",{children:"Positive (+)"}),": AI is improving over time ‚úì",s.jsx("br",{}),"‚Ä¢ ",s.jsx("strong",{children:"Negative (-)"}),": Quality has decreased",s.jsx("br",{}),"‚Ä¢ ",s.jsx("strong",{children:"0%"}),": No change or insufficient data"]}),s.jsx("p",{className:"text-xs opacity-75 italic",children:"Calculation: ((Most Recent - Earliest) √∑ Earliest) √ó 100"})]}),position:"bottom",children:s.jsx("span",{className:"text-sm font-medium text-gray-700 cursor-help border-b border-dotted border-gray-400",children:"Improvement"})}),s.jsxs("span",{className:"text-xl font-bold "+(Number(b.summary.improvement||0)>0?"text-green-600":"text-gray-600"),children:[Number(b.summary.improvement||0)>0?"+":"",b.summary.improvement||0,"%"]})]}),b.summary.totalWeeks&&s.jsx("div",{className:"pt-2 border-t",children:s.jsxs("p",{className:"text-xs text-gray-600",children:["üìà Tracking ",b.summary.totalWeeks," weeks of data"]})})]})})]})]}),v&&"active"===v.status?.pipelineStatus&&v.pipeline&&s.jsxs(a,{variant:"elevated",children:[s.jsx(n,{children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Pipeline Performance"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"Real-time annotation processing metrics"})]})}),s.jsxs(i,{children:[s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"P50 Latency"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Median processing time"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[((v.pipeline.p50Duration||0)/1e3).toFixed(1),"s"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"P95 Latency"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"95th percentile time"}),s.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[((v.pipeline.p95Duration||0)/1e3).toFixed(1),"s"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Success Rate"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Completed without errors"}),s.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[v.pipeline.successRate||0,"%"]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Concurrency"}),s.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"Parallel processing"}),s.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[v.pipeline.concurrency||1,"x"]})]})]}),v.status?.lastRun&&s.jsxs("p",{className:"text-xs text-gray-600 mt-4 text-center",children:["Last run: ",new Date(v.status.lastRun).toLocaleString()]})]})]}),u&&u.speciesInsights.length>0&&s.jsxs(a,{variant:"elevated",children:[s.jsx(n,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Species-Specific Recommendations"}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"AI-generated suggestions for improving dataset coverage per species"})]}),s.jsx(m,{content:"These recommendations are generated by analyzing your annotation patterns and identifying underrepresented features that need more training data.",children:s.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-purple-50 border border-purple-200 rounded-full cursor-help",children:[s.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),s.jsx("span",{className:"text-xs font-medium text-purple-700",children:"How it works"})]})})]})}),s.jsxs(i,{children:[s.jsx("div",{className:"mb-4 p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-l-4 border-blue-500 rounded-lg",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsxs("svg",{className:"h-6 w-6 text-blue-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:[s.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),s.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h4",{className:"text-sm font-bold text-blue-900 mb-2 flex items-center gap-2",children:[s.jsx("span",{children:"Take Action to Improve ML Accuracy"}),s.jsx(o,{variant:"primary",size:"sm",children:"Recommended"})]}),s.jsx("p",{className:"text-sm text-blue-800 mb-3",children:"The ML system identified gaps in training data. Annotating these specific features will significantly improve recognition accuracy for each species."}),s.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[s.jsxs("a",{href:"/admin/images",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors shadow-sm",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Start Annotating Images"]}),s.jsxs("a",{href:"/admin/annotations",className:"inline-flex items-center gap-2 px-4 py-2 bg-white text-blue-700 text-sm font-medium rounded-lg hover:bg-blue-50 transition-colors border-2 border-blue-200",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Review Existing Annotations"]})]}),s.jsx("div",{className:"mt-3 pt-3 border-t border-blue-200",children:s.jsxs("p",{className:"text-xs text-blue-700 flex items-start gap-2",children:[s.jsx("svg",{className:"w-4 h-4 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})}),s.jsxs("span",{children:[s.jsx("strong",{children:"Pro Tip:"})," Focus on species with the most recommended features first for maximum ML improvement impact."]})]})})]})]})}),s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:u.speciesInsights.slice(0,8).map((e,t)=>s.jsxs("div",{className:"bg-gradient-to-br from-white to-gray-50 border-2 border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:shadow-md transition-all",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h4",{className:"font-bold text-gray-900 text-base mb-1 flex items-center gap-2",children:[e.species,e.recommendedFeatures.length>=5&&s.jsx(m,{content:"High priority: This species needs significant annotation improvements",children:s.jsxs(o,{variant:"warning",size:"sm",children:[s.jsx("svg",{className:"w-3 h-3 inline mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"High Priority"]})})]}),s.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-600",children:[s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.annotations," annotations completed"]}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),e.features," features tracked"]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(o,{variant:"info",size:"sm",children:[e.annotations," done"]}),s.jsxs(o,{variant:e.recommendedFeatures.length>=5?"warning":"default",size:"sm",children:[e.recommendedFeatures.length," gaps"]})]})]}),e.recommendedFeatures.length>0&&s.jsxs("div",{className:"mb-3 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),s.jsx("p",{className:"text-xs font-semibold text-yellow-900",children:"Priority Features (needs more training data):"})]}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:e.recommendedFeatures.map((e,t)=>s.jsx(m,{content:`Add annotations focusing on "${e}" to improve ML recognition`,children:s.jsx("span",{className:"px-2.5 py-1 bg-white border-2 border-yellow-300 text-yellow-800 text-xs font-medium rounded-full hover:bg-yellow-100 hover:border-yellow-400 transition-colors cursor-help",children:e})},t))})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("a",{href:`/admin/images?species=${encodeURIComponent(e.species)}`,className:"flex-1 inline-flex items-center justify-center gap-2 px-3 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})}),"Annotate ",e.species," Images"]}),s.jsx(m,{content:"View all existing annotations for this species",children:s.jsxs("a",{href:`/admin/annotations?species=${encodeURIComponent(e.species)}`,className:"inline-flex items-center justify-center gap-2 px-3 py-2 bg-white text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-50 transition-colors border-2 border-gray-300",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Review"]})})]})]},t))}),s.jsx("div",{className:"mt-4 p-3 bg-gray-50 border border-gray-200 rounded-lg",children:s.jsxs("p",{className:"text-xs text-gray-600 flex items-start gap-2",children:[s.jsx("svg",{className:"w-4 h-4 text-gray-500 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),s.jsxs("span",{children:[s.jsx("strong",{children:"How this helps:"})," Each time you add annotations focusing on the recommended features, the ML model learns those patterns and improves its automatic recognition capabilities. The more focused annotations you add, the smarter the system becomes at identifying these features in future images."]})]})})]})]})]})},g=()=>{const{user:e,loading:r}=x();return r?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading ML analytics..."})]})}):e?s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"ML Analytics Dashboard"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Pattern learning, vocabulary balance, and quality optimization insights"})]}),s.jsx(t,{to:"/admin/annotations",className:"inline-flex items-center px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",children:"‚Üê Back to Annotations"})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:s.jsx(p,{})})]}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Authentication Required"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Please sign in to access ML analytics."}),s.jsx(t,{to:"/login",className:"inline-block bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-6 rounded-md",children:"Sign In"})]})})};export{g as MLAnalyticsPage,g as default};
