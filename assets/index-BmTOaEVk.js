var Tt=Object.defineProperty;var Pt=(e,t,s)=>t in e?Tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var V=(e,t,s)=>Pt(e,typeof t!="symbol"?t+"":t,s);import{r as b,a as Dt,L as J,B as kt,R as Lt,b as le,c as It}from"./react-vendor-BPIYoGmp.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();var st={exports:{}},pe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _t=b,Ft=Symbol.for("react.element"),Bt=Symbol.for("react.fragment"),Mt=Object.prototype.hasOwnProperty,Ut=_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qt={key:!0,ref:!0,__self:!0,__source:!0};function rt(e,t,s){var r,n={},o=null,a=null;s!==void 0&&(o=""+s),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)Mt.call(t,r)&&!qt.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:Ft,type:e,key:o,ref:a,props:n,_owner:Ut.current}}pe.Fragment=Bt;pe.jsx=rt;pe.jsxs=rt;st.exports=pe;var i=st.exports,Ae={},Me=Dt;Ae.createRoot=Me.createRoot,Ae.hydrateRoot=Me.hydrateRoot;class zt{constructor(){V(this,"dbName","aves-learning-db");V(this,"dbVersion",1);V(this,"db",null);V(this,"staticData",{annotations:[],species:[],exercises:[]})}async initialize(){await this.loadStaticData(),await this.initIndexedDB(),this.migrateLocalStorage()}async loadStaticData(){try{const t=await fetch("/data/annotations.json");this.staticData.annotations=await t.json();const s=await fetch("/data/species.json");this.staticData.species=await s.json();const r=await fetch("/data/exercises.json");this.staticData.exercises=await r.json()}catch(t){console.error("Failed to load static data:",t),this.loadEmbeddedData()}}loadEmbeddedData(){this.staticData.annotations=[{id:"1",imageId:"cardinal-1",boundingBox:{topLeft:{x:150,y:100},bottomRight:{x:250,y:150},width:100,height:50},type:"anatomical",spanishTerm:"pico",englishTerm:"beak",pronunciation:"PEE-koh",difficultyLevel:1,isVisible:!0,createdAt:new Date,updatedAt:new Date},{id:"2",imageId:"cardinal-1",boundingBox:{topLeft:{x:200,y:150},bottomRight:{x:280,y:200},width:80,height:50},type:"color",spanishTerm:"plumas rojas",englishTerm:"red feathers",pronunciation:"PLOO-mahs ROH-hahs",difficultyLevel:2,isVisible:!0,createdAt:new Date,updatedAt:new Date}],this.staticData.species=[{id:"1",scientificName:"Cardinalis cardinalis",englishName:"Northern Cardinal",spanishName:"Cardenal Rojo",orderName:"Passeriformes",familyName:"Cardinalidae",genus:"Cardinalis",habitats:["forest","urban"],sizeCategory:"medium",primaryColors:["red","black"],conservationStatus:"LC",primaryImageUrl:"https://images.unsplash.com/photo-1551031895-7f8e06d714f8?w=400",descriptionSpanish:"Ave distintiva de color rojo brillante con cresta prominente.",descriptionEnglish:"Distinctive bright red bird with prominent crest.",funFact:"Cardinals are one of the few bird species where both males and females sing.",annotationCount:2}]}async initIndexedDB(){return new Promise((t,s)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>{console.error("Failed to open IndexedDB"),s(r.error)},r.onsuccess=()=>{this.db=r.result,t()},r.onupgradeneeded=n=>{const o=n.target.result;if(!o.objectStoreNames.contains("interactions")){const a=o.createObjectStore("interactions",{keyPath:"id",autoIncrement:!0});a.createIndex("annotationId","annotationId",{unique:!1}),a.createIndex("timestamp","timestamp",{unique:!1})}if(o.objectStoreNames.contains("progress")||o.createObjectStore("progress",{keyPath:"sessionId"}).createIndex("lastUpdated","lastUpdated",{unique:!1}),!o.objectStoreNames.contains("exerciseResults")){const a=o.createObjectStore("exerciseResults",{keyPath:"id",autoIncrement:!0});a.createIndex("exerciseId","exerciseId",{unique:!1}),a.createIndex("completedAt","completedAt",{unique:!1})}}})}migrateLocalStorage(){const t=localStorage.getItem("aves-progress");if(t)try{const s=JSON.parse(t);this.saveProgress(s),localStorage.removeItem("aves-progress")}catch(s){console.error("Failed to migrate localStorage:",s)}}async getAnnotations(t){return t?this.staticData.annotations.filter(s=>s.imageId===t):this.staticData.annotations}async getSpecies(t){let s=[...this.staticData.species];return t&&(t.habitat&&(s=s.filter(r=>r.habitats.includes(t.habitat))),t.sizeCategory&&(s=s.filter(r=>r.sizeCategory===t.sizeCategory)),t.primaryColor&&(s=s.filter(r=>r.primaryColors.includes(t.primaryColor)))),s}async getExercises(t){return t?this.staticData.exercises.filter(s=>s.type===t):this.staticData.exercises}async saveInteraction(t){if(!this.db)throw new Error("Database not initialized");const r=this.db.transaction(["interactions"],"readwrite").objectStore("interactions");await new Promise((n,o)=>{const a=r.add({...t,timestamp:new Date});a.onsuccess=()=>n(a.result),a.onerror=()=>o(a.error)})}async getInteractions(t){if(!this.db)throw new Error("Database not initialized");const r=this.db.transaction(["interactions"],"readonly").objectStore("interactions");return new Promise((n,o)=>{const a=r.getAll();a.onsuccess=()=>{const d=a.result.filter(f=>f.userSessionId===t);n(d)},a.onerror=()=>o(a.error)})}async saveProgress(t){if(!this.db){localStorage.setItem("aves-progress-backup",JSON.stringify(t));return}const r=this.db.transaction(["progress"],"readwrite").objectStore("progress");await new Promise((n,o)=>{const a=r.put({...t,lastUpdated:new Date});a.onsuccess=()=>n(a.result),a.onerror=()=>o(a.error)})}async getProgress(t){if(!this.db){const n=localStorage.getItem("aves-progress-backup");return n?JSON.parse(n):null}const r=this.db.transaction(["progress"],"readonly").objectStore("progress");return new Promise((n,o)=>{const a=r.get(t);a.onsuccess=()=>n(a.result),a.onerror=()=>o(a.error)})}async saveExerciseResult(t){if(!this.db)throw new Error("Database not initialized");const r=this.db.transaction(["exerciseResults"],"readwrite").objectStore("exerciseResults");await new Promise((n,o)=>{const a=r.add({...t,completedAt:new Date});a.onsuccess=()=>n(a.result),a.onerror=()=>o(a.error)})}async getExerciseResults(t){if(!this.db)throw new Error("Database not initialized");const r=this.db.transaction(["exerciseResults"],"readonly").objectStore("exerciseResults");return new Promise((n,o)=>{const a=r.getAll();a.onsuccess=()=>{const d=a.result.filter(f=>f.sessionId===t);n(d)},a.onerror=()=>o(a.error)})}async exportData(){const t={interactions:await this.getInteractions(this.getCurrentSessionId()),progress:await this.getProgress(this.getCurrentSessionId()),exerciseResults:await this.getExerciseResults(this.getCurrentSessionId()),exportedAt:new Date().toISOString()};return JSON.stringify(t,null,2)}async importData(t){try{const s=JSON.parse(t);if(s.interactions)for(const r of s.interactions)await this.saveInteraction(r);if(s.progress&&await this.saveProgress(s.progress),s.exerciseResults)for(const r of s.exerciseResults)await this.saveExerciseResult(r)}catch(s){throw console.error("Failed to import data:",s),new Error("Invalid import data format")}}getCurrentSessionId(){let t=sessionStorage.getItem("aves-session-id");return t||(t=`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("aves-session-id",t)),t}async clearAllData(){if(this.db){const t=this.db.transaction(["interactions","progress","exerciseResults"],"readwrite");await Promise.all([this.clearObjectStore(t,"interactions"),this.clearObjectStore(t,"progress"),this.clearObjectStore(t,"exerciseResults")])}localStorage.clear(),sessionStorage.clear()}clearObjectStore(t,s){return new Promise((r,n)=>{const a=t.objectStore(s).clear();a.onsuccess=()=>r(),a.onerror=()=>n(a.error)})}}const A=new zt;A.initialize().catch(console.error);function nt(e,t){return function(){return e.apply(t,arguments)}}const{toString:Ht}=Object.prototype,{getPrototypeOf:ke}=Object,{iterator:ge,toStringTag:at}=Symbol,xe=(e=>t=>{const s=Ht.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),_=e=>(e=e.toLowerCase(),t=>xe(t)===e),be=e=>t=>typeof t===e,{isArray:Z}=Array,Q=be("undefined");function re(e){return e!==null&&!Q(e)&&e.constructor!==null&&!Q(e.constructor)&&L(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const it=_("ArrayBuffer");function $t(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&it(e.buffer),t}const Vt=be("string"),L=be("function"),ot=be("number"),ne=e=>e!==null&&typeof e=="object",Jt=e=>e===!0||e===!1,ue=e=>{if(xe(e)!=="object")return!1;const t=ke(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(at in e)&&!(ge in e)},Wt=e=>{if(!ne(e)||re(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Kt=_("Date"),Xt=_("File"),Gt=_("Blob"),Yt=_("FileList"),Qt=e=>ne(e)&&L(e.pipe),Zt=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||L(e.append)&&((t=xe(e))==="formdata"||t==="object"&&L(e.toString)&&e.toString()==="[object FormData]"))},es=_("URLSearchParams"),[ts,ss,rs,ns]=["ReadableStream","Request","Response","Headers"].map(_),as=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function ae(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let r,n;if(typeof e!="object"&&(e=[e]),Z(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{if(re(e))return;const o=s?Object.getOwnPropertyNames(e):Object.keys(e),a=o.length;let d;for(r=0;r<a;r++)d=o[r],t.call(null,e[d],d,e)}}function ct(e,t){if(re(e))return null;t=t.toLowerCase();const s=Object.keys(e);let r=s.length,n;for(;r-- >0;)if(n=s[r],t===n.toLowerCase())return n;return null}const W=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,lt=e=>!Q(e)&&e!==W;function Re(){const{caseless:e,skipUndefined:t}=lt(this)&&this||{},s={},r=(n,o)=>{const a=e&&ct(s,o)||o;ue(s[a])&&ue(n)?s[a]=Re(s[a],n):ue(n)?s[a]=Re({},n):Z(n)?s[a]=n.slice():(!t||!Q(n))&&(s[a]=n)};for(let n=0,o=arguments.length;n<o;n++)arguments[n]&&ae(arguments[n],r);return s}const is=(e,t,s,{allOwnKeys:r}={})=>(ae(t,(n,o)=>{s&&L(n)?e[o]=nt(n,s):e[o]=n},{allOwnKeys:r}),e),os=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),cs=(e,t,s,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},ls=(e,t,s,r)=>{let n,o,a;const d={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),o=n.length;o-- >0;)a=n[o],(!r||r(a,e,t))&&!d[a]&&(t[a]=e[a],d[a]=!0);e=s!==!1&&ke(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},ds=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const r=e.indexOf(t,s);return r!==-1&&r===s},us=e=>{if(!e)return null;if(Z(e))return e;let t=e.length;if(!ot(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},hs=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&ke(Uint8Array)),ms=(e,t)=>{const r=(e&&e[ge]).call(e);let n;for(;(n=r.next())&&!n.done;){const o=n.value;t.call(e,o[0],o[1])}},fs=(e,t)=>{let s;const r=[];for(;(s=e.exec(t))!==null;)r.push(s);return r},ps=_("HTMLFormElement"),gs=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,n){return r.toUpperCase()+n}),Ue=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),xs=_("RegExp"),dt=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),r={};ae(s,(n,o)=>{let a;(a=t(n,o,e))!==!1&&(r[o]=a||n)}),Object.defineProperties(e,r)},bs=e=>{dt(e,(t,s)=>{if(L(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=e[s];if(L(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},ys=(e,t)=>{const s={},r=n=>{n.forEach(o=>{s[o]=!0})};return Z(e)?r(e):r(String(e).split(t)),s},ws=()=>{},js=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function Ns(e){return!!(e&&L(e.append)&&e[at]==="FormData"&&e[ge])}const Ss=e=>{const t=new Array(10),s=(r,n)=>{if(ne(r)){if(t.indexOf(r)>=0)return;if(re(r))return r;if(!("toJSON"in r)){t[n]=r;const o=Z(r)?[]:{};return ae(r,(a,d)=>{const f=s(a,n+1);!Q(f)&&(o[d]=f)}),t[n]=void 0,o}}return r};return s(e,0)},vs=_("AsyncFunction"),Es=e=>e&&(ne(e)||L(e))&&L(e.then)&&L(e.catch),ut=((e,t)=>e?setImmediate:t?((s,r)=>(W.addEventListener("message",({source:n,data:o})=>{n===W&&o===s&&r.length&&r.shift()()},!1),n=>{r.push(n),W.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",L(W.postMessage)),Cs=typeof queueMicrotask<"u"?queueMicrotask.bind(W):typeof process<"u"&&process.nextTick||ut,As=e=>e!=null&&L(e[ge]),c={isArray:Z,isArrayBuffer:it,isBuffer:re,isFormData:Zt,isArrayBufferView:$t,isString:Vt,isNumber:ot,isBoolean:Jt,isObject:ne,isPlainObject:ue,isEmptyObject:Wt,isReadableStream:ts,isRequest:ss,isResponse:rs,isHeaders:ns,isUndefined:Q,isDate:Kt,isFile:Xt,isBlob:Gt,isRegExp:xs,isFunction:L,isStream:Qt,isURLSearchParams:es,isTypedArray:hs,isFileList:Yt,forEach:ae,merge:Re,extend:is,trim:as,stripBOM:os,inherits:cs,toFlatObject:ls,kindOf:xe,kindOfTest:_,endsWith:ds,toArray:us,forEachEntry:ms,matchAll:fs,isHTMLForm:ps,hasOwnProperty:Ue,hasOwnProp:Ue,reduceDescriptors:dt,freezeMethods:bs,toObjectSet:ys,toCamelCase:gs,noop:ws,toFiniteNumber:js,findKey:ct,global:W,isContextDefined:lt,isSpecCompliantForm:Ns,toJSONObject:Ss,isAsyncFn:vs,isThenable:Es,setImmediate:ut,asap:Cs,isIterable:As};function y(e,t,s,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}c.inherits(y,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:c.toJSONObject(this.config),code:this.code,status:this.status}}});const ht=y.prototype,mt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{mt[e]={value:e}});Object.defineProperties(y,mt);Object.defineProperty(ht,"isAxiosError",{value:!0});y.from=(e,t,s,r,n,o)=>{const a=Object.create(ht);c.toFlatObject(e,a,function(l){return l!==Error.prototype},h=>h!=="isAxiosError");const d=e&&e.message?e.message:"Error",f=t==null&&e?e.code:t;return y.call(a,d,f,s,r,n),e&&a.cause==null&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",o&&Object.assign(a,o),a};const Rs=null;function Oe(e){return c.isPlainObject(e)||c.isArray(e)}function ft(e){return c.endsWith(e,"[]")?e.slice(0,-2):e}function qe(e,t,s){return e?e.concat(t).map(function(n,o){return n=ft(n),!s&&o?"["+n+"]":n}).join(s?".":""):t}function Os(e){return c.isArray(e)&&!e.some(Oe)}const Ts=c.toFlatObject(c,{},null,function(t){return/^is[A-Z]/.test(t)});function ye(e,t,s){if(!c.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=c.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(p,x){return!c.isUndefined(x[p])});const r=s.metaTokens,n=s.visitor||l,o=s.dots,a=s.indexes,f=(s.Blob||typeof Blob<"u"&&Blob)&&c.isSpecCompliantForm(t);if(!c.isFunction(n))throw new TypeError("visitor must be a function");function h(m){if(m===null)return"";if(c.isDate(m))return m.toISOString();if(c.isBoolean(m))return m.toString();if(!f&&c.isBlob(m))throw new y("Blob is not supported. Use a Buffer instead.");return c.isArrayBuffer(m)||c.isTypedArray(m)?f&&typeof Blob=="function"?new Blob([m]):Buffer.from(m):m}function l(m,p,x){let v=m;if(m&&!x&&typeof m=="object"){if(c.endsWith(p,"{}"))p=r?p:p.slice(0,-2),m=JSON.stringify(m);else if(c.isArray(m)&&Os(m)||(c.isFileList(m)||c.endsWith(p,"[]"))&&(v=c.toArray(m)))return p=ft(p),v.forEach(function(C,w){!(c.isUndefined(C)||C===null)&&t.append(a===!0?qe([p],w,o):a===null?p:p+"[]",h(C))}),!1}return Oe(m)?!0:(t.append(qe(x,p,o),h(m)),!1)}const u=[],g=Object.assign(Ts,{defaultVisitor:l,convertValue:h,isVisitable:Oe});function N(m,p){if(!c.isUndefined(m)){if(u.indexOf(m)!==-1)throw Error("Circular reference detected in "+p.join("."));u.push(m),c.forEach(m,function(v,P){(!(c.isUndefined(v)||v===null)&&n.call(t,v,c.isString(P)?P.trim():P,p,g))===!0&&N(v,p?p.concat(P):[P])}),u.pop()}}if(!c.isObject(e))throw new TypeError("data must be an object");return N(e),t}function ze(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Le(e,t){this._pairs=[],e&&ye(e,this,t)}const pt=Le.prototype;pt.append=function(t,s){this._pairs.push([t,s])};pt.toString=function(t){const s=t?function(r){return t.call(this,r,ze)}:ze;return this._pairs.map(function(n){return s(n[0])+"="+s(n[1])},"").join("&")};function Ps(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function gt(e,t,s){if(!t)return e;const r=s&&s.encode||Ps;c.isFunction(s)&&(s={serialize:s});const n=s&&s.serialize;let o;if(n?o=n(t,s):o=c.isURLSearchParams(t)?t.toString():new Le(t,s).toString(r),o){const a=e.indexOf("#");a!==-1&&(e=e.slice(0,a)),e+=(e.indexOf("?")===-1?"?":"&")+o}return e}class He{constructor(){this.handlers=[]}use(t,s,r){return this.handlers.push({fulfilled:t,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){c.forEach(this.handlers,function(r){r!==null&&t(r)})}}const xt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ds=typeof URLSearchParams<"u"?URLSearchParams:Le,ks=typeof FormData<"u"?FormData:null,Ls=typeof Blob<"u"?Blob:null,Is={isBrowser:!0,classes:{URLSearchParams:Ds,FormData:ks,Blob:Ls},protocols:["http","https","file","blob","url","data"]},Ie=typeof window<"u"&&typeof document<"u",Te=typeof navigator=="object"&&navigator||void 0,_s=Ie&&(!Te||["ReactNative","NativeScript","NS"].indexOf(Te.product)<0),Fs=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Bs=Ie&&window.location.href||"http://localhost",Ms=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ie,hasStandardBrowserEnv:_s,hasStandardBrowserWebWorkerEnv:Fs,navigator:Te,origin:Bs},Symbol.toStringTag,{value:"Module"})),T={...Ms,...Is};function Us(e,t){return ye(e,new T.classes.URLSearchParams,{visitor:function(s,r,n,o){return T.isNode&&c.isBuffer(s)?(this.append(r,s.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...t})}function qs(e){return c.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function zs(e){const t={},s=Object.keys(e);let r;const n=s.length;let o;for(r=0;r<n;r++)o=s[r],t[o]=e[o];return t}function bt(e){function t(s,r,n,o){let a=s[o++];if(a==="__proto__")return!0;const d=Number.isFinite(+a),f=o>=s.length;return a=!a&&c.isArray(n)?n.length:a,f?(c.hasOwnProp(n,a)?n[a]=[n[a],r]:n[a]=r,!d):((!n[a]||!c.isObject(n[a]))&&(n[a]=[]),t(s,r,n[a],o)&&c.isArray(n[a])&&(n[a]=zs(n[a])),!d)}if(c.isFormData(e)&&c.isFunction(e.entries)){const s={};return c.forEachEntry(e,(r,n)=>{t(qs(r),n,s,0)}),s}return null}function Hs(e,t,s){if(c.isString(e))try{return(t||JSON.parse)(e),c.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(e)}const ie={transitional:xt,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const r=s.getContentType()||"",n=r.indexOf("application/json")>-1,o=c.isObject(t);if(o&&c.isHTMLForm(t)&&(t=new FormData(t)),c.isFormData(t))return n?JSON.stringify(bt(t)):t;if(c.isArrayBuffer(t)||c.isBuffer(t)||c.isStream(t)||c.isFile(t)||c.isBlob(t)||c.isReadableStream(t))return t;if(c.isArrayBufferView(t))return t.buffer;if(c.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Us(t,this.formSerializer).toString();if((d=c.isFileList(t))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return ye(d?{"files[]":t}:t,f&&new f,this.formSerializer)}}return o||n?(s.setContentType("application/json",!1),Hs(t)):t}],transformResponse:[function(t){const s=this.transitional||ie.transitional,r=s&&s.forcedJSONParsing,n=this.responseType==="json";if(c.isResponse(t)||c.isReadableStream(t))return t;if(t&&c.isString(t)&&(r&&!this.responseType||n)){const a=!(s&&s.silentJSONParsing)&&n;try{return JSON.parse(t,this.parseReviver)}catch(d){if(a)throw d.name==="SyntaxError"?y.from(d,y.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:T.classes.FormData,Blob:T.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};c.forEach(["delete","get","head","post","put","patch"],e=>{ie.headers[e]={}});const $s=c.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Vs=e=>{const t={};let s,r,n;return e&&e.split(`
`).forEach(function(a){n=a.indexOf(":"),s=a.substring(0,n).trim().toLowerCase(),r=a.substring(n+1).trim(),!(!s||t[s]&&$s[s])&&(s==="set-cookie"?t[s]?t[s].push(r):t[s]=[r]:t[s]=t[s]?t[s]+", "+r:r)}),t},$e=Symbol("internals");function se(e){return e&&String(e).trim().toLowerCase()}function he(e){return e===!1||e==null?e:c.isArray(e)?e.map(he):String(e)}function Js(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(e);)t[r[1]]=r[2];return t}const Ws=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Ne(e,t,s,r,n){if(c.isFunction(r))return r.call(this,t,s);if(n&&(t=s),!!c.isString(t)){if(c.isString(r))return t.indexOf(r)!==-1;if(c.isRegExp(r))return r.test(t)}}function Ks(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,r)=>s.toUpperCase()+r)}function Xs(e,t){const s=c.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+s,{value:function(n,o,a){return this[r].call(this,t,n,o,a)},configurable:!0})})}let I=class{constructor(t){t&&this.set(t)}set(t,s,r){const n=this;function o(d,f,h){const l=se(f);if(!l)throw new Error("header name must be a non-empty string");const u=c.findKey(n,l);(!u||n[u]===void 0||h===!0||h===void 0&&n[u]!==!1)&&(n[u||f]=he(d))}const a=(d,f)=>c.forEach(d,(h,l)=>o(h,l,f));if(c.isPlainObject(t)||t instanceof this.constructor)a(t,s);else if(c.isString(t)&&(t=t.trim())&&!Ws(t))a(Vs(t),s);else if(c.isObject(t)&&c.isIterable(t)){let d={},f,h;for(const l of t){if(!c.isArray(l))throw TypeError("Object iterator must return a key-value pair");d[h=l[0]]=(f=d[h])?c.isArray(f)?[...f,l[1]]:[f,l[1]]:l[1]}a(d,s)}else t!=null&&o(s,t,r);return this}get(t,s){if(t=se(t),t){const r=c.findKey(this,t);if(r){const n=this[r];if(!s)return n;if(s===!0)return Js(n);if(c.isFunction(s))return s.call(this,n,r);if(c.isRegExp(s))return s.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=se(t),t){const r=c.findKey(this,t);return!!(r&&this[r]!==void 0&&(!s||Ne(this,this[r],r,s)))}return!1}delete(t,s){const r=this;let n=!1;function o(a){if(a=se(a),a){const d=c.findKey(r,a);d&&(!s||Ne(r,r[d],d,s))&&(delete r[d],n=!0)}}return c.isArray(t)?t.forEach(o):o(t),n}clear(t){const s=Object.keys(this);let r=s.length,n=!1;for(;r--;){const o=s[r];(!t||Ne(this,this[o],o,t,!0))&&(delete this[o],n=!0)}return n}normalize(t){const s=this,r={};return c.forEach(this,(n,o)=>{const a=c.findKey(r,o);if(a){s[a]=he(n),delete s[o];return}const d=t?Ks(o):String(o).trim();d!==o&&delete s[o],s[d]=he(n),r[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return c.forEach(this,(r,n)=>{r!=null&&r!==!1&&(s[n]=t&&c.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const r=new this(t);return s.forEach(n=>r.set(n)),r}static accessor(t){const r=(this[$e]=this[$e]={accessors:{}}).accessors,n=this.prototype;function o(a){const d=se(a);r[d]||(Xs(n,a),r[d]=!0)}return c.isArray(t)?t.forEach(o):o(t),this}};I.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);c.reduceDescriptors(I.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[s]=r}}});c.freezeMethods(I);function Se(e,t){const s=this||ie,r=t||s,n=I.from(r.headers);let o=r.data;return c.forEach(e,function(d){o=d.call(s,o,n.normalize(),t?t.status:void 0)}),n.normalize(),o}function yt(e){return!!(e&&e.__CANCEL__)}function ee(e,t,s){y.call(this,e??"canceled",y.ERR_CANCELED,t,s),this.name="CanceledError"}c.inherits(ee,y,{__CANCEL__:!0});function wt(e,t,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?e(s):t(new y("Request failed with status code "+s.status,[y.ERR_BAD_REQUEST,y.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function Gs(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Ys(e,t){e=e||10;const s=new Array(e),r=new Array(e);let n=0,o=0,a;return t=t!==void 0?t:1e3,function(f){const h=Date.now(),l=r[o];a||(a=h),s[n]=f,r[n]=h;let u=o,g=0;for(;u!==n;)g+=s[u++],u=u%e;if(n=(n+1)%e,n===o&&(o=(o+1)%e),h-a<t)return;const N=l&&h-l;return N?Math.round(g*1e3/N):void 0}}function Qs(e,t){let s=0,r=1e3/t,n,o;const a=(h,l=Date.now())=>{s=l,n=null,o&&(clearTimeout(o),o=null),e(...h)};return[(...h)=>{const l=Date.now(),u=l-s;u>=r?a(h,l):(n=h,o||(o=setTimeout(()=>{o=null,a(n)},r-u)))},()=>n&&a(n)]}const fe=(e,t,s=3)=>{let r=0;const n=Ys(50,250);return Qs(o=>{const a=o.loaded,d=o.lengthComputable?o.total:void 0,f=a-r,h=n(f),l=a<=d;r=a;const u={loaded:a,total:d,progress:d?a/d:void 0,bytes:f,rate:h||void 0,estimated:h&&d&&l?(d-a)/h:void 0,event:o,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(u)},s)},Ve=(e,t)=>{const s=e!=null;return[r=>t[0]({lengthComputable:s,total:e,loaded:r}),t[1]]},Je=e=>(...t)=>c.asap(()=>e(...t)),Zs=T.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,T.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(T.origin),T.navigator&&/(msie|trident)/i.test(T.navigator.userAgent)):()=>!0,er=T.hasStandardBrowserEnv?{write(e,t,s,r,n,o){const a=[e+"="+encodeURIComponent(t)];c.isNumber(s)&&a.push("expires="+new Date(s).toGMTString()),c.isString(r)&&a.push("path="+r),c.isString(n)&&a.push("domain="+n),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function tr(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function sr(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function jt(e,t,s){let r=!tr(t);return e&&(r||s==!1)?sr(e,t):t}const We=e=>e instanceof I?{...e}:e;function X(e,t){t=t||{};const s={};function r(h,l,u,g){return c.isPlainObject(h)&&c.isPlainObject(l)?c.merge.call({caseless:g},h,l):c.isPlainObject(l)?c.merge({},l):c.isArray(l)?l.slice():l}function n(h,l,u,g){if(c.isUndefined(l)){if(!c.isUndefined(h))return r(void 0,h,u,g)}else return r(h,l,u,g)}function o(h,l){if(!c.isUndefined(l))return r(void 0,l)}function a(h,l){if(c.isUndefined(l)){if(!c.isUndefined(h))return r(void 0,h)}else return r(void 0,l)}function d(h,l,u){if(u in t)return r(h,l);if(u in e)return r(void 0,h)}const f={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:d,headers:(h,l,u)=>n(We(h),We(l),u,!0)};return c.forEach(Object.keys({...e,...t}),function(l){const u=f[l]||n,g=u(e[l],t[l],l);c.isUndefined(g)&&u!==d||(s[l]=g)}),s}const Nt=e=>{const t=X({},e);let{data:s,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:o,headers:a,auth:d}=t;if(t.headers=a=I.from(a),t.url=gt(jt(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&a.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),c.isFormData(s)){if(T.hasStandardBrowserEnv||T.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(c.isFunction(s.getHeaders)){const f=s.getHeaders(),h=["content-type","content-length"];Object.entries(f).forEach(([l,u])=>{h.includes(l.toLowerCase())&&a.set(l,u)})}}if(T.hasStandardBrowserEnv&&(r&&c.isFunction(r)&&(r=r(t)),r||r!==!1&&Zs(t.url))){const f=n&&o&&er.read(o);f&&a.set(n,f)}return t},rr=typeof XMLHttpRequest<"u",nr=rr&&function(e){return new Promise(function(s,r){const n=Nt(e);let o=n.data;const a=I.from(n.headers).normalize();let{responseType:d,onUploadProgress:f,onDownloadProgress:h}=n,l,u,g,N,m;function p(){N&&N(),m&&m(),n.cancelToken&&n.cancelToken.unsubscribe(l),n.signal&&n.signal.removeEventListener("abort",l)}let x=new XMLHttpRequest;x.open(n.method.toUpperCase(),n.url,!0),x.timeout=n.timeout;function v(){if(!x)return;const C=I.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),j={data:!d||d==="text"||d==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:C,config:e,request:x};wt(function(S){s(S),p()},function(S){r(S),p()},j),x=null}"onloadend"in x?x.onloadend=v:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(v)},x.onabort=function(){x&&(r(new y("Request aborted",y.ECONNABORTED,e,x)),x=null)},x.onerror=function(w){const j=w&&w.message?w.message:"Network Error",R=new y(j,y.ERR_NETWORK,e,x);R.event=w||null,r(R),x=null},x.ontimeout=function(){let w=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const j=n.transitional||xt;n.timeoutErrorMessage&&(w=n.timeoutErrorMessage),r(new y(w,j.clarifyTimeoutError?y.ETIMEDOUT:y.ECONNABORTED,e,x)),x=null},o===void 0&&a.setContentType(null),"setRequestHeader"in x&&c.forEach(a.toJSON(),function(w,j){x.setRequestHeader(j,w)}),c.isUndefined(n.withCredentials)||(x.withCredentials=!!n.withCredentials),d&&d!=="json"&&(x.responseType=n.responseType),h&&([g,m]=fe(h,!0),x.addEventListener("progress",g)),f&&x.upload&&([u,N]=fe(f),x.upload.addEventListener("progress",u),x.upload.addEventListener("loadend",N)),(n.cancelToken||n.signal)&&(l=C=>{x&&(r(!C||C.type?new ee(null,e,x):C),x.abort(),x=null)},n.cancelToken&&n.cancelToken.subscribe(l),n.signal&&(n.signal.aborted?l():n.signal.addEventListener("abort",l)));const P=Gs(n.url);if(P&&T.protocols.indexOf(P)===-1){r(new y("Unsupported protocol "+P+":",y.ERR_BAD_REQUEST,e));return}x.send(o||null)})},ar=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let r=new AbortController,n;const o=function(h){if(!n){n=!0,d();const l=h instanceof Error?h:this.reason;r.abort(l instanceof y?l:new ee(l instanceof Error?l.message:l))}};let a=t&&setTimeout(()=>{a=null,o(new y(`timeout ${t} of ms exceeded`,y.ETIMEDOUT))},t);const d=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(h=>{h.unsubscribe?h.unsubscribe(o):h.removeEventListener("abort",o)}),e=null)};e.forEach(h=>h.addEventListener("abort",o));const{signal:f}=r;return f.unsubscribe=()=>c.asap(d),f}},ir=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let r=0,n;for(;r<s;)n=r+t,yield e.slice(r,n),r=n},or=async function*(e,t){for await(const s of cr(e))yield*ir(s,t)},cr=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:r}=await t.read();if(s)break;yield r}}finally{await t.cancel()}},Ke=(e,t,s,r)=>{const n=or(e,t);let o=0,a,d=f=>{a||(a=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:h,value:l}=await n.next();if(h){d(),f.close();return}let u=l.byteLength;if(s){let g=o+=u;s(g)}f.enqueue(new Uint8Array(l))}catch(h){throw d(h),h}},cancel(f){return d(f),n.return()}},{highWaterMark:2})},Xe=64*1024,{isFunction:de}=c,lr=(({Request:e,Response:t})=>({Request:e,Response:t}))(c.global),{ReadableStream:Ge,TextEncoder:Ye}=c.global,Qe=(e,...t)=>{try{return!!e(...t)}catch{return!1}},dr=e=>{e=c.merge.call({skipUndefined:!0},lr,e);const{fetch:t,Request:s,Response:r}=e,n=t?de(t):typeof fetch=="function",o=de(s),a=de(r);if(!n)return!1;const d=n&&de(Ge),f=n&&(typeof Ye=="function"?(m=>p=>m.encode(p))(new Ye):async m=>new Uint8Array(await new s(m).arrayBuffer())),h=o&&d&&Qe(()=>{let m=!1;const p=new s(T.origin,{body:new Ge,method:"POST",get duplex(){return m=!0,"half"}}).headers.has("Content-Type");return m&&!p}),l=a&&d&&Qe(()=>c.isReadableStream(new r("").body)),u={stream:l&&(m=>m.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(m=>{!u[m]&&(u[m]=(p,x)=>{let v=p&&p[m];if(v)return v.call(p);throw new y(`Response type '${m}' is not supported`,y.ERR_NOT_SUPPORT,x)})});const g=async m=>{if(m==null)return 0;if(c.isBlob(m))return m.size;if(c.isSpecCompliantForm(m))return(await new s(T.origin,{method:"POST",body:m}).arrayBuffer()).byteLength;if(c.isArrayBufferView(m)||c.isArrayBuffer(m))return m.byteLength;if(c.isURLSearchParams(m)&&(m=m+""),c.isString(m))return(await f(m)).byteLength},N=async(m,p)=>{const x=c.toFiniteNumber(m.getContentLength());return x??g(p)};return async m=>{let{url:p,method:x,data:v,signal:P,cancelToken:C,timeout:w,onDownloadProgress:j,onUploadProgress:R,responseType:S,headers:D,withCredentials:O="same-origin",fetchOptions:te}=Nt(m),G=t||fetch;S=S?(S+"").toLowerCase():"text";let z=ar([P,C&&C.toAbortSignal()],w),U=null;const F=z&&z.unsubscribe&&(()=>{z.unsubscribe()});let oe;try{if(R&&h&&x!=="get"&&x!=="head"&&(oe=await N(D,v))!==0){let $=new s(p,{method:"POST",body:v,duplex:"half"}),Y;if(c.isFormData(v)&&(Y=$.headers.get("content-type"))&&D.setContentType(Y),$.body){const[je,ce]=Ve(oe,fe(Je(R)));v=Ke($.body,Xe,je,ce)}}c.isString(O)||(O=O?"include":"omit");const B=o&&"credentials"in s.prototype,_e={...te,signal:z,method:x.toUpperCase(),headers:D.normalize().toJSON(),body:v,duplex:"half",credentials:B?O:void 0};U=o&&new s(p,_e);let H=await(o?G(U,te):G(p,_e));const Fe=l&&(S==="stream"||S==="response");if(l&&(j||Fe&&F)){const $={};["status","statusText","headers"].forEach(Be=>{$[Be]=H[Be]});const Y=c.toFiniteNumber(H.headers.get("content-length")),[je,ce]=j&&Ve(Y,fe(Je(j),!0))||[];H=new r(Ke(H.body,Xe,je,()=>{ce&&ce(),F&&F()}),$)}S=S||"text";let Ot=await u[c.findKey(u,S)||"text"](H,m);return!Fe&&F&&F(),await new Promise(($,Y)=>{wt($,Y,{data:Ot,headers:I.from(H.headers),status:H.status,statusText:H.statusText,config:m,request:U})})}catch(B){throw F&&F(),B&&B.name==="TypeError"&&/Load failed|fetch/i.test(B.message)?Object.assign(new y("Network Error",y.ERR_NETWORK,m,U),{cause:B.cause||B}):y.from(B,B&&B.code,m,U)}}},ur=new Map,St=e=>{let t=e?e.env:{};const{fetch:s,Request:r,Response:n}=t,o=[r,n,s];let a=o.length,d=a,f,h,l=ur;for(;d--;)f=o[d],h=l.get(f),h===void 0&&l.set(f,h=d?new Map:dr(t)),l=h;return h};St();const Pe={http:Rs,xhr:nr,fetch:{get:St}};c.forEach(Pe,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ze=e=>`- ${e}`,hr=e=>c.isFunction(e)||e===null||e===!1,vt={getAdapter:(e,t)=>{e=c.isArray(e)?e:[e];const{length:s}=e;let r,n;const o={};for(let a=0;a<s;a++){r=e[a];let d;if(n=r,!hr(r)&&(n=Pe[(d=String(r)).toLowerCase()],n===void 0))throw new y(`Unknown adapter '${d}'`);if(n&&(c.isFunction(n)||(n=n.get(t))))break;o[d||"#"+a]=n}if(!n){const a=Object.entries(o).map(([f,h])=>`adapter ${f} `+(h===!1?"is not supported by the environment":"is not available in the build"));let d=s?a.length>1?`since :
`+a.map(Ze).join(`
`):" "+Ze(a[0]):"as no adapter specified";throw new y("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return n},adapters:Pe};function ve(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ee(null,e)}function et(e){return ve(e),e.headers=I.from(e.headers),e.data=Se.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),vt.getAdapter(e.adapter||ie.adapter,e)(e).then(function(r){return ve(e),r.data=Se.call(e,e.transformResponse,r),r.headers=I.from(r.headers),r},function(r){return yt(r)||(ve(e),r&&r.response&&(r.response.data=Se.call(e,e.transformResponse,r.response),r.response.headers=I.from(r.response.headers))),Promise.reject(r)})}const Et="1.12.2",we={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{we[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const tt={};we.transitional=function(t,s,r){function n(o,a){return"[Axios v"+Et+"] Transitional option '"+o+"'"+a+(r?". "+r:"")}return(o,a,d)=>{if(t===!1)throw new y(n(a," has been removed"+(s?" in "+s:"")),y.ERR_DEPRECATED);return s&&!tt[a]&&(tt[a]=!0,console.warn(n(a," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(o,a,d):!0}};we.spelling=function(t){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function mr(e,t,s){if(typeof e!="object")throw new y("options must be an object",y.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let n=r.length;for(;n-- >0;){const o=r[n],a=t[o];if(a){const d=e[o],f=d===void 0||a(d,o,e);if(f!==!0)throw new y("option "+o+" must be "+f,y.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new y("Unknown option "+o,y.ERR_BAD_OPTION)}}const me={assertOptions:mr,validators:we},M=me.validators;let K=class{constructor(t){this.defaults=t||{},this.interceptors={request:new He,response:new He}}async request(t,s){try{return await this._request(t,s)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const o=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?o&&!String(r.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+o):r.stack=o}catch{}}throw r}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=X(this.defaults,s);const{transitional:r,paramsSerializer:n,headers:o}=s;r!==void 0&&me.assertOptions(r,{silentJSONParsing:M.transitional(M.boolean),forcedJSONParsing:M.transitional(M.boolean),clarifyTimeoutError:M.transitional(M.boolean)},!1),n!=null&&(c.isFunction(n)?s.paramsSerializer={serialize:n}:me.assertOptions(n,{encode:M.function,serialize:M.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),me.assertOptions(s,{baseUrl:M.spelling("baseURL"),withXsrfToken:M.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let a=o&&c.merge(o.common,o[s.method]);o&&c.forEach(["delete","get","head","post","put","patch","common"],m=>{delete o[m]}),s.headers=I.concat(a,o);const d=[];let f=!0;this.interceptors.request.forEach(function(p){typeof p.runWhen=="function"&&p.runWhen(s)===!1||(f=f&&p.synchronous,d.unshift(p.fulfilled,p.rejected))});const h=[];this.interceptors.response.forEach(function(p){h.push(p.fulfilled,p.rejected)});let l,u=0,g;if(!f){const m=[et.bind(this),void 0];for(m.unshift(...d),m.push(...h),g=m.length,l=Promise.resolve(s);u<g;)l=l.then(m[u++],m[u++]);return l}g=d.length;let N=s;for(;u<g;){const m=d[u++],p=d[u++];try{N=m(N)}catch(x){p.call(this,x);break}}try{l=et.call(this,N)}catch(m){return Promise.reject(m)}for(u=0,g=h.length;u<g;)l=l.then(h[u++],h[u++]);return l}getUri(t){t=X(this.defaults,t);const s=jt(t.baseURL,t.url,t.allowAbsoluteUrls);return gt(s,t.params,t.paramsSerializer)}};c.forEach(["delete","get","head","options"],function(t){K.prototype[t]=function(s,r){return this.request(X(r||{},{method:t,url:s,data:(r||{}).data}))}});c.forEach(["post","put","patch"],function(t){function s(r){return function(o,a,d){return this.request(X(d||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))}}K.prototype[t]=s(),K.prototype[t+"Form"]=s(!0)});let fr=class Ct{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(o){s=o});const r=this;this.promise.then(n=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](n);r._listeners=null}),this.promise.then=n=>{let o;const a=new Promise(d=>{r.subscribe(d),o=d}).then(n);return a.cancel=function(){r.unsubscribe(o)},a},t(function(o,a,d){r.reason||(r.reason=new ee(o,a,d),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=r=>{t.abort(r)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new Ct(function(n){t=n}),cancel:t}}};function pr(e){return function(s){return e.apply(null,s)}}function gr(e){return c.isObject(e)&&e.isAxiosError===!0}const De={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(De).forEach(([e,t])=>{De[t]=e});function At(e){const t=new K(e),s=nt(K.prototype.request,t);return c.extend(s,K.prototype,t,{allOwnKeys:!0}),c.extend(s,t,null,{allOwnKeys:!0}),s.create=function(n){return At(X(e,n))},s}const E=At(ie);E.Axios=K;E.CanceledError=ee;E.CancelToken=fr;E.isCancel=yt;E.VERSION=Et;E.toFormData=ye;E.AxiosError=y;E.Cancel=E.CanceledError;E.all=function(t){return Promise.all(t)};E.spread=pr;E.isAxiosError=gr;E.mergeConfig=X;E.AxiosHeaders=I;E.formToJSON=e=>bt(c.isHTMLForm(e)?new FormData(e):e);E.getAdapter=vt.getAdapter;E.HttpStatusCode=De;E.default=E;const{Axios:Ur,AxiosError:qr,CanceledError:zr,isCancel:Hr,CancelToken:$r,VERSION:Vr,all:Jr,Cancel:Wr,isAxiosError:Kr,spread:Xr,toFormData:Gr,AxiosHeaders:Yr,HttpStatusCode:Qr,formToJSON:Zr,getAdapter:en,mergeConfig:tn}=E,Ee={},Rt=window.location.hostname.includes("github.io"),xr=window.location.hostname==="localhost"&&!Rt;class br{constructor(){V(this,"axiosInstance",null);V(this,"useClientStorage");this.useClientStorage=Rt||!xr,this.useClientStorage||(this.axiosInstance=E.create({baseURL:(Ee==null?void 0:Ee.VITE_API_URL)||"http://localhost:3001",timeout:1e4,headers:{"Content-Type":"application/json"}}),this.setupInterceptors())}setupInterceptors(){this.axiosInstance&&(this.axiosInstance.interceptors.request.use(t=>{const s=sessionStorage.getItem("aves-session-id");return s&&(t.headers["X-Session-Id"]=s),t},t=>Promise.reject(t)),this.axiosInstance.interceptors.response.use(t=>t,t=>{var s;return((s=t.response)==null?void 0:s.status)===503&&(console.warn("Backend unavailable, switching to client storage"),this.useClientStorage=!0),Promise.reject(t)}))}async getAnnotations(t){if(this.useClientStorage)return A.getAnnotations(t);try{return(await this.axiosInstance.get("/api/annotations",{params:{imageId:t}})).data}catch(s){return console.error("API error, falling back to client storage:",s),A.getAnnotations(t)}}async createAnnotation(t){if(this.useClientStorage)throw new Error("Cannot create annotations in static mode");return(await this.axiosInstance.post("/api/annotations",t)).data}async getSpecies(t){if(this.useClientStorage)return A.getSpecies(t);try{return(await this.axiosInstance.get("/api/species",{params:t})).data}catch(s){return console.error("API error, falling back to client storage:",s),A.getSpecies(t)}}async getSpeciesById(t){return(await this.getSpecies()).find(r=>r.id===t)||null}async getExercises(t){if(this.useClientStorage)return A.getExercises(t);try{return(await this.axiosInstance.get("/api/exercises",{params:{type:t}})).data}catch(s){return console.error("API error, falling back to client storage:",s),A.getExercises(t)}}async submitExerciseAnswer(t,s){if(this.useClientStorage){const n={exerciseId:t,answer:s,correct:this.validateAnswer(t,s),timestamp:new Date};return await A.saveExerciseResult(n),n}return(await this.axiosInstance.post("/api/exercises/submit",{exerciseId:t,answer:s})).data}validateAnswer(t,s){return Math.random()>.3}async saveInteraction(t){if(this.useClientStorage)return A.saveInteraction(t);await this.axiosInstance.post("/api/vocabulary/interact",t)}async getInteractions(t){if(this.useClientStorage)return A.getInteractions(t);try{return(await this.axiosInstance.get("/api/vocabulary/interactions",{params:{sessionId:t}})).data}catch(s){return console.error("API error, falling back to client storage:",s),A.getInteractions(t)}}async saveProgress(t){if(this.useClientStorage)return A.saveProgress(t);await this.axiosInstance.post("/api/progress",t)}async getProgress(t){if(this.useClientStorage)return A.getProgress(t);try{return(await this.axiosInstance.get("/api/progress",{params:{sessionId:t}})).data}catch(s){return console.error("API error, falling back to client storage:",s),A.getProgress(t)}}async exportUserData(){return A.exportData()}async importUserData(t){return A.importData(t)}async clearAllData(){return A.clearAllData()}isUsingClientStorage(){return this.useClientStorage}getStorageMode(){return this.useClientStorage?"client":"backend"}}const k=new br,q={annotations:{list:e=>k.getAnnotations(e),create:e=>k.createAnnotation(e)},species:{list:e=>k.getSpecies(e),get:e=>k.getSpeciesById(e)},exercises:{list:e=>k.getExercises(e),submit:(e,t)=>k.submitExerciseAnswer(e,t)},vocabulary:{saveInteraction:e=>k.saveInteraction(e),getInteractions:e=>k.getInteractions(e)},progress:{save:e=>k.saveProgress(e),get:e=>k.getProgress(e)},utils:{export:()=>k.exportUserData(),import:e=>k.importUserData(e),clear:()=>k.clearAllData(),getMode:()=>k.getStorageMode()}},yr=()=>{const[e,t]=b.useState(null),[s,r]=b.useState(!1),n=b.useCallback(()=>{let u=sessionStorage.getItem("aves-session-id");return u||(u=`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("aves-session-id",u)),u},[]),o=b.useCallback(async()=>{r(!0);const u=n();try{const g=await q.progress.get(u);if(g)t({...g,lastActivity:new Date(g.lastActivity),startedAt:new Date(g.startedAt)});else{const N={sessionId:u,termsDiscovered:[],exercisesCompleted:0,correctAnswers:0,totalAnswers:0,currentStreak:0,longestStreak:0,lastActivity:new Date,startedAt:new Date,vocabularyMastery:{}};t(N),await q.progress.save(N)}}catch(g){console.error("Error initializing progress:",g),t({sessionId:u,termsDiscovered:[],exercisesCompleted:0,correctAnswers:0,totalAnswers:0,currentStreak:0,longestStreak:0,lastActivity:new Date,startedAt:new Date,vocabularyMastery:{}})}finally{r(!1)}},[n]),a=b.useCallback(async u=>{if(e&&!e.termsDiscovered.includes(u)){const g={...e,termsDiscovered:[...e.termsDiscovered,u],lastActivity:new Date};t(g),await q.progress.save(g)}},[e]),d=b.useCallback(async u=>{if(!e)return;const g={...e,exercisesCompleted:e.exercisesCompleted+1,correctAnswers:u?e.correctAnswers+1:e.correctAnswers,totalAnswers:e.totalAnswers+1,currentStreak:u?e.currentStreak+1:0,longestStreak:u&&e.currentStreak+1>e.longestStreak?e.currentStreak+1:e.longestStreak,lastActivity:new Date};t(g),await q.progress.save(g)},[e]),f=b.useCallback(async(u,g)=>{if(!e)return;const N=e.vocabularyMastery[u]||0,p=Math.max(0,Math.min(100,N+(g?10:-5))),x={...e,vocabularyMastery:{...e.vocabularyMastery,[u]:p},lastActivity:new Date};t(x),await q.progress.save(x)},[e]),h=b.useCallback(()=>{if(!e)return{termsLearned:0,exercisesCompleted:0,accuracy:0,currentStreak:0,longestStreak:0,sessionDuration:0,masteredTerms:0};const u=e.totalAnswers>0?Math.round(e.correctAnswers/e.totalAnswers*100):0,g=Math.round((new Date().getTime()-new Date(e.startedAt).getTime())/1e3/60),N=Object.values(e.vocabularyMastery).filter(m=>m>=80).length;return{termsLearned:e.termsDiscovered.length,exercisesCompleted:e.exercisesCompleted,accuracy:u,currentStreak:e.currentStreak,longestStreak:e.longestStreak,sessionDuration:g,masteredTerms:N}},[e]),l=b.useCallback(async()=>{const g={sessionId:n(),termsDiscovered:[],exercisesCompleted:0,correctAnswers:0,totalAnswers:0,currentStreak:0,longestStreak:0,lastActivity:new Date,startedAt:new Date,vocabularyMastery:{}};t(g),await q.progress.save(g)},[n]);return b.useEffect(()=>{o()},[]),{progress:e,loading:s,recordTermDiscovery:a,recordExerciseCompletion:d,updateVocabularyMastery:f,getStats:h,resetProgress:l,sessionId:(e==null?void 0:e.sessionId)||n()}},wr=()=>{const{getStats:e,loading:t}=yr(),s=e();return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-green-50 to-yellow-50",children:[i.jsxs("div",{className:"relative overflow-hidden",children:[i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6",children:[i.jsx("span",{className:"block",children:"Learn Spanish Through"}),i.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-blue-600",children:"Bird Photography"})]}),i.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Discover Spanish vocabulary naturally through beautiful bird images. An immersive, visual approach to language learning."}),i.jsxs("div",{className:"flex gap-4 justify-center",children:[i.jsx(J,{to:"/learn",className:"px-8 py-4 bg-gradient-to-r from-green-600 to-blue-600 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:"Start Learning"}),i.jsx(J,{to:"/practice",className:"px-8 py-4 bg-white text-gray-800 font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:"Practice Exercises"})]})]})}),i.jsx("div",{className:"absolute top-20 left-10 text-4xl animate-bounce",children:""}),i.jsx("div",{className:"absolute top-40 right-20 text-3xl animate-pulse",children:""}),i.jsx("div",{className:"absolute bottom-20 left-1/4 text-4xl animate-bounce delay-150",children:""})]}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[i.jsx("h2",{className:"text-3xl font-bold text-center mb-8 text-gray-800",children:"Your Learning Progress"}),t?i.jsx("div",{className:"text-center text-gray-500",children:"Loading progress..."}):i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"text-3xl",children:""}),i.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.termsLearned})]}),i.jsx("h3",{className:"text-gray-600 font-medium",children:"Terms Discovered"}),i.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Spanish vocabulary learned"})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"text-3xl",children:""}),i.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.exercisesCompleted})]}),i.jsx("h3",{className:"text-gray-600 font-medium",children:"Exercises Done"}),i.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Practice sessions completed"})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"text-3xl",children:""}),i.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[s.accuracy,"%"]})]}),i.jsx("h3",{className:"text-gray-600 font-medium",children:"Accuracy"}),i.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Exercise success rate"})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"text-3xl",children:""}),i.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.currentStreak})]}),i.jsx("h3",{className:"text-gray-600 font-medium",children:"Current Streak"}),i.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Correct answers in a row"})]})]}),i.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Session Time"}),i.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:[s.sessionDuration," min"]})]}),i.jsx("div",{className:"text-4xl",children:""})]})}),i.jsx("div",{className:"bg-gradient-to-r from-green-100 to-blue-100 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Mastered Terms"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:s.masteredTerms})]}),i.jsx("div",{className:"text-4xl",children:""})]})}),i.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-xl p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Best Streak"}),i.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:s.longestStreak})]}),i.jsx("div",{className:"text-4xl",children:""})]})})]})]}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[i.jsx("h2",{className:"text-3xl font-bold text-center mb-12 text-gray-800",children:"How It Works"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"bg-gradient-to-br from-green-400 to-blue-500 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-white text-3xl",children:"1"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Explore Images"}),i.jsx("p",{className:"text-gray-600",children:"Click on bird photographs to discover Spanish vocabulary through interactive annotations"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"bg-gradient-to-br from-blue-400 to-purple-500 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-white text-3xl",children:"2"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Learn Progressively"}),i.jsx("p",{className:"text-gray-600",children:"Vocabulary reveals gradually from basic terms to etymology and contextual examples"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"bg-gradient-to-br from-purple-400 to-pink-500 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-white text-3xl",children:"3"}),i.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Practice & Master"}),i.jsx("p",{className:"text-gray-600",children:"Reinforce learning with interactive exercises and track your progress over time"})]})]})]}),i.jsx("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 py-16",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center px-4",children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to Start Learning?"}),i.jsx("p",{className:"text-xl text-green-100 mb-8",children:"Join thousands discovering Spanish through the beauty of birds"}),i.jsx(J,{to:"/learn",className:"inline-block px-8 py-4 bg-white text-green-600 font-bold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:"Begin Your Journey"})]})})]})},jr={anatomical:"#3B82F6",behavioral:"#10B981",color:"#F59E0B",pattern:"#8B5CF6"},Nr=({imageUrl:e,annotations:t,onAnnotationHover:s,onAnnotationClick:r,interactive:n=!0,showLabels:o=!1})=>{const a=b.useRef(null),d=b.useRef(null),[f,h]=b.useState({width:0,height:0}),[l,u]=b.useState(null),[g,N]=b.useState(!1),m=b.useCallback(()=>{const w=new Image;w.crossOrigin="anonymous",w.onload=()=>{h({width:w.width,height:w.height}),N(!0),d.current=w,p()},w.src=e},[e]);b.useEffect(()=>{m()},[m]);const p=b.useCallback(()=>{const w=a.current,j=w==null?void 0:w.getContext("2d"),R=d.current;!w||!j||!R||!g||(w.width=f.width,w.height=f.height,j.clearRect(0,0,w.width,w.height),j.drawImage(R,0,0),t.forEach(S=>{const{boundingBox:D,type:O}=S,te=jr[O],G=(l==null?void 0:l.id)===S.id;j.strokeStyle=te,j.lineWidth=G?3:2,j.setLineDash(G?[]:[5,5]);const z=D.topLeft.x,U=D.topLeft.y,F=D.width,oe=D.height;j.strokeRect(z,U,F,oe),(G||o)&&(j.fillStyle=te,j.globalAlpha=.9,j.fillRect(z,U-25,F,25),j.globalAlpha=1,j.fillStyle="white",j.font="14px system-ui, -apple-system, sans-serif",j.textBaseline="middle",j.fillText(S.spanishTerm,z+5,U-12)),j.setLineDash([])}))},[t,f,l,g,o]);b.useEffect(()=>{p()},[p]);const x=w=>{for(const j of t){const{boundingBox:R}=j,{topLeft:S,width:D,height:O}=R;if(w.x>=S.x&&w.x<=S.x+D&&w.y>=S.y&&w.y<=S.y+O)return j}return null},v=w=>{if(!n||!a.current)return;const j=a.current.getBoundingClientRect(),R=f.width/j.width,S=f.height/j.height,D={x:(w.clientX-j.left)*R,y:(w.clientY-j.top)*S},O=x(D);O!==l&&(u(O),s==null||s(O),a.current.style.cursor=O?"pointer":"default")},P=w=>{if(!n||!a.current)return;const j=a.current.getBoundingClientRect(),R=f.width/j.width,S=f.height/j.height,D={x:(w.clientX-j.left)*R,y:(w.clientY-j.top)*S},O=x(D);O&&(r==null||r(O))},C=()=>{u(null),s==null||s(null)};return i.jsxs("div",{className:"relative inline-block max-w-full",children:[i.jsx("canvas",{ref:a,className:"max-w-full h-auto",style:{width:f.width?"100%":"auto",maxWidth:f.width},onMouseMove:v,onClick:P,onMouseLeave:C}),!g&&i.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:i.jsx("div",{className:"text-gray-500",children:"Cargando imagen..."})})]})},Sr=[{id:"1",imageId:"sample-1",boundingBox:{topLeft:{x:150,y:100},bottomRight:{x:250,y:150},width:100,height:50},type:"anatomical",spanishTerm:"pico",englishTerm:"beak",pronunciation:"PEE-koh",difficultyLevel:1,isVisible:!0,createdAt:new Date,updatedAt:new Date},{id:"2",imageId:"sample-1",boundingBox:{topLeft:{x:200,y:150},bottomRight:{x:280,y:200},width:80,height:50},type:"color",spanishTerm:"plumas rojas",englishTerm:"red feathers",pronunciation:"PLOO-mahs ROH-hahs",difficultyLevel:2,isVisible:!0,createdAt:new Date,updatedAt:new Date}],vr=()=>{const[e]=b.useState(Sr),[t,s]=b.useState(null),[,r]=b.useState({x:0,y:0}),[n,o]=b.useState(!1),a=f=>{s(f),o(!0),r({x:300,y:200})},d=f=>{f&&!n&&console.log("Hovering:",f.spanishTerm)};return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-6",children:"Interactive Learning"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Click on highlighted areas to learn vocabulary"}),i.jsx(Nr,{imageUrl:"https://images.unsplash.com/photo-1444464666168-49d633b86797?w=800",annotations:e,onAnnotationHover:d,onAnnotationClick:a,interactive:!0,showLabels:!1})]})}),i.jsxs("div",{className:"lg:col-span-1",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Vocabulary"}),t?i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-bold text-gray-900",children:t.spanishTerm}),i.jsx("p",{className:"text-sm text-gray-500",children:t.pronunciation})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm text-gray-600",children:"English:"}),i.jsx("p",{className:"text-base font-medium",children:t.englishTerm})]})]}):i.jsx("p",{className:"text-gray-500",children:"Select an annotation to see details"})]}),i.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-4",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Progress"}),i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Terms Discovered"}),i.jsx("span",{children:"2/10"})]}),i.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:i.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:"20%"}})})]})})]})]})]})]})})},Er=({exercise:e,onAnswer:t,disabled:s=!1})=>{const[r,n]=b.useState(null),[o,a]=b.useState(!1),d=h=>{s||o||(n(h),a(!0),t(h))},f=h=>o?h===e.correctOptionId?"ring-2 ring-green-500 bg-green-50":r===h&&h!==e.correctOptionId?"ring-2 ring-red-500 bg-red-50":"opacity-50":r===h?"ring-2 ring-blue-500":"hover:ring-2 hover:ring-gray-300";return i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:e.instructions}),i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.targetTerm})]}),i.jsx("div",{className:"grid grid-cols-2 gap-4",children:e.options.map((h,l)=>i.jsxs("button",{onClick:()=>d(h.id),disabled:s||o,className:`
              relative p-4 rounded-lg border-2 transition-all
              ${f(h.id)}
              ${!o&&!s?"cursor-pointer":"cursor-default"}
            `,children:[i.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg mb-2 flex items-center justify-center",children:i.jsx("span",{className:"text-4xl",children:""})}),i.jsx("div",{className:"absolute top-2 left-2 bg-white rounded-full px-2 py-1 text-sm font-semibold",children:String.fromCharCode(65+l)}),o&&h.id===e.correctOptionId&&i.jsx("div",{className:"absolute top-2 right-2 text-green-500",children:""}),o&&r===h.id&&h.id!==e.correctOptionId&&i.jsx("div",{className:"absolute top-2 right-2 text-red-500",children:""})]},h.id))})]})},Cr=({exercise:e,onAnswer:t,disabled:s=!1})=>{const[r,n]=b.useState(null),[o,a]=b.useState(!1),d=l=>{s||o||(n(l),a(!0),t(l))},f=l=>o?l===e.correctAnswer?"bg-green-500 text-white":r===l&&l!==e.correctAnswer?"bg-red-500 text-white":"bg-gray-100 text-gray-400 border border-gray-200":r===l?"bg-blue-500 text-white":"bg-white hover:bg-gray-50 text-gray-900 border border-gray-300",h=()=>{const l=e.sentence.split("___");return i.jsxs("p",{className:"text-xl leading-relaxed",children:[l[0],i.jsx("span",{className:"inline-block min-w-[100px] mx-2 pb-1 border-b-2 border-gray-400 text-center font-bold text-blue-600",children:o?i.jsx("span",{className:r===e.correctAnswer?"text-green-600":"text-red-600",children:r||"___"}):"___"}),l[1]]})};return i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"text-center",children:i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:e.instructions})}),i.jsx("div",{className:"bg-gray-50 p-6 rounded-lg",children:h()}),i.jsx("div",{className:"grid grid-cols-2 gap-3",children:e.options.map((l,u)=>i.jsxs("button",{onClick:()=>d(l),disabled:s||o,className:`
              px-4 py-3 rounded-lg font-medium transition-all
              ${f(l)}
              ${!o&&!s?"cursor-pointer":"cursor-default"}
            `,children:[i.jsxs("span",{className:"mr-2",children:[String.fromCharCode(65+u),"."]}),l,o&&l===e.correctAnswer&&i.jsx("span",{className:"ml-2",children:""}),o&&r===l&&l!==e.correctAnswer&&i.jsx("span",{className:"ml-2",children:""})]},l))}),o&&i.jsx("div",{className:`p-4 rounded-lg ${r===e.correctAnswer?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r===e.correctAnswer?i.jsx("p",{className:"font-semibold",children:"Correcto!"}):i.jsxs("p",{children:[i.jsx("span",{className:"font-semibold",children:"Incorrect."})," The answer was: ",i.jsx("strong",{children:e.correctAnswer})]})})]})};class Ce{constructor(t){V(this,"annotations",[]);this.annotations=t}generateExercise(t){switch(t){case"visual_discrimination":return this.generateVisualDiscrimination();case"term_matching":return this.generateTermMatching();case"contextual_fill":return this.generateContextualFill();default:return null}}generateVisualDiscrimination(){if(this.annotations.length<4)return null;const t=[...this.annotations].sort(()=>Math.random()-.5),s=t[0],r=t.slice(1,4),n=[s,...r].sort(()=>Math.random()-.5).map(o=>({id:o.id,imageUrl:`/images/birds/${o.imageId}.jpg`,species:o.spanishTerm}));return{id:`vd_${Date.now()}`,type:"visual_discrimination",instructions:`Cul imagen muestra: "${s.spanishTerm}"?`,targetTerm:s.spanishTerm,options:n,correctOptionId:s.id,annotation:s}}generateTermMatching(){if(this.annotations.length<4)return null;const t=[...this.annotations].sort(()=>Math.random()-.5).slice(0,4),s=t.map(o=>o.spanishTerm),r=[...t.map(o=>o.englishTerm)].sort(()=>Math.random()-.5),n=t.map(o=>({spanish:o.spanishTerm,english:o.englishTerm}));return{id:`tm_${Date.now()}`,type:"term_matching",instructions:"Match the Spanish terms with their English translations",spanishTerms:s,englishTerms:r,correctPairs:n}}generateContextualFill(){if(this.annotations.length<4)return null;const t=this.annotations[Math.floor(Math.random()*this.annotations.length)],s=this.annotations.filter(a=>a.id!==t.id&&a.type===t.type).slice(0,3).map(a=>a.spanishTerm),r=["El ___ del pjaro es de color rojo brillante.","Observ un ___ volando sobre el lago.","El ___ es una caracterstica distintiva de esta especie.","Los cientficos estudian el ___ para identificar la especie."],n=r[Math.floor(Math.random()*r.length)],o=[t.spanishTerm,...s].sort(()=>Math.random()-.5);return{id:`cf_${Date.now()}`,type:"contextual_fill",instructions:"Complete the sentence with the correct word",sentence:n,correctAnswer:t.spanishTerm,options:o,annotation:t}}static checkAnswer(t,s){switch(t.type){case"visual_discrimination":return s===t.correctOptionId;case"term_matching":const r=s;return t.correctPairs.every(n=>r.some(o=>o.spanish===n.spanish&&o.english===n.english));case"contextual_fill":return s===t.correctAnswer;default:return!1}}static generateFeedback(t,s){if(t){const r=["Excelente!","Muy bien!","Correcto!","Perfecto!"];return r[Math.floor(Math.random()*r.length)]}else switch(s.type){case"visual_discrimination":return`The correct answer was: ${s.targetTerm}`;case"contextual_fill":return`The correct answer was: ${s.correctAnswer}`;default:return"Incorrect. Try again!"}}}const Ar=({annotations:e})=>{const[t,s]=b.useState(null),[r]=b.useState(()=>new Ce(e)),[n,o]=b.useState({sessionId:`session_${Date.now()}`,exercisesCompleted:0,correctAnswers:0,currentStreak:0,startedAt:new Date}),[a,d]=b.useState(!1),[f,h]=b.useState(null);b.useEffect(()=>{l()},[]);const l=()=>{const m=["visual_discrimination","contextual_fill"],p=m[Math.floor(Math.random()*m.length)],x=r.generateExercise(p);x&&(s(x),d(!1),h(null))},u=m=>{if(!t)return;const p=Ce.checkAnswer(t,m),x=Ce.generateFeedback(p,t),v={...n,exercisesCompleted:n.exercisesCompleted+1,correctAnswers:n.correctAnswers+(p?1:0),currentStreak:p?n.currentStreak+1:0};o(v),h({correct:p,feedback:x}),d(!0),setTimeout(()=>{l()},2500)},g=()=>{if(!t)return null;switch(t.type){case"visual_discrimination":return i.jsx(Er,{exercise:t,onAnswer:u,disabled:a});case"contextual_fill":return i.jsx(Cr,{exercise:t,onAnswer:u,disabled:a});default:return null}},N=n.exercisesCompleted>0?Math.round(n.correctAnswers/n.exercisesCompleted*100):0;return i.jsxs("div",{className:"max-w-3xl mx-auto p-6",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-2",children:[i.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Practice Session"}),i.jsx("button",{onClick:()=>l(),className:"text-sm text-blue-600 hover:text-blue-800",children:"Skip "})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.exercisesCompleted}),i.jsx("p",{className:"text-sm text-gray-500",children:"Completed"})]}),i.jsxs("div",{children:[i.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[N,"%"]}),i.jsx("p",{className:"text-sm text-gray-500",children:"Accuracy"})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n.currentStreak}),i.jsx("p",{className:"text-sm text-gray-500",children:"Streak"})]})]})]}),i.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:g()}),a&&f&&i.jsxs("div",{className:`mt-4 p-4 rounded-lg text-center transition-all ${f.correct?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:[i.jsx("p",{className:"text-lg font-bold",children:f.feedback}),i.jsx("p",{className:"text-sm mt-1",children:"Next exercise loading..."})]})]})},Rr=[{id:"1",imageId:"img1",boundingBox:{topLeft:{x:0,y:0},bottomRight:{x:100,y:100},width:100,height:100},type:"anatomical",spanishTerm:"pico",englishTerm:"beak",difficultyLevel:1,isVisible:!0,createdAt:new Date,updatedAt:new Date},{id:"2",imageId:"img2",boundingBox:{topLeft:{x:0,y:0},bottomRight:{x:100,y:100},width:100,height:100},type:"anatomical",spanishTerm:"ala",englishTerm:"wing",difficultyLevel:1,isVisible:!0,createdAt:new Date,updatedAt:new Date},{id:"3",imageId:"img3",boundingBox:{topLeft:{x:0,y:0},bottomRight:{x:100,y:100},width:100,height:100},type:"color",spanishTerm:"plumas",englishTerm:"feathers",difficultyLevel:1,isVisible:!0,createdAt:new Date,updatedAt:new Date},{id:"4",imageId:"img4",boundingBox:{topLeft:{x:0,y:0},bottomRight:{x:100,y:100},width:100,height:100},type:"anatomical",spanishTerm:"cola",englishTerm:"tail",difficultyLevel:1,isVisible:!0,createdAt:new Date,updatedAt:new Date}],Or=()=>i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Practice Exercises"}),i.jsx("p",{className:"text-gray-600 mb-8",children:"Test your Spanish bird vocabulary knowledge"}),i.jsx(Ar,{annotations:Rr,onComplete:e=>{console.log("Session complete:",e)}})]})}),Tr=({species:e,onClick:t,viewMode:s="grid"})=>{const r=o=>{switch(o){case"LC":return"bg-green-100 text-green-800";case"NT":return"bg-yellow-100 text-yellow-800";case"VU":return"bg-orange-100 text-orange-800";case"EN":return"bg-red-100 text-red-800";case"CR":return"bg-red-200 text-red-900";default:return"bg-gray-100 text-gray-800"}},n=o=>{switch(o){case"small":return"";case"medium":return"";case"large":return"";default:return""}};return s==="list"?i.jsxs("div",{onClick:()=>t==null?void 0:t(e),className:"flex items-center gap-4 p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer border border-gray-200",children:[i.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center text-2xl",children:n(e.sizeCategory)}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:e.spanishName}),i.jsx("p",{className:"text-sm text-gray-600",children:e.englishName}),i.jsx("p",{className:"text-xs text-gray-500 italic",children:e.scientificName})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-xs text-gray-500",children:e.familyName}),e.conservationStatus&&i.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${r(e.conservationStatus)}`,children:e.conservationStatus})]}),i.jsx("div",{className:"flex gap-1",children:e.habitats.slice(0,2).map(o=>i.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded",children:o},o))})]}):i.jsxs("div",{onClick:()=>t==null?void 0:t(e),className:"bg-white rounded-lg shadow-md hover:shadow-xl transition-all cursor-pointer overflow-hidden group",children:[i.jsxs("div",{className:"aspect-square bg-gradient-to-br from-gray-200 to-gray-300 relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-6xl opacity-50",children:n(e.sizeCategory)}),e.primaryImageUrl&&i.jsx("img",{src:e.primaryImageUrl,alt:e.spanishName,className:"w-full h-full object-cover",loading:"lazy"}),e.conservationStatus&&i.jsx("span",{className:`absolute top-2 right-2 text-xs px-2 py-1 rounded-full ${r(e.conservationStatus)}`,children:e.conservationStatus})]}),i.jsxs("div",{className:"p-4",children:[i.jsx("h3",{className:"font-bold text-gray-900 text-lg group-hover:text-blue-600 transition-colors",children:e.spanishName}),i.jsx("p",{className:"text-sm text-gray-600",children:e.englishName}),i.jsx("p",{className:"text-xs text-gray-500 italic mt-1",children:e.scientificName}),i.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[i.jsx("div",{className:"flex gap-1",children:e.primaryColors.slice(0,3).map(o=>i.jsx("span",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:o},title:o},o))}),i.jsx("span",{className:"text-xs text-gray-500",children:e.familyName})]}),i.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.habitats.slice(0,2).map(o=>i.jsx("span",{className:"text-xs bg-green-50 text-green-700 px-2 py-1 rounded",children:o},o))}),e.annotationCount!==void 0&&i.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:i.jsxs("p",{className:"text-xs text-gray-500",children:[e.annotationCount," annotations available"]})})]})]})},Pr=({filters:e,onFilterChange:t,availableFilters:s})=>{const r=(a,d)=>{t({...e,[a]:d||void 0})},n=()=>{t({})},o=Object.values(e).filter(a=>a).length;return i.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("h3",{className:"font-semibold text-gray-900",children:"Filters"}),o>0&&i.jsxs("button",{onClick:n,className:"text-sm text-blue-600 hover:text-blue-800",children:["Clear all (",o,")"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),i.jsx("input",{type:"text",value:e.searchTerm||"",onChange:a=>r("searchTerm",a.target.value),placeholder:"Spanish or English name...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order"}),i.jsxs("select",{value:e.orderName||"",onChange:a=>r("orderName",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"All Orders"}),s.orders.map(a=>i.jsx("option",{value:a,children:a},a))]})]}),e.orderName&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Family"}),i.jsxs("select",{value:e.familyName||"",onChange:a=>r("familyName",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"All Families"}),s.families.map(a=>i.jsx("option",{value:a,children:a},a))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size"}),i.jsx("div",{className:"flex gap-2",children:["small","medium","large"].map(a=>i.jsx("button",{onClick:()=>r("sizeCategory",e.sizeCategory===a?null:a),className:`flex-1 px-3 py-2 rounded-md border text-sm capitalize transition-colors ${e.sizeCategory===a?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:a},a))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Habitat"}),i.jsxs("select",{value:e.habitat||"",onChange:a=>r("habitat",a.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[i.jsx("option",{value:"",children:"All Habitats"}),s.habitats.map(a=>i.jsx("option",{value:a,children:a},a))]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Color"}),i.jsx("div",{className:"grid grid-cols-4 gap-2",children:s.colors.map(a=>i.jsx("button",{onClick:()=>r("primaryColor",e.primaryColor===a?null:a),className:`w-full h-8 rounded border-2 transition-all ${e.primaryColor===a?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:a},title:a},a))})]})]})},Dr=()=>{const[e,t]=b.useState([]),[s,r]=b.useState(!1),[n,o]=b.useState(null),a=b.useCallback(async l=>{r(!0),o(null);try{const u=await q.species.list(l);return t(u),u}catch(u){return o("Failed to load species"),console.error("Error fetching species:",u),t([]),[]}finally{r(!1)}},[]),d=b.useCallback(async l=>{try{return await q.species.get(l)}catch(u){return console.error("Error fetching species details:",u),null}},[]),f=b.useCallback(async l=>{try{const u=l.toLowerCase();return e.filter(N=>{var m,p,x;return((m=N.spanishName)==null?void 0:m.toLowerCase().includes(u))||((p=N.englishName)==null?void 0:p.toLowerCase().includes(u))||((x=N.scientificName)==null?void 0:x.toLowerCase().includes(u))})}catch(u){return console.error("Error searching species:",u),[]}},[e]),h=b.useCallback(()=>{const l={totalSpecies:e.length,byOrder:{},byHabitat:{},bySize:{}};return e.forEach(u=>{var g;u.orderName&&(l.byOrder[u.orderName]=(l.byOrder[u.orderName]||0)+1),(g=u.habitats)==null||g.forEach(N=>{l.byHabitat[N]=(l.byHabitat[N]||0)+1}),u.sizeCategory&&(l.bySize[u.sizeCategory]=(l.bySize[u.sizeCategory]||0)+1)}),l},[e]);return b.useEffect(()=>{q.utils.getMode()==="client"&&e.length===0&&a()},[]),{species:e,loading:s,error:n,fetchSpecies:a,fetchSpeciesById:d,searchSpecies:f,getSpeciesStats:h}},kr=()=>{const{species:e,loading:t,error:s,fetchSpecies:r}=Dr(),[n,o]=b.useState({}),[a,d]=b.useState("grid");b.useEffect(()=>{r()},[]);const f=b.useMemo(()=>{let u=[...e];if(n.searchTerm){const g=n.searchTerm.toLowerCase();u=u.filter(N=>N.spanishName.toLowerCase().includes(g)||N.englishName.toLowerCase().includes(g)||N.scientificName.toLowerCase().includes(g))}return n.orderName&&(u=u.filter(g=>g.orderName===n.orderName)),n.familyName&&(u=u.filter(g=>g.familyName===n.familyName)),n.sizeCategory&&(u=u.filter(g=>g.sizeCategory===n.sizeCategory)),n.habitat&&(u=u.filter(g=>g.habitats.includes(n.habitat))),n.primaryColor&&(u=u.filter(g=>g.primaryColors.includes(n.primaryColor))),u},[e,n]),h=b.useMemo(()=>{const u=[...new Set(e.map(p=>p.orderName))].sort(),g=n.orderName?[...new Set(e.filter(p=>p.orderName===n.orderName).map(p=>p.familyName))].sort():[...new Set(e.map(p=>p.familyName))].sort(),N=[...new Set(e.flatMap(p=>p.habitats))].sort(),m=[...new Set(e.flatMap(p=>p.primaryColors))].sort();return{orders:u,families:g,habitats:N,colors:m}},[e,n.orderName]),l=u=>{console.log("Selected species:",u)};return t?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"text-gray-500",children:"Loading species..."})}):s?i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-red-500",children:["Error loading species: ",s]})}):i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Species Browser"}),i.jsxs("p",{className:"text-gray-600",children:["Explore ",e.length," bird species with Spanish vocabulary"]})]}),i.jsxs("div",{className:"flex gap-6",children:[i.jsx("div",{className:"w-64 flex-shrink-0",children:i.jsx(Pr,{filters:n,onFilterChange:o,availableFilters:h})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4 flex items-center justify-between",children:[i.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",f.length," of ",e.length," species"]}),i.jsx("div",{className:"flex items-center gap-4",children:i.jsxs("div",{className:"flex gap-1",children:[i.jsx("button",{onClick:()=>d("grid"),className:`p-2 rounded ${a==="grid"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,"aria-label":"Grid view",children:i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM13 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2h-2z"})})}),i.jsx("button",{onClick:()=>d("list"),className:`p-2 rounded ${a==="list"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,"aria-label":"List view",children:i.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:i.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})})]})})]}),f.length===0?i.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[i.jsx("p",{className:"text-gray-500",children:"No species found matching your filters."}),i.jsx("button",{onClick:()=>o({}),className:"mt-4 text-blue-600 hover:text-blue-800",children:"Clear filters"})]}):i.jsx("div",{className:a==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-4",children:f.map(u=>i.jsx(Tr,{species:u,onClick:l,viewMode:a},u.id))})]})]})]})},Lr=()=>i.jsx(kr,{});function Ir(){return i.jsx(kt,{children:i.jsxs("div",{className:"min-h-screen",children:[i.jsx("nav",{className:"bg-white shadow-sm border-b",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:i.jsx("div",{className:"flex justify-between h-16",children:i.jsxs("div",{className:"flex",children:[i.jsxs(J,{to:"/",className:"flex items-center px-2 py-2 text-gray-900 hover:text-gray-700",children:[i.jsx("span",{className:"text-2xl mr-2",children:""}),i.jsx("span",{className:"font-bold text-xl",children:"Aves"})]}),i.jsxs("div",{className:"ml-6 flex space-x-4",children:[i.jsx(J,{to:"/learn",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:"Learn"}),i.jsx(J,{to:"/practice",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:"Practice"}),i.jsx(J,{to:"/species",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:"Species"})]})]})})})}),i.jsxs(Lt,{children:[i.jsx(le,{path:"/",element:i.jsx(wr,{})}),i.jsx(le,{path:"/learn",element:i.jsx(vr,{})}),i.jsx(le,{path:"/practice",element:i.jsx(Or,{})}),i.jsx(le,{path:"/species",element:i.jsx(Lr,{})})]})]})})}Ae.createRoot(document.getElementById("root")).render(i.jsx(It.StrictMode,{children:i.jsx(Ir,{})}));
