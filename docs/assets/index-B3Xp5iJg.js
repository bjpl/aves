var Pt=Object.defineProperty;var Lt=(e,t,s)=>t in e?Pt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var z=(e,t,s)=>Lt(e,typeof t!="symbol"?t+"":t,s);import{r as w,a as Dt,L as F,B as It,R as _t,b as ie,c as Ft}from"./react-vendor-BPIYoGmp.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();var nt={exports:{}},fe={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ut=w,Bt=Symbol.for("react.element"),Mt=Symbol.for("react.fragment"),Ht=Object.prototype.hasOwnProperty,qt=Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zt={key:!0,ref:!0,__self:!0,__source:!0};function at(e,t,s){var r,n={},i=null,o=null;s!==void 0&&(i=""+s),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Ht.call(t,r)&&!zt.hasOwnProperty(r)&&(n[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)n[r]===void 0&&(n[r]=t[r]);return{$$typeof:Bt,type:e,key:i,ref:o,props:n,_owner:qt.current}}fe.Fragment=Mt;fe.jsx=at;fe.jsxs=at;nt.exports=fe;var a=nt.exports,Ce={},He=Dt;Ce.createRoot=He.createRoot,Ce.hydrateRoot=He.hydrateRoot;class $t{constructor(){z(this,"dbName","aves-learning-db");z(this,"dbVersion",1);z(this,"db",null);z(this,"staticData",{annotations:[],species:[],exercises:[]})}async initialize(){await this.loadStaticData(),await this.initIndexedDB(),this.migrateLocalStorage()}async loadStaticData(){try{const t="/",s=await fetch(`${t}data/annotations.json`);this.staticData.annotations=await s.json();const r=await fetch(`${t}data/species.json`);this.staticData.species=await r.json();try{const n=await fetch(`${t}data/exercises.json`);this.staticData.exercises=await n.json()}catch{this.staticData.exercises=[]}}catch(t){console.error("Failed to load static data:",t),this.loadEmbeddedData()}}loadEmbeddedData(){this.staticData.annotations=[{id:"1",imageId:"cardinal-1",boundingBox:{topLeft:{x:150,y:100},bottomRight:{x:250,y:150},width:100,height:50},type:"anatomical",spanishTerm:"pico",englishTerm:"beak",pronunciation:"PEE-koh",difficultyLevel:1,isVisible:!0,createdAt:new Date,updatedAt:new Date},{id:"2",imageId:"cardinal-1",boundingBox:{topLeft:{x:200,y:150},bottomRight:{x:280,y:200},width:80,height:50},type:"color",spanishTerm:"plumas rojas",englishTerm:"red feathers",pronunciation:"PLOO-mahs ROH-hahs",difficultyLevel:2,isVisible:!0,createdAt:new Date,updatedAt:new Date}],this.staticData.species=[{id:"1",scientificName:"Cardinalis cardinalis",englishName:"Northern Cardinal",spanishName:"Cardenal Rojo",orderName:"Passeriformes",familyName:"Cardinalidae",genus:"Cardinalis",habitats:["forest","urban"],sizeCategory:"medium",primaryColors:["red","black"],conservationStatus:"LC",primaryImageUrl:"https://images.unsplash.com/photo-1551031895-7f8e06d714f8?w=400",descriptionSpanish:"Ave distintiva de color rojo brillante con cresta prominente.",descriptionEnglish:"Distinctive bright red bird with prominent crest.",funFact:"Cardinals are one of the few bird species where both males and females sing.",annotationCount:2}]}async initIndexedDB(){return new Promise((t,s)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>{console.error("Failed to open IndexedDB"),s(r.error)},r.onsuccess=()=>{this.db=r.result,t()},r.onupgradeneeded=n=>{const i=n.target.result;if(!i.objectStoreNames.contains("interactions")){const o=i.createObjectStore("interactions",{keyPath:"id",autoIncrement:!0});o.createIndex("annotationId","annotationId",{unique:!1}),o.createIndex("timestamp","timestamp",{unique:!1})}if(i.objectStoreNames.contains("progress")||i.createObjectStore("progress",{keyPath:"sessionId"}).createIndex("lastUpdated","lastUpdated",{unique:!1}),!i.objectStoreNames.contains("exerciseResults")){const o=i.createObjectStore("exerciseResults",{keyPath:"id",autoIncrement:!0});o.createIndex("exerciseId","exerciseId",{unique:!1}),o.createIndex("completedAt","completedAt",{unique:!1})}}})}migrateLocalStorage(){const t=localStorage.getItem("aves-progress");if(t)try{const s=JSON.parse(t);this.saveProgress(s),localStorage.removeItem("aves-progress")}catch(s){console.error("Failed to migrate localStorage:",s)}}async getAnnotations(t){return t?this.staticData.annotations.filter(s=>s.imageId===t):this.staticData.annotations}async getSpecies(t){let s=[...this.staticData.species];return t&&(t.habitat&&(s=s.filter(r=>r.habitats.includes(t.habitat))),t.sizeCategory&&(s=s.filter(r=>r.sizeCategory===t.sizeCategory)),t.primaryColor&&(s=s.filter(r=>r.primaryColors.includes(t.primaryColor)))),s}async getExercises(t){return t?this.staticData.exercises.filter(s=>s.type===t):this.staticData.exercises}async saveInteraction(t){if(!this.db)throw new Error("Database not initialized");const r=this.db.transaction(["interactions"],"readwrite").objectStore("interactions");await new Promise((n,i)=>{const o=r.add({...t,timestamp:new Date});o.onsuccess=()=>n(o.result),o.onerror=()=>i(o.error)})}async getInteractions(t){if(!this.db)throw new Error("Database not initialized");const r=this.db.transaction(["interactions"],"readonly").objectStore("interactions");return new Promise((n,i)=>{const o=r.getAll();o.onsuccess=()=>{const d=o.result.filter(f=>f.userSessionId===t);n(d)},o.onerror=()=>i(o.error)})}async saveProgress(t){if(!this.db){localStorage.setItem("aves-progress-backup",JSON.stringify(t));return}const r=this.db.transaction(["progress"],"readwrite").objectStore("progress");await new Promise((n,i)=>{const o=r.put({...t,lastUpdated:new Date});o.onsuccess=()=>n(o.result),o.onerror=()=>i(o.error)})}async getProgress(t){if(!this.db){const n=localStorage.getItem("aves-progress-backup");return n?JSON.parse(n):null}const r=this.db.transaction(["progress"],"readonly").objectStore("progress");return new Promise((n,i)=>{const o=r.get(t);o.onsuccess=()=>n(o.result),o.onerror=()=>i(o.error)})}async saveExerciseResult(t){if(!this.db)throw new Error("Database not initialized");const r=this.db.transaction(["exerciseResults"],"readwrite").objectStore("exerciseResults");await new Promise((n,i)=>{const o=r.add({...t,completedAt:new Date});o.onsuccess=()=>n(o.result),o.onerror=()=>i(o.error)})}async getExerciseResults(t){if(!this.db)throw new Error("Database not initialized");const r=this.db.transaction(["exerciseResults"],"readonly").objectStore("exerciseResults");return new Promise((n,i)=>{const o=r.getAll();o.onsuccess=()=>{const d=o.result.filter(f=>f.sessionId===t);n(d)},o.onerror=()=>i(o.error)})}async exportData(){const t={interactions:await this.getInteractions(this.getCurrentSessionId()),progress:await this.getProgress(this.getCurrentSessionId()),exerciseResults:await this.getExerciseResults(this.getCurrentSessionId()),exportedAt:new Date().toISOString()};return JSON.stringify(t,null,2)}async importData(t){try{const s=JSON.parse(t);if(s.interactions)for(const r of s.interactions)await this.saveInteraction(r);if(s.progress&&await this.saveProgress(s.progress),s.exerciseResults)for(const r of s.exerciseResults)await this.saveExerciseResult(r)}catch(s){throw console.error("Failed to import data:",s),new Error("Invalid import data format")}}getCurrentSessionId(){let t=sessionStorage.getItem("aves-session-id");return t||(t=`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("aves-session-id",t)),t}async clearAllData(){if(this.db){const t=this.db.transaction(["interactions","progress","exerciseResults"],"readwrite");await Promise.all([this.clearObjectStore(t,"interactions"),this.clearObjectStore(t,"progress"),this.clearObjectStore(t,"exerciseResults")])}localStorage.clear(),sessionStorage.clear()}clearObjectStore(t,s){return new Promise((r,n)=>{const o=t.objectStore(s).clear();o.onsuccess=()=>r(),o.onerror=()=>n(o.error)})}}const A=new $t;A.initialize().catch(console.error);function ot(e,t){return function(){return e.apply(t,arguments)}}const{toString:Vt}=Object.prototype,{getPrototypeOf:Pe}=Object,{iterator:pe,toStringTag:it}=Symbol,xe=(e=>t=>{const s=Vt.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),D=e=>(e=e.toLowerCase(),t=>xe(t)===e),ge=e=>t=>typeof t===e,{isArray:X}=Array,G=ge("undefined");function ee(e){return e!==null&&!G(e)&&e.constructor!==null&&!G(e.constructor)&&P(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const lt=D("ArrayBuffer");function Jt(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&lt(e.buffer),t}const Wt=ge("string"),P=ge("function"),ct=ge("number"),te=e=>e!==null&&typeof e=="object",Kt=e=>e===!0||e===!1,de=e=>{if(xe(e)!=="object")return!1;const t=Pe(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(it in e)&&!(pe in e)},Gt=e=>{if(!te(e)||ee(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},Xt=D("Date"),Yt=D("File"),Qt=D("Blob"),Zt=D("FileList"),es=e=>te(e)&&P(e.pipe),ts=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||P(e.append)&&((t=xe(e))==="formdata"||t==="object"&&P(e.toString)&&e.toString()==="[object FormData]"))},ss=D("URLSearchParams"),[rs,ns,as,os]=["ReadableStream","Request","Response","Headers"].map(D),is=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function se(e,t,{allOwnKeys:s=!1}={}){if(e===null||typeof e>"u")return;let r,n;if(typeof e!="object"&&(e=[e]),X(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{if(ee(e))return;const i=s?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let d;for(r=0;r<o;r++)d=i[r],t.call(null,e[d],d,e)}}function dt(e,t){if(ee(e))return null;t=t.toLowerCase();const s=Object.keys(e);let r=s.length,n;for(;r-- >0;)if(n=s[r],t===n.toLowerCase())return n;return null}const V=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,ut=e=>!G(e)&&e!==V;function Ae(){const{caseless:e,skipUndefined:t}=ut(this)&&this||{},s={},r=(n,i)=>{const o=e&&dt(s,i)||i;de(s[o])&&de(n)?s[o]=Ae(s[o],n):de(n)?s[o]=Ae({},n):X(n)?s[o]=n.slice():(!t||!G(n))&&(s[o]=n)};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&se(arguments[n],r);return s}const ls=(e,t,s,{allOwnKeys:r}={})=>(se(t,(n,i)=>{s&&P(n)?e[i]=ot(n,s):e[i]=n},{allOwnKeys:r}),e),cs=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),ds=(e,t,s,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},us=(e,t,s,r)=>{let n,i,o;const d={};if(t=t||{},e==null)return t;do{for(n=Object.getOwnPropertyNames(e),i=n.length;i-- >0;)o=n[i],(!r||r(o,e,t))&&!d[o]&&(t[o]=e[o],d[o]=!0);e=s!==!1&&Pe(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},hs=(e,t,s)=>{e=String(e),(s===void 0||s>e.length)&&(s=e.length),s-=t.length;const r=e.indexOf(t,s);return r!==-1&&r===s},ms=e=>{if(!e)return null;if(X(e))return e;let t=e.length;if(!ct(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},fs=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Pe(Uint8Array)),ps=(e,t)=>{const r=(e&&e[pe]).call(e);let n;for(;(n=r.next())&&!n.done;){const i=n.value;t.call(e,i[0],i[1])}},xs=(e,t)=>{let s;const r=[];for(;(s=e.exec(t))!==null;)r.push(s);return r},gs=D("HTMLFormElement"),bs=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,r,n){return r.toUpperCase()+n}),qe=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),ys=D("RegExp"),ht=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),r={};se(s,(n,i)=>{let o;(o=t(n,i,e))!==!1&&(r[i]=o||n)}),Object.defineProperties(e,r)},ws=e=>{ht(e,(t,s)=>{if(P(e)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const r=e[s];if(P(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},Ns=(e,t)=>{const s={},r=n=>{n.forEach(i=>{s[i]=!0})};return X(e)?r(e):r(String(e).split(t)),s},js=()=>{},Ss=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function vs(e){return!!(e&&P(e.append)&&e[it]==="FormData"&&e[pe])}const Es=e=>{const t=new Array(10),s=(r,n)=>{if(te(r)){if(t.indexOf(r)>=0)return;if(ee(r))return r;if(!("toJSON"in r)){t[n]=r;const i=X(r)?[]:{};return se(r,(o,d)=>{const f=s(o,n+1);!G(f)&&(i[d]=f)}),t[n]=void 0,i}}return r};return s(e,0)},Cs=D("AsyncFunction"),As=e=>e&&(te(e)||P(e))&&P(e.then)&&P(e.catch),mt=((e,t)=>e?setImmediate:t?((s,r)=>(V.addEventListener("message",({source:n,data:i})=>{n===V&&i===s&&r.length&&r.shift()()},!1),n=>{r.push(n),V.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",P(V.postMessage)),Rs=typeof queueMicrotask<"u"?queueMicrotask.bind(V):typeof process<"u"&&process.nextTick||mt,Os=e=>e!=null&&P(e[pe]),l={isArray:X,isArrayBuffer:lt,isBuffer:ee,isFormData:ts,isArrayBufferView:Jt,isString:Wt,isNumber:ct,isBoolean:Kt,isObject:te,isPlainObject:de,isEmptyObject:Gt,isReadableStream:rs,isRequest:ns,isResponse:as,isHeaders:os,isUndefined:G,isDate:Xt,isFile:Yt,isBlob:Qt,isRegExp:ys,isFunction:P,isStream:es,isURLSearchParams:ss,isTypedArray:fs,isFileList:Zt,forEach:se,merge:Ae,extend:ls,trim:is,stripBOM:cs,inherits:ds,toFlatObject:us,kindOf:xe,kindOfTest:D,endsWith:hs,toArray:ms,forEachEntry:ps,matchAll:xs,isHTMLForm:gs,hasOwnProperty:qe,hasOwnProp:qe,reduceDescriptors:ht,freezeMethods:ws,toObjectSet:Ns,toCamelCase:bs,noop:js,toFiniteNumber:Ss,findKey:dt,global:V,isContextDefined:ut,isSpecCompliantForm:vs,toJSONObject:Es,isAsyncFn:Cs,isThenable:As,setImmediate:mt,asap:Rs,isIterable:Os};function b(e,t,s,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}l.inherits(b,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:l.toJSONObject(this.config),code:this.code,status:this.status}}});const ft=b.prototype,pt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{pt[e]={value:e}});Object.defineProperties(b,pt);Object.defineProperty(ft,"isAxiosError",{value:!0});b.from=(e,t,s,r,n,i)=>{const o=Object.create(ft);l.toFlatObject(e,o,function(c){return c!==Error.prototype},m=>m!=="isAxiosError");const d=e&&e.message?e.message:"Error",f=t==null&&e?e.code:t;return b.call(o,d,f,s,r,n),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const Ts=null;function Re(e){return l.isPlainObject(e)||l.isArray(e)}function xt(e){return l.endsWith(e,"[]")?e.slice(0,-2):e}function ze(e,t,s){return e?e.concat(t).map(function(n,i){return n=xt(n),!s&&i?"["+n+"]":n}).join(s?".":""):t}function ks(e){return l.isArray(e)&&!e.some(Re)}const Ps=l.toFlatObject(l,{},null,function(t){return/^is[A-Z]/.test(t)});function be(e,t,s){if(!l.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,s=l.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,x){return!l.isUndefined(x[g])});const r=s.metaTokens,n=s.visitor||c,i=s.dots,o=s.indexes,f=(s.Blob||typeof Blob<"u"&&Blob)&&l.isSpecCompliantForm(t);if(!l.isFunction(n))throw new TypeError("visitor must be a function");function m(h){if(h===null)return"";if(l.isDate(h))return h.toISOString();if(l.isBoolean(h))return h.toString();if(!f&&l.isBlob(h))throw new b("Blob is not supported. Use a Buffer instead.");return l.isArrayBuffer(h)||l.isTypedArray(h)?f&&typeof Blob=="function"?new Blob([h]):Buffer.from(h):h}function c(h,g,x){let S=h;if(h&&!x&&typeof h=="object"){if(l.endsWith(g,"{}"))g=r?g:g.slice(0,-2),h=JSON.stringify(h);else if(l.isArray(h)&&ks(h)||(l.isFileList(h)||l.endsWith(g,"[]"))&&(S=l.toArray(h)))return g=xt(g),S.forEach(function(E,R){!(l.isUndefined(E)||E===null)&&t.append(o===!0?ze([g],R,i):o===null?g:g+"[]",m(E))}),!1}return Re(h)?!0:(t.append(ze(x,g,i),m(h)),!1)}const u=[],p=Object.assign(Ps,{defaultVisitor:c,convertValue:m,isVisitable:Re});function y(h,g){if(!l.isUndefined(h)){if(u.indexOf(h)!==-1)throw Error("Circular reference detected in "+g.join("."));u.push(h),l.forEach(h,function(S,T){(!(l.isUndefined(S)||S===null)&&n.call(t,S,l.isString(T)?T.trim():T,g,p))===!0&&y(S,g?g.concat(T):[T])}),u.pop()}}if(!l.isObject(e))throw new TypeError("data must be an object");return y(e),t}function $e(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return t[r]})}function Le(e,t){this._pairs=[],e&&be(e,this,t)}const gt=Le.prototype;gt.append=function(t,s){this._pairs.push([t,s])};gt.toString=function(t){const s=t?function(r){return t.call(this,r,$e)}:$e;return this._pairs.map(function(n){return s(n[0])+"="+s(n[1])},"").join("&")};function Ls(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function bt(e,t,s){if(!t)return e;const r=s&&s.encode||Ls;l.isFunction(s)&&(s={serialize:s});const n=s&&s.serialize;let i;if(n?i=n(t,s):i=l.isURLSearchParams(t)?t.toString():new Le(t,s).toString(r),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class Ve{constructor(){this.handlers=[]}use(t,s,r){return this.handlers.push({fulfilled:t,rejected:s,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){l.forEach(this.handlers,function(r){r!==null&&t(r)})}}const yt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Ds=typeof URLSearchParams<"u"?URLSearchParams:Le,Is=typeof FormData<"u"?FormData:null,_s=typeof Blob<"u"?Blob:null,Fs={isBrowser:!0,classes:{URLSearchParams:Ds,FormData:Is,Blob:_s},protocols:["http","https","file","blob","url","data"]},De=typeof window<"u"&&typeof document<"u",Oe=typeof navigator=="object"&&navigator||void 0,Us=De&&(!Oe||["ReactNative","NativeScript","NS"].indexOf(Oe.product)<0),Bs=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Ms=De&&window.location.href||"http://localhost",Hs=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:De,hasStandardBrowserEnv:Us,hasStandardBrowserWebWorkerEnv:Bs,navigator:Oe,origin:Ms},Symbol.toStringTag,{value:"Module"})),O={...Hs,...Fs};function qs(e,t){return be(e,new O.classes.URLSearchParams,{visitor:function(s,r,n,i){return O.isNode&&l.isBuffer(s)?(this.append(r,s.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function zs(e){return l.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function $s(e){const t={},s=Object.keys(e);let r;const n=s.length;let i;for(r=0;r<n;r++)i=s[r],t[i]=e[i];return t}function wt(e){function t(s,r,n,i){let o=s[i++];if(o==="__proto__")return!0;const d=Number.isFinite(+o),f=i>=s.length;return o=!o&&l.isArray(n)?n.length:o,f?(l.hasOwnProp(n,o)?n[o]=[n[o],r]:n[o]=r,!d):((!n[o]||!l.isObject(n[o]))&&(n[o]=[]),t(s,r,n[o],i)&&l.isArray(n[o])&&(n[o]=$s(n[o])),!d)}if(l.isFormData(e)&&l.isFunction(e.entries)){const s={};return l.forEachEntry(e,(r,n)=>{t(zs(r),n,s,0)}),s}return null}function Vs(e,t,s){if(l.isString(e))try{return(t||JSON.parse)(e),l.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(s||JSON.stringify)(e)}const re={transitional:yt,adapter:["xhr","http","fetch"],transformRequest:[function(t,s){const r=s.getContentType()||"",n=r.indexOf("application/json")>-1,i=l.isObject(t);if(i&&l.isHTMLForm(t)&&(t=new FormData(t)),l.isFormData(t))return n?JSON.stringify(wt(t)):t;if(l.isArrayBuffer(t)||l.isBuffer(t)||l.isStream(t)||l.isFile(t)||l.isBlob(t)||l.isReadableStream(t))return t;if(l.isArrayBufferView(t))return t.buffer;if(l.isURLSearchParams(t))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let d;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return qs(t,this.formSerializer).toString();if((d=l.isFileList(t))||r.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return be(d?{"files[]":t}:t,f&&new f,this.formSerializer)}}return i||n?(s.setContentType("application/json",!1),Vs(t)):t}],transformResponse:[function(t){const s=this.transitional||re.transitional,r=s&&s.forcedJSONParsing,n=this.responseType==="json";if(l.isResponse(t)||l.isReadableStream(t))return t;if(t&&l.isString(t)&&(r&&!this.responseType||n)){const o=!(s&&s.silentJSONParsing)&&n;try{return JSON.parse(t,this.parseReviver)}catch(d){if(o)throw d.name==="SyntaxError"?b.from(d,b.ERR_BAD_RESPONSE,this,null,this.response):d}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:O.classes.FormData,Blob:O.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};l.forEach(["delete","get","head","post","put","patch"],e=>{re.headers[e]={}});const Js=l.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ws=e=>{const t={};let s,r,n;return e&&e.split(`
`).forEach(function(o){n=o.indexOf(":"),s=o.substring(0,n).trim().toLowerCase(),r=o.substring(n+1).trim(),!(!s||t[s]&&Js[s])&&(s==="set-cookie"?t[s]?t[s].push(r):t[s]=[r]:t[s]=t[s]?t[s]+", "+r:r)}),t},Je=Symbol("internals");function Z(e){return e&&String(e).trim().toLowerCase()}function ue(e){return e===!1||e==null?e:l.isArray(e)?e.map(ue):String(e)}function Ks(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(e);)t[r[1]]=r[2];return t}const Gs=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function je(e,t,s,r,n){if(l.isFunction(r))return r.call(this,t,s);if(n&&(t=s),!!l.isString(t)){if(l.isString(r))return t.indexOf(r)!==-1;if(l.isRegExp(r))return r.test(t)}}function Xs(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,s,r)=>s.toUpperCase()+r)}function Ys(e,t){const s=l.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+s,{value:function(n,i,o){return this[r].call(this,t,n,i,o)},configurable:!0})})}let L=class{constructor(t){t&&this.set(t)}set(t,s,r){const n=this;function i(d,f,m){const c=Z(f);if(!c)throw new Error("header name must be a non-empty string");const u=l.findKey(n,c);(!u||n[u]===void 0||m===!0||m===void 0&&n[u]!==!1)&&(n[u||f]=ue(d))}const o=(d,f)=>l.forEach(d,(m,c)=>i(m,c,f));if(l.isPlainObject(t)||t instanceof this.constructor)o(t,s);else if(l.isString(t)&&(t=t.trim())&&!Gs(t))o(Ws(t),s);else if(l.isObject(t)&&l.isIterable(t)){let d={},f,m;for(const c of t){if(!l.isArray(c))throw TypeError("Object iterator must return a key-value pair");d[m=c[0]]=(f=d[m])?l.isArray(f)?[...f,c[1]]:[f,c[1]]:c[1]}o(d,s)}else t!=null&&i(s,t,r);return this}get(t,s){if(t=Z(t),t){const r=l.findKey(this,t);if(r){const n=this[r];if(!s)return n;if(s===!0)return Ks(n);if(l.isFunction(s))return s.call(this,n,r);if(l.isRegExp(s))return s.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,s){if(t=Z(t),t){const r=l.findKey(this,t);return!!(r&&this[r]!==void 0&&(!s||je(this,this[r],r,s)))}return!1}delete(t,s){const r=this;let n=!1;function i(o){if(o=Z(o),o){const d=l.findKey(r,o);d&&(!s||je(r,r[d],d,s))&&(delete r[d],n=!0)}}return l.isArray(t)?t.forEach(i):i(t),n}clear(t){const s=Object.keys(this);let r=s.length,n=!1;for(;r--;){const i=s[r];(!t||je(this,this[i],i,t,!0))&&(delete this[i],n=!0)}return n}normalize(t){const s=this,r={};return l.forEach(this,(n,i)=>{const o=l.findKey(r,i);if(o){s[o]=ue(n),delete s[i];return}const d=t?Xs(i):String(i).trim();d!==i&&delete s[i],s[d]=ue(n),r[d]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const s=Object.create(null);return l.forEach(this,(r,n)=>{r!=null&&r!==!1&&(s[n]=t&&l.isArray(r)?r.join(", "):r)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,s])=>t+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...s){const r=new this(t);return s.forEach(n=>r.set(n)),r}static accessor(t){const r=(this[Je]=this[Je]={accessors:{}}).accessors,n=this.prototype;function i(o){const d=Z(o);r[d]||(Ys(n,o),r[d]=!0)}return l.isArray(t)?t.forEach(i):i(t),this}};L.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);l.reduceDescriptors(L.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(r){this[s]=r}}});l.freezeMethods(L);function Se(e,t){const s=this||re,r=t||s,n=L.from(r.headers);let i=r.data;return l.forEach(e,function(d){i=d.call(s,i,n.normalize(),t?t.status:void 0)}),n.normalize(),i}function Nt(e){return!!(e&&e.__CANCEL__)}function Y(e,t,s){b.call(this,e??"canceled",b.ERR_CANCELED,t,s),this.name="CanceledError"}l.inherits(Y,b,{__CANCEL__:!0});function jt(e,t,s){const r=s.config.validateStatus;!s.status||!r||r(s.status)?e(s):t(new b("Request failed with status code "+s.status,[b.ERR_BAD_REQUEST,b.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function Qs(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function Zs(e,t){e=e||10;const s=new Array(e),r=new Array(e);let n=0,i=0,o;return t=t!==void 0?t:1e3,function(f){const m=Date.now(),c=r[i];o||(o=m),s[n]=f,r[n]=m;let u=i,p=0;for(;u!==n;)p+=s[u++],u=u%e;if(n=(n+1)%e,n===i&&(i=(i+1)%e),m-o<t)return;const y=c&&m-c;return y?Math.round(p*1e3/y):void 0}}function er(e,t){let s=0,r=1e3/t,n,i;const o=(m,c=Date.now())=>{s=c,n=null,i&&(clearTimeout(i),i=null),e(...m)};return[(...m)=>{const c=Date.now(),u=c-s;u>=r?o(m,c):(n=m,i||(i=setTimeout(()=>{i=null,o(n)},r-u)))},()=>n&&o(n)]}const me=(e,t,s=3)=>{let r=0;const n=Zs(50,250);return er(i=>{const o=i.loaded,d=i.lengthComputable?i.total:void 0,f=o-r,m=n(f),c=o<=d;r=o;const u={loaded:o,total:d,progress:d?o/d:void 0,bytes:f,rate:m||void 0,estimated:m&&d&&c?(d-o)/m:void 0,event:i,lengthComputable:d!=null,[t?"download":"upload"]:!0};e(u)},s)},We=(e,t)=>{const s=e!=null;return[r=>t[0]({lengthComputable:s,total:e,loaded:r}),t[1]]},Ke=e=>(...t)=>l.asap(()=>e(...t)),tr=O.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,O.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(O.origin),O.navigator&&/(msie|trident)/i.test(O.navigator.userAgent)):()=>!0,sr=O.hasStandardBrowserEnv?{write(e,t,s,r,n,i){const o=[e+"="+encodeURIComponent(t)];l.isNumber(s)&&o.push("expires="+new Date(s).toGMTString()),l.isString(r)&&o.push("path="+r),l.isString(n)&&o.push("domain="+n),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function rr(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function nr(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function St(e,t,s){let r=!rr(t);return e&&(r||s==!1)?nr(e,t):t}const Ge=e=>e instanceof L?{...e}:e;function W(e,t){t=t||{};const s={};function r(m,c,u,p){return l.isPlainObject(m)&&l.isPlainObject(c)?l.merge.call({caseless:p},m,c):l.isPlainObject(c)?l.merge({},c):l.isArray(c)?c.slice():c}function n(m,c,u,p){if(l.isUndefined(c)){if(!l.isUndefined(m))return r(void 0,m,u,p)}else return r(m,c,u,p)}function i(m,c){if(!l.isUndefined(c))return r(void 0,c)}function o(m,c){if(l.isUndefined(c)){if(!l.isUndefined(m))return r(void 0,m)}else return r(void 0,c)}function d(m,c,u){if(u in t)return r(m,c);if(u in e)return r(void 0,m)}const f={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:d,headers:(m,c,u)=>n(Ge(m),Ge(c),u,!0)};return l.forEach(Object.keys({...e,...t}),function(c){const u=f[c]||n,p=u(e[c],t[c],c);l.isUndefined(p)&&u!==d||(s[c]=p)}),s}const vt=e=>{const t=W({},e);let{data:s,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:d}=t;if(t.headers=o=L.from(o),t.url=bt(St(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),d&&o.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),l.isFormData(s)){if(O.hasStandardBrowserEnv||O.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(l.isFunction(s.getHeaders)){const f=s.getHeaders(),m=["content-type","content-length"];Object.entries(f).forEach(([c,u])=>{m.includes(c.toLowerCase())&&o.set(c,u)})}}if(O.hasStandardBrowserEnv&&(r&&l.isFunction(r)&&(r=r(t)),r||r!==!1&&tr(t.url))){const f=n&&i&&sr.read(i);f&&o.set(n,f)}return t},ar=typeof XMLHttpRequest<"u",or=ar&&function(e){return new Promise(function(s,r){const n=vt(e);let i=n.data;const o=L.from(n.headers).normalize();let{responseType:d,onUploadProgress:f,onDownloadProgress:m}=n,c,u,p,y,h;function g(){y&&y(),h&&h(),n.cancelToken&&n.cancelToken.unsubscribe(c),n.signal&&n.signal.removeEventListener("abort",c)}let x=new XMLHttpRequest;x.open(n.method.toUpperCase(),n.url,!0),x.timeout=n.timeout;function S(){if(!x)return;const E=L.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),N={data:!d||d==="text"||d==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:E,config:e,request:x};jt(function(C){s(C),g()},function(C){r(C),g()},N),x=null}"onloadend"in x?x.onloadend=S:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(S)},x.onabort=function(){x&&(r(new b("Request aborted",b.ECONNABORTED,e,x)),x=null)},x.onerror=function(R){const N=R&&R.message?R.message:"Network Error",j=new b(N,b.ERR_NETWORK,e,x);j.event=R||null,r(j),x=null},x.ontimeout=function(){let R=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const N=n.transitional||yt;n.timeoutErrorMessage&&(R=n.timeoutErrorMessage),r(new b(R,N.clarifyTimeoutError?b.ETIMEDOUT:b.ECONNABORTED,e,x)),x=null},i===void 0&&o.setContentType(null),"setRequestHeader"in x&&l.forEach(o.toJSON(),function(R,N){x.setRequestHeader(N,R)}),l.isUndefined(n.withCredentials)||(x.withCredentials=!!n.withCredentials),d&&d!=="json"&&(x.responseType=n.responseType),m&&([p,h]=me(m,!0),x.addEventListener("progress",p)),f&&x.upload&&([u,y]=me(f),x.upload.addEventListener("progress",u),x.upload.addEventListener("loadend",y)),(n.cancelToken||n.signal)&&(c=E=>{x&&(r(!E||E.type?new Y(null,e,x):E),x.abort(),x=null)},n.cancelToken&&n.cancelToken.subscribe(c),n.signal&&(n.signal.aborted?c():n.signal.addEventListener("abort",c)));const T=Qs(n.url);if(T&&O.protocols.indexOf(T)===-1){r(new b("Unsupported protocol "+T+":",b.ERR_BAD_REQUEST,e));return}x.send(i||null)})},ir=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let r=new AbortController,n;const i=function(m){if(!n){n=!0,d();const c=m instanceof Error?m:this.reason;r.abort(c instanceof b?c:new Y(c instanceof Error?c.message:c))}};let o=t&&setTimeout(()=>{o=null,i(new b(`timeout ${t} of ms exceeded`,b.ETIMEDOUT))},t);const d=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(m=>{m.unsubscribe?m.unsubscribe(i):m.removeEventListener("abort",i)}),e=null)};e.forEach(m=>m.addEventListener("abort",i));const{signal:f}=r;return f.unsubscribe=()=>l.asap(d),f}},lr=function*(e,t){let s=e.byteLength;if(s<t){yield e;return}let r=0,n;for(;r<s;)n=r+t,yield e.slice(r,n),r=n},cr=async function*(e,t){for await(const s of dr(e))yield*lr(s,t)},dr=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:s,value:r}=await t.read();if(s)break;yield r}}finally{await t.cancel()}},Xe=(e,t,s,r)=>{const n=cr(e,t);let i=0,o,d=f=>{o||(o=!0,r&&r(f))};return new ReadableStream({async pull(f){try{const{done:m,value:c}=await n.next();if(m){d(),f.close();return}let u=c.byteLength;if(s){let p=i+=u;s(p)}f.enqueue(new Uint8Array(c))}catch(m){throw d(m),m}},cancel(f){return d(f),n.return()}},{highWaterMark:2})},Ye=64*1024,{isFunction:le}=l,ur=(({Request:e,Response:t})=>({Request:e,Response:t}))(l.global),{ReadableStream:Qe,TextEncoder:Ze}=l.global,et=(e,...t)=>{try{return!!e(...t)}catch{return!1}},hr=e=>{e=l.merge.call({skipUndefined:!0},ur,e);const{fetch:t,Request:s,Response:r}=e,n=t?le(t):typeof fetch=="function",i=le(s),o=le(r);if(!n)return!1;const d=n&&le(Qe),f=n&&(typeof Ze=="function"?(h=>g=>h.encode(g))(new Ze):async h=>new Uint8Array(await new s(h).arrayBuffer())),m=i&&d&&et(()=>{let h=!1;const g=new s(O.origin,{body:new Qe,method:"POST",get duplex(){return h=!0,"half"}}).headers.has("Content-Type");return h&&!g}),c=o&&d&&et(()=>l.isReadableStream(new r("").body)),u={stream:c&&(h=>h.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(h=>{!u[h]&&(u[h]=(g,x)=>{let S=g&&g[h];if(S)return S.call(g);throw new b(`Response type '${h}' is not supported`,b.ERR_NOT_SUPPORT,x)})});const p=async h=>{if(h==null)return 0;if(l.isBlob(h))return h.size;if(l.isSpecCompliantForm(h))return(await new s(O.origin,{method:"POST",body:h}).arrayBuffer()).byteLength;if(l.isArrayBufferView(h)||l.isArrayBuffer(h))return h.byteLength;if(l.isURLSearchParams(h)&&(h=h+""),l.isString(h))return(await f(h)).byteLength},y=async(h,g)=>{const x=l.toFiniteNumber(h.getContentLength());return x??p(g)};return async h=>{let{url:g,method:x,data:S,signal:T,cancelToken:E,timeout:R,onDownloadProgress:N,onUploadProgress:j,responseType:C,headers:we,withCredentials:ne="same-origin",fetchOptions:Ie}=vt(h),_e=t||fetch;C=C?(C+"").toLowerCase():"text";let ae=ir([T,E&&E.toAbortSignal()],R),Q=null;const q=ae&&ae.unsubscribe&&(()=>{ae.unsubscribe()});let Fe;try{if(j&&m&&x!=="get"&&x!=="head"&&(Fe=await y(we,S))!==0){let M=new s(g,{method:"POST",body:S,duplex:"half"}),K;if(l.isFormData(S)&&(K=M.headers.get("content-type"))&&we.setContentType(K),M.body){const[Ne,oe]=We(Fe,me(Ke(j)));S=Xe(M.body,Ye,Ne,oe)}}l.isString(ne)||(ne=ne?"include":"omit");const I=i&&"credentials"in s.prototype,Ue={...Ie,signal:ae,method:x.toUpperCase(),headers:we.normalize().toJSON(),body:S,duplex:"half",credentials:I?ne:void 0};Q=i&&new s(g,Ue);let B=await(i?_e(Q,Ie):_e(g,Ue));const Be=c&&(C==="stream"||C==="response");if(c&&(N||Be&&q)){const M={};["status","statusText","headers"].forEach(Me=>{M[Me]=B[Me]});const K=l.toFiniteNumber(B.headers.get("content-length")),[Ne,oe]=N&&We(K,me(Ke(N),!0))||[];B=new r(Xe(B.body,Ye,Ne,()=>{oe&&oe(),q&&q()}),M)}C=C||"text";let kt=await u[l.findKey(u,C)||"text"](B,h);return!Be&&q&&q(),await new Promise((M,K)=>{jt(M,K,{data:kt,headers:L.from(B.headers),status:B.status,statusText:B.statusText,config:h,request:Q})})}catch(I){throw q&&q(),I&&I.name==="TypeError"&&/Load failed|fetch/i.test(I.message)?Object.assign(new b("Network Error",b.ERR_NETWORK,h,Q),{cause:I.cause||I}):b.from(I,I&&I.code,h,Q)}}},mr=new Map,Et=e=>{let t=e?e.env:{};const{fetch:s,Request:r,Response:n}=t,i=[r,n,s];let o=i.length,d=o,f,m,c=mr;for(;d--;)f=i[d],m=c.get(f),m===void 0&&c.set(f,m=d?new Map:hr(t)),c=m;return m};Et();const Te={http:Ts,xhr:or,fetch:{get:Et}};l.forEach(Te,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const tt=e=>`- ${e}`,fr=e=>l.isFunction(e)||e===null||e===!1,Ct={getAdapter:(e,t)=>{e=l.isArray(e)?e:[e];const{length:s}=e;let r,n;const i={};for(let o=0;o<s;o++){r=e[o];let d;if(n=r,!fr(r)&&(n=Te[(d=String(r)).toLowerCase()],n===void 0))throw new b(`Unknown adapter '${d}'`);if(n&&(l.isFunction(n)||(n=n.get(t))))break;i[d||"#"+o]=n}if(!n){const o=Object.entries(i).map(([f,m])=>`adapter ${f} `+(m===!1?"is not supported by the environment":"is not available in the build"));let d=s?o.length>1?`since :
`+o.map(tt).join(`
`):" "+tt(o[0]):"as no adapter specified";throw new b("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return n},adapters:Te};function ve(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Y(null,e)}function st(e){return ve(e),e.headers=L.from(e.headers),e.data=Se.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Ct.getAdapter(e.adapter||re.adapter,e)(e).then(function(r){return ve(e),r.data=Se.call(e,e.transformResponse,r),r.headers=L.from(r.headers),r},function(r){return Nt(r)||(ve(e),r&&r.response&&(r.response.data=Se.call(e,e.transformResponse,r.response),r.response.headers=L.from(r.response.headers))),Promise.reject(r)})}const At="1.12.2",ye={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ye[e]=function(r){return typeof r===e||"a"+(t<1?"n ":" ")+e}});const rt={};ye.transitional=function(t,s,r){function n(i,o){return"[Axios v"+At+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,d)=>{if(t===!1)throw new b(n(o," has been removed"+(s?" in "+s:"")),b.ERR_DEPRECATED);return s&&!rt[o]&&(rt[o]=!0,console.warn(n(o," has been deprecated since v"+s+" and will be removed in the near future"))),t?t(i,o,d):!0}};ye.spelling=function(t){return(s,r)=>(console.warn(`${r} is likely a misspelling of ${t}`),!0)};function pr(e,t,s){if(typeof e!="object")throw new b("options must be an object",b.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let n=r.length;for(;n-- >0;){const i=r[n],o=t[i];if(o){const d=e[i],f=d===void 0||o(d,i,e);if(f!==!0)throw new b("option "+i+" must be "+f,b.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new b("Unknown option "+i,b.ERR_BAD_OPTION)}}const he={assertOptions:pr,validators:ye},_=he.validators;let J=class{constructor(t){this.defaults=t||{},this.interceptors={request:new Ve,response:new Ve}}async request(t,s){try{return await this._request(t,s)}catch(r){if(r instanceof Error){let n={};Error.captureStackTrace?Error.captureStackTrace(n):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(t,s){typeof t=="string"?(s=s||{},s.url=t):s=t||{},s=W(this.defaults,s);const{transitional:r,paramsSerializer:n,headers:i}=s;r!==void 0&&he.assertOptions(r,{silentJSONParsing:_.transitional(_.boolean),forcedJSONParsing:_.transitional(_.boolean),clarifyTimeoutError:_.transitional(_.boolean)},!1),n!=null&&(l.isFunction(n)?s.paramsSerializer={serialize:n}:he.assertOptions(n,{encode:_.function,serialize:_.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),he.assertOptions(s,{baseUrl:_.spelling("baseURL"),withXsrfToken:_.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=i&&l.merge(i.common,i[s.method]);i&&l.forEach(["delete","get","head","post","put","patch","common"],h=>{delete i[h]}),s.headers=L.concat(o,i);const d=[];let f=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(s)===!1||(f=f&&g.synchronous,d.unshift(g.fulfilled,g.rejected))});const m=[];this.interceptors.response.forEach(function(g){m.push(g.fulfilled,g.rejected)});let c,u=0,p;if(!f){const h=[st.bind(this),void 0];for(h.unshift(...d),h.push(...m),p=h.length,c=Promise.resolve(s);u<p;)c=c.then(h[u++],h[u++]);return c}p=d.length;let y=s;for(;u<p;){const h=d[u++],g=d[u++];try{y=h(y)}catch(x){g.call(this,x);break}}try{c=st.call(this,y)}catch(h){return Promise.reject(h)}for(u=0,p=m.length;u<p;)c=c.then(m[u++],m[u++]);return c}getUri(t){t=W(this.defaults,t);const s=St(t.baseURL,t.url,t.allowAbsoluteUrls);return bt(s,t.params,t.paramsSerializer)}};l.forEach(["delete","get","head","options"],function(t){J.prototype[t]=function(s,r){return this.request(W(r||{},{method:t,url:s,data:(r||{}).data}))}});l.forEach(["post","put","patch"],function(t){function s(r){return function(i,o,d){return this.request(W(d||{},{method:t,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}J.prototype[t]=s(),J.prototype[t+"Form"]=s(!0)});let xr=class Rt{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(i){s=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(d=>{r.subscribe(d),i=d}).then(n);return o.cancel=function(){r.unsubscribe(i)},o},t(function(i,o,d){r.reason||(r.reason=new Y(i,o,d),s(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const s=this._listeners.indexOf(t);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const t=new AbortController,s=r=>{t.abort(r)};return this.subscribe(s),t.signal.unsubscribe=()=>this.unsubscribe(s),t.signal}static source(){let t;return{token:new Rt(function(n){t=n}),cancel:t}}};function gr(e){return function(s){return e.apply(null,s)}}function br(e){return l.isObject(e)&&e.isAxiosError===!0}const ke={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ke).forEach(([e,t])=>{ke[t]=e});function Ot(e){const t=new J(e),s=ot(J.prototype.request,t);return l.extend(s,J.prototype,t,{allOwnKeys:!0}),l.extend(s,t,null,{allOwnKeys:!0}),s.create=function(n){return Ot(W(e,n))},s}const v=Ot(re);v.Axios=J;v.CanceledError=Y;v.CancelToken=xr;v.isCancel=Nt;v.VERSION=At;v.toFormData=be;v.AxiosError=b;v.Cancel=v.CanceledError;v.all=function(t){return Promise.all(t)};v.spread=gr;v.isAxiosError=br;v.mergeConfig=W;v.AxiosHeaders=L;v.formToJSON=e=>wt(l.isHTMLForm(e)?new FormData(e):e);v.getAdapter=Ct.getAdapter;v.HttpStatusCode=ke;v.default=v;const{Axios:Ir,AxiosError:_r,CanceledError:Fr,isCancel:Ur,CancelToken:Br,VERSION:Mr,all:Hr,Cancel:qr,isAxiosError:zr,spread:$r,toFormData:Vr,AxiosHeaders:Jr,HttpStatusCode:Wr,formToJSON:Kr,getAdapter:Gr,mergeConfig:Xr}=v,Ee={},Tt=window.location.hostname.includes("github.io"),yr=window.location.hostname==="localhost"&&!Tt;class wr{constructor(){z(this,"axiosInstance",null);z(this,"useClientStorage");this.useClientStorage=Tt||!yr,this.useClientStorage||(this.axiosInstance=v.create({baseURL:(Ee==null?void 0:Ee.VITE_API_URL)||"http://localhost:3001",timeout:1e4,headers:{"Content-Type":"application/json"}}),this.setupInterceptors())}setupInterceptors(){this.axiosInstance&&(this.axiosInstance.interceptors.request.use(t=>{const s=sessionStorage.getItem("aves-session-id");return s&&(t.headers["X-Session-Id"]=s),t},t=>Promise.reject(t)),this.axiosInstance.interceptors.response.use(t=>t,t=>{var s;return((s=t.response)==null?void 0:s.status)===503&&(console.warn("Backend unavailable, switching to client storage"),this.useClientStorage=!0),Promise.reject(t)}))}async getAnnotations(t){if(this.useClientStorage)return A.getAnnotations(t);try{return(await this.axiosInstance.get("/api/annotations",{params:{imageId:t}})).data}catch(s){return console.error("API error, falling back to client storage:",s),A.getAnnotations(t)}}async createAnnotation(t){if(this.useClientStorage)throw new Error("Cannot create annotations in static mode");return(await this.axiosInstance.post("/api/annotations",t)).data}async getSpecies(t){if(this.useClientStorage)return A.getSpecies(t);try{return(await this.axiosInstance.get("/api/species",{params:t})).data}catch(s){return console.error("API error, falling back to client storage:",s),A.getSpecies(t)}}async getSpeciesById(t){return(await this.getSpecies()).find(r=>r.id===t)||null}async getExercises(t){if(this.useClientStorage)return A.getExercises(t);try{return(await this.axiosInstance.get("/api/exercises",{params:{type:t}})).data}catch(s){return console.error("API error, falling back to client storage:",s),A.getExercises(t)}}async submitExerciseAnswer(t,s){if(this.useClientStorage){const n={exerciseId:t,answer:s,correct:this.validateAnswer(t,s),timestamp:new Date};return await A.saveExerciseResult(n),n}return(await this.axiosInstance.post("/api/exercises/submit",{exerciseId:t,answer:s})).data}validateAnswer(t,s){return Math.random()>.3}async saveInteraction(t){if(this.useClientStorage)return A.saveInteraction(t);await this.axiosInstance.post("/api/vocabulary/interact",t)}async getInteractions(t){if(this.useClientStorage)return A.getInteractions(t);try{return(await this.axiosInstance.get("/api/vocabulary/interactions",{params:{sessionId:t}})).data}catch(s){return console.error("API error, falling back to client storage:",s),A.getInteractions(t)}}async saveProgress(t){if(this.useClientStorage)return A.saveProgress(t);await this.axiosInstance.post("/api/progress",t)}async getProgress(t){if(this.useClientStorage)return A.getProgress(t);try{return(await this.axiosInstance.get("/api/progress",{params:{sessionId:t}})).data}catch(s){return console.error("API error, falling back to client storage:",s),A.getProgress(t)}}async exportUserData(){return A.exportData()}async importUserData(t){return A.importData(t)}async clearAllData(){return A.clearAllData()}isUsingClientStorage(){return this.useClientStorage}getStorageMode(){return this.useClientStorage?"client":"backend"}}const k=new wr,U={annotations:{list:e=>k.getAnnotations(e),create:e=>k.createAnnotation(e)},species:{list:e=>k.getSpecies(e),get:e=>k.getSpeciesById(e)},exercises:{list:e=>k.getExercises(e),submit:(e,t)=>k.submitExerciseAnswer(e,t)},vocabulary:{saveInteraction:e=>k.saveInteraction(e),getInteractions:e=>k.getInteractions(e)},progress:{save:e=>k.saveProgress(e),get:e=>k.getProgress(e)},utils:{export:()=>k.exportUserData(),import:e=>k.importUserData(e),clear:()=>k.clearAllData(),getMode:()=>k.getStorageMode()}},Nr=()=>{const[e,t]=w.useState(null),[s,r]=w.useState(!1),n=w.useCallback(()=>{let u=sessionStorage.getItem("aves-session-id");return u||(u=`session-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,sessionStorage.setItem("aves-session-id",u)),u},[]),i=w.useCallback(async()=>{r(!0);const u=n();try{const p=await U.progress.get(u);if(p)t({...p,lastActivity:new Date(p.lastActivity),startedAt:new Date(p.startedAt)});else{const y={sessionId:u,termsDiscovered:[],exercisesCompleted:0,correctAnswers:0,totalAnswers:0,currentStreak:0,longestStreak:0,lastActivity:new Date,startedAt:new Date,vocabularyMastery:{}};t(y),await U.progress.save(y)}}catch(p){console.error("Error initializing progress:",p),t({sessionId:u,termsDiscovered:[],exercisesCompleted:0,correctAnswers:0,totalAnswers:0,currentStreak:0,longestStreak:0,lastActivity:new Date,startedAt:new Date,vocabularyMastery:{}})}finally{r(!1)}},[n]),o=w.useCallback(async u=>{if(e&&!e.termsDiscovered.includes(u)){const p={...e,termsDiscovered:[...e.termsDiscovered,u],lastActivity:new Date};t(p),await U.progress.save(p)}},[e]),d=w.useCallback(async u=>{if(!e)return;const p={...e,exercisesCompleted:e.exercisesCompleted+1,correctAnswers:u?e.correctAnswers+1:e.correctAnswers,totalAnswers:e.totalAnswers+1,currentStreak:u?e.currentStreak+1:0,longestStreak:u&&e.currentStreak+1>e.longestStreak?e.currentStreak+1:e.longestStreak,lastActivity:new Date};t(p),await U.progress.save(p)},[e]),f=w.useCallback(async(u,p)=>{if(!e)return;const y=e.vocabularyMastery[u]||0,g=Math.max(0,Math.min(100,y+(p?10:-5))),x={...e,vocabularyMastery:{...e.vocabularyMastery,[u]:g},lastActivity:new Date};t(x),await U.progress.save(x)},[e]),m=w.useCallback(()=>{if(!e)return{termsLearned:0,exercisesCompleted:0,accuracy:0,currentStreak:0,longestStreak:0,sessionDuration:0,masteredTerms:0};const u=e.totalAnswers>0?Math.round(e.correctAnswers/e.totalAnswers*100):0,p=Math.round((new Date().getTime()-new Date(e.startedAt).getTime())/1e3/60),y=Object.values(e.vocabularyMastery).filter(h=>h>=80).length;return{termsLearned:e.termsDiscovered.length,exercisesCompleted:e.exercisesCompleted,accuracy:u,currentStreak:e.currentStreak,longestStreak:e.longestStreak,sessionDuration:p,masteredTerms:y}},[e]),c=w.useCallback(async()=>{const p={sessionId:n(),termsDiscovered:[],exercisesCompleted:0,correctAnswers:0,totalAnswers:0,currentStreak:0,longestStreak:0,lastActivity:new Date,startedAt:new Date,vocabularyMastery:{}};t(p),await U.progress.save(p)},[n]);return w.useEffect(()=>{i()},[]),{progress:e,loading:s,recordTermDiscovery:o,recordExerciseCompletion:d,updateVocabularyMastery:f,getStats:m,resetProgress:c,sessionId:(e==null?void 0:e.sessionId)||n()}},jr=()=>{const{getStats:e,loading:t}=Nr(),s=e();return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-green-50 to-yellow-50",children:[a.jsxs("div",{className:"relative overflow-hidden",children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-24",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6",children:a.jsx("span",{className:"block text-transparent bg-clip-text bg-gradient-to-r from-green-600 to-blue-600",children:"Birds in Spanish"})}),a.jsx("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Beautiful photos of birds. Real Spanish vocabulary. Natural learning."}),a.jsxs("div",{className:"flex gap-4 justify-center",children:[a.jsx(F,{to:"/learn",className:"px-8 py-4 bg-gradient-to-r from-green-600 to-blue-600 text-white font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:"Start Learning"}),a.jsx(F,{to:"/practice",className:"px-8 py-4 bg-white text-gray-800 font-semibold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:"Practice Exercises"})]})]})}),a.jsx("div",{className:"absolute top-20 left-10 text-4xl animate-bounce",children:"🦜"}),a.jsx("div",{className:"absolute top-40 right-20 text-3xl animate-pulse",children:"🦅"}),a.jsx("div",{className:"absolute bottom-20 left-1/4 text-4xl animate-bounce delay-150",children:"🦩"})]}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-center mb-8 text-gray-800",children:"Your Learning Progress"}),t?a.jsx("div",{className:"text-center text-gray-500",children:"Loading progress..."}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"text-3xl",children:"📚"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.termsLearned})]}),a.jsx("h3",{className:"text-gray-600 font-medium",children:"Terms Discovered"}),a.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Spanish vocabulary learned"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"text-3xl",children:"✏️"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.exercisesCompleted})]}),a.jsx("h3",{className:"text-gray-600 font-medium",children:"Exercises Done"}),a.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Practice sessions completed"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"text-3xl",children:"🎯"}),a.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[s.accuracy,"%"]})]}),a.jsx("h3",{className:"text-gray-600 font-medium",children:"Accuracy"}),a.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Exercise success rate"})]}),a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 transform hover:scale-105 transition-transform",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("div",{className:"text-3xl",children:"🔥"}),a.jsx("div",{className:"text-2xl font-bold text-gray-900",children:s.currentStreak})]}),a.jsx("h3",{className:"text-gray-600 font-medium",children:"Current Streak"}),a.jsx("div",{className:"mt-2 text-sm text-gray-500",children:"Correct answers in a row"})]})]}),a.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-purple-100 to-pink-100 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Session Time"}),a.jsxs("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:[s.sessionDuration," min"]})]}),a.jsx("div",{className:"text-4xl",children:"⏱️"})]})}),a.jsx("div",{className:"bg-gradient-to-r from-green-100 to-blue-100 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Mastered Terms"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:s.masteredTerms})]}),a.jsx("div",{className:"text-4xl",children:"⭐"})]})}),a.jsx("div",{className:"bg-gradient-to-r from-yellow-100 to-orange-100 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:"Best Streak"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:s.longestStreak})]}),a.jsx("div",{className:"text-4xl",children:"🏆"})]})})]})]}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[a.jsx("h2",{className:"text-3xl font-bold text-center mb-12 text-gray-800",children:"How It Works"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"bg-gradient-to-br from-green-400 to-blue-500 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-white text-3xl",children:"1"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Explore Images"}),a.jsx("p",{className:"text-gray-600",children:"Click on bird photographs to discover Spanish vocabulary through interactive annotations"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-400 to-purple-500 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-white text-3xl",children:"2"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Learn Progressively"}),a.jsx("p",{className:"text-gray-600",children:"Vocabulary reveals gradually from basic terms to etymology and contextual examples"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"bg-gradient-to-br from-purple-400 to-pink-500 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-4 text-white text-3xl",children:"3"}),a.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Practice & Master"}),a.jsx("p",{className:"text-gray-600",children:"Reinforce learning with interactive exercises and track your progress over time"})]})]})]}),a.jsx("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 py-16",children:a.jsxs("div",{className:"max-w-4xl mx-auto text-center px-4",children:[a.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to Start Learning?"}),a.jsx("p",{className:"text-xl text-green-100 mb-8",children:"Join thousands discovering Spanish through the beauty of birds"}),a.jsx(F,{to:"/learn",className:"inline-block px-8 py-4 bg-white text-green-600 font-bold rounded-lg shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:"Begin Your Journey"})]})})]})},ce=[{id:"flamingo",name:"Greater Flamingo",spanishName:"Flamenco Común",imageUrl:"https://images.unsplash.com/photo-1535821265819-8e7ff3c30737?w=800",annotations:[{id:"f1",term:"el pico curvado",english:"curved beak",pronunciation:"el PEE-koh koor-VAH-doh",x:35,y:25,description:"Specialized for filter feeding"},{id:"f2",term:"las patas largas",english:"long legs",pronunciation:"lahs PAH-tahs LAHR-gahs",x:45,y:70,description:"For wading in shallow water"},{id:"f3",term:"las plumas rosadas",english:"pink feathers",pronunciation:"lahs PLOO-mahs roh-SAH-dahs",x:50,y:45,description:"Color comes from their diet"}]},{id:"eagle",name:"Golden Eagle",spanishName:"Águila Real",imageUrl:"https://images.unsplash.com/photo-1611689342806-0863700ce1e4?w=800",annotations:[{id:"e1",term:"las garras afiladas",english:"sharp talons",pronunciation:"lahs GAH-rrahs ah-fee-LAH-dahs",x:50,y:75,description:"Powerful for catching prey"},{id:"e2",term:"los ojos penetrantes",english:"piercing eyes",pronunciation:"lohs OH-hohs peh-neh-TRAHN-tehs",x:40,y:30,description:"Incredible vision for hunting"},{id:"e3",term:"las alas extendidas",english:"spread wings",pronunciation:"lahs AH-lahs eks-tehn-DEE-dahs",x:65,y:50,description:"Wingspan up to 2.3 meters"}]},{id:"hummingbird",name:"Ruby-throated Hummingbird",spanishName:"Colibrí Garganta de Rubí",imageUrl:"https://images.unsplash.com/photo-1552728089-57bdde30beb3?w=800",annotations:[{id:"h1",term:"el pico largo",english:"long beak",pronunciation:"el PEE-koh LAHR-goh",x:25,y:40,description:"Perfect for reaching nectar"},{id:"h2",term:"las alas rápidas",english:"rapid wings",pronunciation:"lahs AH-lahs RAH-pee-dahs",x:55,y:45,description:"Beat 80 times per second"},{id:"h3",term:"la garganta roja",english:"red throat",pronunciation:"lah gahr-GAHN-tah ROH-hah",x:35,y:35,description:"Males have iridescent red throat"}]},{id:"peacock",name:"Indian Peafowl",spanishName:"Pavo Real",imageUrl:"https://images.unsplash.com/photo-1512990641230-7e91cc31d0dc?w=800",annotations:[{id:"p1",term:"la cola desplegada",english:"displayed tail",pronunciation:"lah KOH-lah dehs-pleh-GAH-dah",x:60,y:50,description:"Courtship display with eye spots"},{id:"p2",term:"la cresta azul",english:"blue crest",pronunciation:"lah KREHS-tah ah-SOOL",x:30,y:25,description:"Crown of feathers on head"},{id:"p3",term:"el cuello iridiscente",english:"iridescent neck",pronunciation:"el KWEH-yoh ee-ree-dee-SEHN-teh",x:35,y:35,description:"Shimmers with blue and green"}]},{id:"owl",name:"Great Horned Owl",spanishName:"Búho Cornudo",imageUrl:"https://images.unsplash.com/photo-1557401751-376608588678?w=800",annotations:[{id:"o1",term:"los cuernos de plumas",english:"feather horns",pronunciation:"lohs KWEHR-nohs deh PLOO-mahs",x:45,y:20,description:"Not real horns, just feather tufts"},{id:"o2",term:"los ojos grandes",english:"large eyes",pronunciation:"lohs OH-hohs GRAHN-dehs",x:45,y:35,description:"Excellent night vision"},{id:"o3",term:"las garras fuertes",english:"strong talons",pronunciation:"lahs GAH-rrahs FWEHR-tehs",x:45,y:80,description:"Grip strength of 300 PSI"}]}],Sr=()=>{const[e,t]=w.useState(ce[0]),[s,r]=w.useState(new Set),[n,i]=w.useState(null),[o,d]=w.useState(null),f=c=>{d(c),r(u=>new Set([...u,c.id]))},m=s.size/(ce.length*3)*100;return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Interactive Bird Learning"}),a.jsx("p",{className:"text-lg text-gray-600",children:"Click on the highlighted areas to learn Spanish bird vocabulary"}),a.jsxs("div",{className:"mt-4",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[a.jsx("span",{children:"Learning Progress"}),a.jsxs("span",{children:[Math.round(m),"% (",s.size," / ",ce.length*3," terms)"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:a.jsx("div",{className:"bg-gradient-to-r from-green-400 to-blue-500 h-3 rounded-full transition-all duration-500",style:{width:`${m}%`}})})]})]}),a.jsx("div",{className:"mb-6",children:a.jsx("div",{className:"flex flex-wrap gap-2 bg-white p-2 rounded-lg shadow-sm",children:ce.map(c=>a.jsxs("button",{onClick:()=>{t(c),d(null)},className:`px-4 py-2 rounded-lg font-medium transition-all ${e.id===c.id?"bg-blue-500 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx("span",{className:"block text-xs opacity-75",children:c.name}),a.jsx("span",{children:c.spanishName})]},c.id))})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full rounded-lg"}),e.annotations.map(c=>a.jsxs("div",{className:"absolute cursor-pointer transform -translate-x-1/2 -translate-y-1/2",style:{left:`${c.x}%`,top:`${c.y}%`},onMouseEnter:()=>i(c.id),onMouseLeave:()=>i(null),onClick:()=>f(c),children:[a.jsxs("div",{className:`relative ${s.has(c.id)?"":"animate-pulse"}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-full border-3 ${s.has(c.id)?"bg-green-500 border-green-600":"bg-blue-500 border-blue-600"} opacity-75`}),s.has(c.id)&&a.jsx("svg",{className:"absolute inset-0 w-8 h-8 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),n===c.id&&a.jsxs("div",{className:"absolute bottom-10 left-1/2 transform -translate-x-1/2 bg-gray-900 text-white px-3 py-2 rounded-lg whitespace-nowrap z-10",children:[a.jsx("div",{className:"text-sm font-bold",children:c.term}),a.jsx("div",{className:"text-xs opacity-90",children:c.english}),a.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-full",children:a.jsx("div",{className:"border-8 border-transparent border-t-gray-900"})})]})]},c.id))]}),a.jsxs("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:[a.jsx("h3",{className:"text-xl font-bold text-gray-900",children:e.spanishName}),a.jsx("p",{className:"text-gray-600",children:e.name}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Click the blue dots to discover vocabulary!"})]})]})}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 sticky top-4",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Vocabulary Details"}),o?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:o.term}),a.jsx("p",{className:"text-sm text-gray-500 italic mt-1",children:o.pronunciation})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"English:"}),a.jsx("p",{className:"text-lg font-medium",children:o.english})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Description:"}),a.jsx("p",{className:"text-sm text-gray-700",children:o.description})]}),a.jsx(F,{to:"/practice",className:"block w-full text-center bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition-colors",children:"Practice This Term"})]}):a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),a.jsx("p",{children:"Click on a highlighted area to see details"})]}),a.jsxs("div",{className:"mt-6 pt-6 border-t",children:[a.jsxs("h3",{className:"font-semibold mb-3",children:["Terms for ",e.spanishName,":"]}),a.jsx("div",{className:"space-y-2",children:e.annotations.map(c=>a.jsxs("div",{className:`flex items-center justify-between p-2 rounded ${s.has(c.id)?"bg-green-50 text-green-700":"bg-gray-50 text-gray-400"}`,children:[a.jsx("span",{className:"text-sm",children:c.term}),s.has(c.id)&&a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})]},c.id))})]})]})})]}),s.size>0&&s.size%5===0&&a.jsxs("div",{className:"fixed bottom-4 right-4 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-lg shadow-xl p-4 max-w-sm animate-bounce",children:[a.jsx("p",{className:"font-bold text-lg mb-1",children:"🎉 Milestone Reached!"}),a.jsxs("p",{className:"text-sm",children:["You've discovered ",s.size," terms!"]}),a.jsx(F,{to:"/practice",className:"inline-block mt-2 bg-white text-blue-600 px-4 py-2 rounded font-semibold hover:bg-blue-50 transition-colors",children:"Practice Now →"})]})]})})},H={VISUAL_MATCH:"visual_match",FILL_BLANK:"fill_blank",MULTIPLE_CHOICE:"multiple_choice",LISTENING:"listening"},$={visual_match:[{question:"Match the image to the Spanish name",correctAnswer:"Flamenco",imageUrl:"https://images.unsplash.com/photo-1535821265819-8e7ff3c30737?w=400",options:["Flamenco","Águila","Colibrí","Búho"]},{question:"Which bird is this?",correctAnswer:"Pavo Real",imageUrl:"https://images.unsplash.com/photo-1512990641230-7e91cc31d0dc?w=400",options:["Gorrión","Pavo Real","Paloma","Cuervo"]},{question:"Identify this bird",correctAnswer:"Búho",imageUrl:"https://images.unsplash.com/photo-1557401751-376608588678?w=400",options:["Águila","Halcón","Búho","Cóndor"]}],fill_blank:[{sentence:"El ___ tiene plumas rosadas.",correctAnswer:"flamenco",options:["flamenco","águila","gorrión","búho"],translation:"The ___ has pink feathers."},{sentence:"El ___ caza de noche.",correctAnswer:"búho",options:["colibrí","flamenco","búho","pavo real"],translation:"The ___ hunts at night."},{sentence:"El ___ tiene una cola magnífica.",correctAnswer:"pavo real",options:["gorrión","paloma","pavo real","cuervo"],translation:"The ___ has a magnificent tail."}],multiple_choice:[{question:'¿Cómo se dice "wings" en español?',correctAnswer:"las alas",options:["las patas","las alas","las plumas","las garras"],explanation:"Alas = wings, used for flying"},{question:'¿Qué significa "el pico"?',correctAnswer:"beak",options:["wing","tail","beak","feather"],explanation:"El pico is the beak, used for eating"},{question:"¿Cuál pájaro es rosado?",correctAnswer:"el flamenco",options:["el águila","el búho","el cuervo","el flamenco"],explanation:"Flamingos are pink from their diet"}]},vr=()=>{const[e,t]=w.useState(H.VISUAL_MATCH),[s,r]=w.useState(0),[n,i]=w.useState(null),[o,d]=w.useState(!1),[f,m]=w.useState(!1),[c,u]=w.useState(0),[p,y]=w.useState(0),[h,g]=w.useState(0),x=()=>{switch(e){case H.VISUAL_MATCH:return $.visual_match[s%$.visual_match.length];case H.FILL_BLANK:return $.fill_blank[s%$.fill_blank.length];case H.MULTIPLE_CHOICE:return $.multiple_choice[s%$.multiple_choice.length];default:return $.visual_match[0]}},S=N=>{i(N);const j=x(),C=N.toLowerCase()===j.correctAnswer.toLowerCase();m(C),d(!0),y(p+1),C?(u(c+1),g(h+1)):g(0),setTimeout(()=>{T()},2e3)},T=()=>{i(null),d(!1),r(s+1);const N=Object.values(H),C=(N.indexOf(e)+1)%N.length;t(N[C])},E=()=>{const N=x();switch(e){case H.VISUAL_MATCH:return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-center",children:N.question}),a.jsx("img",{src:N.imageUrl,alt:"Bird to identify",className:"w-full max-w-md mx-auto rounded-lg shadow-md"}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:N.options.map(j=>a.jsx("button",{onClick:()=>!o&&S(j),disabled:o,className:`p-4 rounded-lg font-medium transition-all ${o&&j===N.correctAnswer?"bg-green-500 text-white":o&&j===n&&!f?"bg-red-500 text-white":n===j?"bg-blue-500 text-white":"bg-white border-2 border-gray-300 hover:border-blue-400"}`,children:j},j))})]});case H.FILL_BLANK:return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-2xl font-semibold mb-2",children:N.sentence}),a.jsx("p",{className:"text-gray-600 italic",children:N.translation})]}),a.jsx("div",{className:"grid grid-cols-2 gap-3 max-w-md mx-auto",children:N.options.map(j=>a.jsx("button",{onClick:()=>!o&&S(j),disabled:o,className:`p-3 rounded-lg font-medium transition-all ${o&&j===N.correctAnswer?"bg-green-500 text-white":o&&j===n&&!f?"bg-red-500 text-white":n===j?"bg-blue-500 text-white":"bg-white border-2 border-gray-300 hover:border-blue-400"}`,children:j},j))})]});case H.MULTIPLE_CHOICE:return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h3",{className:"text-2xl font-semibold text-center",children:N.question}),a.jsx("div",{className:"space-y-3 max-w-md mx-auto",children:N.options.map(j=>a.jsx("button",{onClick:()=>!o&&S(j),disabled:o,className:`w-full p-4 text-left rounded-lg font-medium transition-all ${o&&j===N.correctAnswer?"bg-green-500 text-white":o&&j===n&&!f?"bg-red-500 text-white":n===j?"bg-blue-500 text-white":"bg-white border-2 border-gray-300 hover:border-blue-400"}`,children:j},j))}),o&&N.explanation&&a.jsx("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg text-center",children:a.jsx("p",{className:"text-sm text-blue-700",children:N.explanation})})]});default:return null}},R=p>0?Math.round(c/p*100):0;return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Practice Exercises"}),a.jsx(F,{to:"/learn",className:"text-blue-600 hover:text-blue-800 font-medium",children:"← Back to Learn"})]}),a.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-lg p-4 text-center shadow-sm",children:[a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c}),a.jsx("p",{className:"text-sm text-gray-600",children:"Correct"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 text-center shadow-sm",children:[a.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[R,"%"]}),a.jsx("p",{className:"text-sm text-gray-600",children:"Accuracy"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 text-center shadow-sm",children:[a.jsx("p",{className:"text-2xl font-bold text-green-600",children:h}),a.jsx("p",{className:"text-sm text-gray-600",children:"Streak"})]}),a.jsxs("div",{className:"bg-white rounded-lg p-4 text-center shadow-sm",children:[a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:p}),a.jsx("p",{className:"text-sm text-gray-600",children:"Total"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[a.jsx("div",{className:"mb-6 text-center",children:a.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:e.replace("_"," ").toUpperCase()})}),E(),o&&a.jsx("div",{className:`mt-6 p-4 rounded-lg text-center ${f?"bg-green-100":"bg-red-100"}`,children:a.jsx("p",{className:`text-lg font-bold ${f?"text-green-700":"text-red-700"}`,children:f?"¡Excelente! Correct!":`Not quite. The answer was: ${x().correctAnswer}`})}),!o&&a.jsx("div",{className:"mt-6 text-center",children:a.jsx("button",{onClick:T,className:"text-gray-500 hover:text-gray-700",children:"Skip this exercise →"})})]}),h>=5&&a.jsx("div",{className:"mt-6 bg-gradient-to-r from-yellow-400 to-orange-500 text-white p-4 rounded-lg text-center",children:a.jsxs("p",{className:"text-lg font-bold",children:["🔥 You're on fire! ",h," in a row!"]})}),p>0&&p%10===0&&a.jsx("div",{className:"mt-6 bg-gradient-to-r from-purple-500 to-pink-500 text-white p-4 rounded-lg text-center",children:a.jsxs("p",{className:"text-lg font-bold",children:["🎉 Milestone: ",p," exercises completed!"]})})]})})},Er=({species:e,onClick:t,viewMode:s="grid"})=>{const r=i=>{switch(i){case"LC":return"bg-green-100 text-green-800";case"NT":return"bg-yellow-100 text-yellow-800";case"VU":return"bg-orange-100 text-orange-800";case"EN":return"bg-red-100 text-red-800";case"CR":return"bg-red-200 text-red-900";default:return"bg-gray-100 text-gray-800"}},n=i=>{switch(i){case"small":return"🐦";case"medium":return"🦅";case"large":return"🦢";default:return"🦜"}};return s==="list"?a.jsxs("div",{onClick:()=>t==null?void 0:t(e),className:"flex items-center gap-4 p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer border border-gray-200",children:[a.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center text-2xl",children:n(e.sizeCategory)}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:e.spanishName}),a.jsx("p",{className:"text-sm text-gray-600",children:e.englishName}),a.jsx("p",{className:"text-xs text-gray-500 italic",children:e.scientificName})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-xs text-gray-500",children:e.familyName}),e.conservationStatus&&a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${r(e.conservationStatus)}`,children:e.conservationStatus})]}),a.jsx("div",{className:"flex gap-1",children:e.habitats.slice(0,2).map(i=>a.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded",children:i},i))})]}):a.jsxs("div",{onClick:()=>t==null?void 0:t(e),className:"bg-white rounded-lg shadow-md hover:shadow-xl transition-all cursor-pointer overflow-hidden group",children:[a.jsxs("div",{className:"aspect-square bg-gradient-to-br from-gray-200 to-gray-300 relative",children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-6xl opacity-50",children:n(e.sizeCategory)}),e.primaryImageUrl&&a.jsx("img",{src:e.primaryImageUrl,alt:e.spanishName,className:"w-full h-full object-cover",loading:"lazy"}),e.conservationStatus&&a.jsx("span",{className:`absolute top-2 right-2 text-xs px-2 py-1 rounded-full ${r(e.conservationStatus)}`,children:e.conservationStatus})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:"font-bold text-gray-900 text-lg group-hover:text-blue-600 transition-colors",children:e.spanishName}),a.jsx("p",{className:"text-sm text-gray-600",children:e.englishName}),a.jsx("p",{className:"text-xs text-gray-500 italic mt-1",children:e.scientificName}),a.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[a.jsx("div",{className:"flex gap-1",children:e.primaryColors.slice(0,3).map(i=>a.jsx("span",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:i},title:i},i))}),a.jsx("span",{className:"text-xs text-gray-500",children:e.familyName})]}),a.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.habitats.slice(0,2).map(i=>a.jsx("span",{className:"text-xs bg-green-50 text-green-700 px-2 py-1 rounded",children:i},i))}),e.annotationCount!==void 0&&a.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:a.jsxs("p",{className:"text-xs text-gray-500",children:[e.annotationCount," annotations available"]})})]})]})},Cr=({filters:e,onFilterChange:t,availableFilters:s})=>{const r=(o,d)=>{t({...e,[o]:d||void 0})},n=()=>{t({})},i=Object.values(e).filter(o=>o).length;return a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"font-semibold text-gray-900",children:"Filters"}),i>0&&a.jsxs("button",{onClick:n,className:"text-sm text-blue-600 hover:text-blue-800",children:["Clear all (",i,")"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),a.jsx("input",{type:"text",value:e.searchTerm||"",onChange:o=>r("searchTerm",o.target.value),placeholder:"Spanish or English name...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order"}),a.jsxs("select",{value:e.orderName||"",onChange:o=>r("orderName",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"All Orders"}),s.orders.map(o=>a.jsx("option",{value:o,children:o},o))]})]}),e.orderName&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Family"}),a.jsxs("select",{value:e.familyName||"",onChange:o=>r("familyName",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"All Families"}),s.families.map(o=>a.jsx("option",{value:o,children:o},o))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size"}),a.jsx("div",{className:"flex gap-2",children:["small","medium","large"].map(o=>a.jsx("button",{onClick:()=>r("sizeCategory",e.sizeCategory===o?null:o),className:`flex-1 px-3 py-2 rounded-md border text-sm capitalize transition-colors ${e.sizeCategory===o?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:o},o))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Habitat"}),a.jsxs("select",{value:e.habitat||"",onChange:o=>r("habitat",o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[a.jsx("option",{value:"",children:"All Habitats"}),s.habitats.map(o=>a.jsx("option",{value:o,children:o},o))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Color"}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:s.colors.map(o=>a.jsx("button",{onClick:()=>r("primaryColor",e.primaryColor===o?null:o),className:`w-full h-8 rounded border-2 transition-all ${e.primaryColor===o?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:o},title:o},o))})]})]})},Ar=()=>{const[e,t]=w.useState([]),[s,r]=w.useState(!1),[n,i]=w.useState(null),o=w.useCallback(async c=>{r(!0),i(null);try{const u=await U.species.list(c);return t(u),u}catch(u){return i("Failed to load species"),console.error("Error fetching species:",u),t([]),[]}finally{r(!1)}},[]),d=w.useCallback(async c=>{try{return await U.species.get(c)}catch(u){return console.error("Error fetching species details:",u),null}},[]),f=w.useCallback(async c=>{try{const u=c.toLowerCase();return e.filter(y=>{var h,g,x;return((h=y.spanishName)==null?void 0:h.toLowerCase().includes(u))||((g=y.englishName)==null?void 0:g.toLowerCase().includes(u))||((x=y.scientificName)==null?void 0:x.toLowerCase().includes(u))})}catch(u){return console.error("Error searching species:",u),[]}},[e]),m=w.useCallback(()=>{const c={totalSpecies:e.length,byOrder:{},byHabitat:{},bySize:{}};return e.forEach(u=>{var p;u.orderName&&(c.byOrder[u.orderName]=(c.byOrder[u.orderName]||0)+1),(p=u.habitats)==null||p.forEach(y=>{c.byHabitat[y]=(c.byHabitat[y]||0)+1}),u.sizeCategory&&(c.bySize[u.sizeCategory]=(c.bySize[u.sizeCategory]||0)+1)}),c},[e]);return w.useEffect(()=>{U.utils.getMode()==="client"&&e.length===0&&o()},[]),{species:e,loading:s,error:n,fetchSpecies:o,fetchSpeciesById:d,searchSpecies:f,getSpeciesStats:m}},Rr=()=>{const{species:e,loading:t,error:s,fetchSpecies:r}=Ar(),[n,i]=w.useState({}),[o,d]=w.useState("grid");w.useEffect(()=>{r()},[]);const f=w.useMemo(()=>{let u=[...e];if(n.searchTerm){const p=n.searchTerm.toLowerCase();u=u.filter(y=>y.spanishName.toLowerCase().includes(p)||y.englishName.toLowerCase().includes(p)||y.scientificName.toLowerCase().includes(p))}return n.orderName&&(u=u.filter(p=>p.orderName===n.orderName)),n.familyName&&(u=u.filter(p=>p.familyName===n.familyName)),n.sizeCategory&&(u=u.filter(p=>p.sizeCategory===n.sizeCategory)),n.habitat&&(u=u.filter(p=>p.habitats.includes(n.habitat))),n.primaryColor&&(u=u.filter(p=>p.primaryColors.includes(n.primaryColor))),u},[e,n]),m=w.useMemo(()=>{const u=[...new Set(e.map(g=>g.orderName))].sort(),p=n.orderName?[...new Set(e.filter(g=>g.orderName===n.orderName).map(g=>g.familyName))].sort():[...new Set(e.map(g=>g.familyName))].sort(),y=[...new Set(e.flatMap(g=>g.habitats))].sort(),h=[...new Set(e.flatMap(g=>g.primaryColors))].sort();return{orders:u,families:p,habitats:y,colors:h}},[e,n.orderName]),c=u=>{console.log("Selected species:",u)};return t?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-gray-500",children:"Loading species..."})}):s?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-red-500",children:["Error loading species: ",s]})}):a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Species Browser"}),a.jsxs("p",{className:"text-gray-600",children:["Explore ",e.length," bird species with Spanish vocabulary"]})]}),a.jsxs("div",{className:"flex gap-6",children:[a.jsx("div",{className:"w-64 flex-shrink-0",children:a.jsx(Cr,{filters:n,onFilterChange:i,availableFilters:m})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4 flex items-center justify-between",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",f.length," of ",e.length," species"]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs("div",{className:"flex gap-1",children:[a.jsx("button",{onClick:()=>d("grid"),className:`p-2 rounded ${o==="grid"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,"aria-label":"Grid view",children:a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM13 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2h-2z"})})}),a.jsx("button",{onClick:()=>d("list"),className:`p-2 rounded ${o==="list"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,"aria-label":"List view",children:a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})})]})})]}),f.length===0?a.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[a.jsx("p",{className:"text-gray-500",children:"No species found matching your filters."}),a.jsx("button",{onClick:()=>i({}),className:"mt-4 text-blue-600 hover:text-blue-800",children:"Clear filters"})]}):a.jsx("div",{className:o==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-4",children:f.map(u=>a.jsx(Er,{species:u,onClick:c,viewMode:o},u.id))})]})]})]})},Or=()=>a.jsx(Rr,{});function Tr(){return a.jsx(It,{basename:"/",children:a.jsxs("div",{className:"min-h-screen",children:[a.jsx("nav",{className:"bg-white shadow-sm border-b",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"flex justify-between h-16",children:a.jsxs("div",{className:"flex",children:[a.jsxs(F,{to:"/",className:"flex items-center px-2 py-2 text-gray-900 hover:text-gray-700",children:[a.jsx("span",{className:"text-2xl mr-2",children:"🦅"}),a.jsx("span",{className:"font-bold text-xl",children:"Aves"})]}),a.jsxs("div",{className:"ml-6 flex space-x-4",children:[a.jsx(F,{to:"/learn",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:"Learn"}),a.jsx(F,{to:"/practice",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:"Practice"}),a.jsx(F,{to:"/species",className:"inline-flex items-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900",children:"Species"})]})]})})})}),a.jsxs(_t,{children:[a.jsx(ie,{path:"/",element:a.jsx(jr,{})}),a.jsx(ie,{path:"/learn",element:a.jsx(Sr,{})}),a.jsx(ie,{path:"/practice",element:a.jsx(vr,{})}),a.jsx(ie,{path:"/species",element:a.jsx(Or,{})})]})]})})}Ce.createRoot(document.getElementById("root")).render(a.jsx(Ft.StrictMode,{children:a.jsx(Tr,{})}));
