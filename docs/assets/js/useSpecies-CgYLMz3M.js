import{r as e,j as r}from"./react-vendor-B7ruFUgT.js";import{u as t}from"./data-vendor-DnujTR0P.js";import{a as s}from"./apiAdapter-wUL4QmyJ.js";import{q as a,e as o}from"./index-Xh41Qkge.js";const i=({src:t,alt:s,className:a="",placeholder:o,blurAmount:i=20,threshold:n=.01,rootMargin:l="50px",onLoad:c,onError:d})=>{const[u,m]=e.useState(!1),[p,f]=e.useState(!1),[h,g]=e.useState(!1),x=e.useRef(null);e.useEffect(()=>{if(!x.current)return;const e=new IntersectionObserver(r=>{r.forEach(r=>{r.isIntersecting&&(f(!0),e.disconnect())})},{threshold:n,rootMargin:l});return e.observe(x.current),()=>{e.disconnect()}},[n,l]);return r.jsxs("div",{ref:x,className:`relative overflow-hidden ${a}`,style:{backgroundColor:"#e5e7eb"},children:[r.jsx("img",{src:o||"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 300'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:rgb(229,231,235);stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:rgb(209,213,219);stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='400' height='300' fill='url(%23grad)' /%3E%3C/svg%3E",alt:"","aria-hidden":"true",className:"absolute inset-0 w-full h-full object-cover transition-opacity duration-500 "+(u?"opacity-0":"opacity-100"),style:{filter:`blur(${i}px)`,transform:"scale(1.1)"}}),p&&!h&&r.jsx("img",{src:t,alt:s,onLoad:()=>{m(!0),c?.()},onError:()=>{g(!0),d?.()},crossOrigin:"anonymous",className:"relative w-full h-full object-cover transition-opacity duration-500 "+(u?"opacity-100":"opacity-0"),loading:"lazy"}),h&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200",children:r.jsxs("div",{className:"text-center text-gray-500",children:[r.jsx("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("span",{className:"text-sm",children:"Image unavailable"})]})}),p&&!u&&!h&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})},n=e=>t({queryKey:a.species.list(e),queryFn:async()=>{try{return await s.species.list(e)}catch(r){return o("Error fetching species",r instanceof Error?r:new Error(String(r))),[]}},staleTime:6e5,gcTime:18e5,placeholderData:[]});export{i as L,n as u};
