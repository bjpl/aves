var fe=e=>{throw TypeError(e)};var Z=(e,t,r)=>t.has(e)||fe("Cannot "+r);var a=(e,t,r)=>(Z(e,t,"read from private field"),r?r.call(e):t.get(e)),j=(e,t,r)=>t.has(e)?fe("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),g=(e,t,r,i)=>(Z(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),p=(e,t,r)=>(Z(e,t,"access private method"),r);import{S as Re,p as ge,r as E,s as ee,a as W,n as te,i as se,b as xe,t as Ee,c as Y,f as Ie,d as Me,g as pe,h as we,k as Oe,u as Te,j as s,q as ke,e as Fe,l as Ue}from"./index-BTzFhQ4H.js";import{r as x,c as Qe}from"./react-vendor-v3diXpis.js";import{a as _e}from"./apiAdapter-CjQTGV19.js";var S,h,q,C,Q,P,T,k,G,D,H,_,L,F,B,d,$,re,ae,ie,ne,le,oe,ce,Ce,je,Le=(je=class extends Re{constructor(t,r){super();j(this,d);j(this,S);j(this,h);j(this,q);j(this,C);j(this,Q);j(this,P);j(this,T);j(this,k);j(this,G);j(this,D);j(this,H);j(this,_);j(this,L);j(this,F);j(this,B,new Set);this.options=r,g(this,S,t),g(this,k,null),g(this,T,ge()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(a(this,h).addObserver(this),be(a(this,h),this.options)?p(this,d,$).call(this):this.updateResult(),p(this,d,ne).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return he(a(this,h),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return he(a(this,h),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,p(this,d,le).call(this),p(this,d,oe).call(this),a(this,h).removeObserver(this)}setOptions(t){const r=this.options,i=a(this,h);if(this.options=a(this,S).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof E(this.options.enabled,a(this,h))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");p(this,d,ce).call(this),a(this,h).setOptions(this.options),r._defaulted&&!ee(this.options,r)&&a(this,S).getQueryCache().notify({type:"observerOptionsUpdated",query:a(this,h),observer:this});const c=this.hasListeners();c&&ye(a(this,h),i,this.options,r)&&p(this,d,$).call(this),this.updateResult(),c&&(a(this,h)!==i||E(this.options.enabled,a(this,h))!==E(r.enabled,a(this,h))||W(this.options.staleTime,a(this,h))!==W(r.staleTime,a(this,h)))&&p(this,d,re).call(this);const l=p(this,d,ae).call(this);c&&(a(this,h)!==i||E(this.options.enabled,a(this,h))!==E(r.enabled,a(this,h))||l!==a(this,F))&&p(this,d,ie).call(this,l)}getOptimisticResult(t){const r=a(this,S).getQueryCache().build(a(this,S),t),i=this.createResult(r,t);return Pe(this,i)&&(g(this,C,i),g(this,P,this.options),g(this,Q,a(this,h).state)),i}getCurrentResult(){return a(this,C)}trackResult(t,r){return new Proxy(t,{get:(i,c)=>(this.trackProp(c),r==null||r(c),c==="promise"&&!this.options.experimental_prefetchInRender&&a(this,T).status==="pending"&&a(this,T).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(i,c))})}trackProp(t){a(this,B).add(t)}getCurrentQuery(){return a(this,h)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=a(this,S).defaultQueryOptions(t),i=a(this,S).getQueryCache().build(a(this,S),r);return i.fetch().then(()=>this.createResult(i,r))}fetch(t){return p(this,d,$).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),a(this,C)))}createResult(t,r){var me;const i=a(this,h),c=this.options,l=a(this,C),n=a(this,Q),y=a(this,P),v=t!==i?t.state:a(this,q),{state:M}=t;let u={...M},O=!1,o;if(r._optimisticResults){const R=this.hasListeners(),J=!R&&be(t,r),z=R&&ye(t,i,r,c);(J||z)&&(u={...u,...Me(M.data,t.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:f,errorUpdatedAt:w,status:N}=u;o=u.data;let b=!1;if(r.placeholderData!==void 0&&o===void 0&&N==="pending"){let R;l!=null&&l.isPlaceholderData&&r.placeholderData===(y==null?void 0:y.placeholderData)?(R=l.data,b=!0):R=typeof r.placeholderData=="function"?r.placeholderData((me=a(this,H))==null?void 0:me.state.data,a(this,H)):r.placeholderData,R!==void 0&&(N="success",o=pe(l==null?void 0:l.data,R,r),O=!0)}if(r.select&&o!==void 0&&!b)if(l&&o===(n==null?void 0:n.data)&&r.select===a(this,G))o=a(this,D);else try{g(this,G,r.select),o=r.select(o),o=pe(l==null?void 0:l.data,o,r),g(this,D,o),g(this,k,null)}catch(R){g(this,k,R)}a(this,k)&&(f=a(this,k),o=a(this,D),w=Date.now(),N="error");const V=u.fetchStatus==="fetching",U=N==="pending",A=N==="error",K=U&&V,ue=o!==void 0,I={status:N,fetchStatus:u.fetchStatus,isPending:U,isSuccess:N==="success",isError:A,isInitialLoading:K,isLoading:K,data:o,dataUpdatedAt:u.dataUpdatedAt,error:f,errorUpdatedAt:w,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>v.dataUpdateCount||u.errorUpdateCount>v.errorUpdateCount,isFetching:V,isRefetching:V&&!U,isLoadingError:A&&!ue,isPaused:u.fetchStatus==="paused",isPlaceholderData:O,isRefetchError:A&&ue,isStale:de(t,r),refetch:this.refetch,promise:a(this,T),isEnabled:E(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const R=X=>{I.status==="error"?X.reject(I.error):I.data!==void 0&&X.resolve(I.data)},J=()=>{const X=g(this,T,I.promise=ge());R(X)},z=a(this,T);switch(z.status){case"pending":t.queryHash===i.queryHash&&R(z);break;case"fulfilled":(I.status==="error"||I.data!==z.value)&&J();break;case"rejected":(I.status!=="error"||I.error!==z.reason)&&J();break}}return I}updateResult(){const t=a(this,C),r=this.createResult(a(this,h),this.options);if(g(this,Q,a(this,h).state),g(this,P,this.options),a(this,Q).data!==void 0&&g(this,H,a(this,h)),ee(r,t))return;g(this,C,r);const i=()=>{if(!t)return!0;const{notifyOnChangeProps:c}=this.options,l=typeof c=="function"?c():c;if(l==="all"||!l&&!a(this,B).size)return!0;const n=new Set(l??a(this,B));return this.options.throwOnError&&n.add("error"),Object.keys(a(this,C)).some(y=>{const m=y;return a(this,C)[m]!==t[m]&&n.has(m)})};p(this,d,Ce).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&p(this,d,ne).call(this)}},S=new WeakMap,h=new WeakMap,q=new WeakMap,C=new WeakMap,Q=new WeakMap,P=new WeakMap,T=new WeakMap,k=new WeakMap,G=new WeakMap,D=new WeakMap,H=new WeakMap,_=new WeakMap,L=new WeakMap,F=new WeakMap,B=new WeakMap,d=new WeakSet,$=function(t){p(this,d,ce).call(this);let r=a(this,h).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(te)),r},re=function(){p(this,d,le).call(this);const t=W(this.options.staleTime,a(this,h));if(se||a(this,C).isStale||!xe(t))return;const i=Ee(a(this,C).dataUpdatedAt,t)+1;g(this,_,Y.setTimeout(()=>{a(this,C).isStale||this.updateResult()},i))},ae=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(a(this,h)):this.options.refetchInterval)??!1},ie=function(t){p(this,d,oe).call(this),g(this,F,t),!(se||E(this.options.enabled,a(this,h))===!1||!xe(a(this,F))||a(this,F)===0)&&g(this,L,Y.setInterval(()=>{(this.options.refetchIntervalInBackground||Ie.isFocused())&&p(this,d,$).call(this)},a(this,F)))},ne=function(){p(this,d,re).call(this),p(this,d,ie).call(this,p(this,d,ae).call(this))},le=function(){a(this,_)&&(Y.clearTimeout(a(this,_)),g(this,_,void 0))},oe=function(){a(this,L)&&(Y.clearInterval(a(this,L)),g(this,L,void 0))},ce=function(){const t=a(this,S).getQueryCache().build(a(this,S),this.options);if(t===a(this,h))return;const r=a(this,h);g(this,h,t),g(this,q,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},Ce=function(t){we.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(a(this,C))}),a(this,S).getQueryCache().notify({query:a(this,h),type:"observerResultsUpdated"})})},je);function ze(e,t){return E(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function be(e,t){return ze(e,t)||e.state.data!==void 0&&he(e,t,t.refetchOnMount)}function he(e,t,r){if(E(t.enabled,e)!==!1&&W(t.staleTime,e)!=="static"){const i=typeof r=="function"?r(e):r;return i==="always"||i!==!1&&de(e,t)}return!1}function ye(e,t,r,i){return(e!==t||E(i.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&de(e,r)}function de(e,t){return E(t.enabled,e)!==!1&&e.isStaleByTime(W(t.staleTime,e))}function Pe(e,t){return!ee(e.getCurrentResult(),t)}var Se=x.createContext(!1),De=()=>x.useContext(Se);Se.Provider;function He(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Be=x.createContext(He()),Ve=()=>x.useContext(Be),Ae=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},$e=e=>{x.useEffect(()=>{e.clearReset()},[e])},We=({result:e,errorResetBoundary:t,throwOnError:r,query:i,suspense:c})=>e.isError&&!t.isReset()&&!e.isFetching&&i&&(c&&e.data===void 0||Oe(r,[e.error,i])),qe=e=>{if(e.suspense){const r=c=>c==="static"?c:Math.max(c??1e3,1e3),i=e.staleTime;e.staleTime=typeof i=="function"?(...c)=>r(i(...c)):r(i),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Ge=(e,t)=>e.isLoading&&e.isFetching&&!t,Ke=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,ve=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function Je(e,t,r){var u,O,o,f,w;const i=De(),c=Ve(),l=Te(),n=l.defaultQueryOptions(e);(O=(u=l.getDefaultOptions().queries)==null?void 0:u._experimental_beforeQuery)==null||O.call(u,n),n._optimisticResults=i?"isRestoring":"optimistic",qe(n),Ae(n,c),$e(c);const y=!l.getQueryCache().get(n.queryHash),[m]=x.useState(()=>new t(l,n)),v=m.getOptimisticResult(n),M=!i&&e.subscribed!==!1;if(x.useSyncExternalStore(x.useCallback(N=>{const b=M?m.subscribe(we.batchCalls(N)):te;return m.updateResult(),b},[m,M]),()=>m.getCurrentResult(),()=>m.getCurrentResult()),x.useEffect(()=>{m.setOptions(n)},[n,m]),Ke(n,v))throw ve(n,m,c);if(We({result:v,errorResetBoundary:c,throwOnError:n.throwOnError,query:l.getQueryCache().get(n.queryHash),suspense:n.suspense}))throw v.error;if((f=(o=l.getDefaultOptions().queries)==null?void 0:o._experimental_afterQuery)==null||f.call(o,n,v),n.experimental_prefetchInRender&&!se&&Ge(v,i)){const N=y?ve(n,m,c):(w=l.getQueryCache().get(n.queryHash))==null?void 0:w.promise;N==null||N.catch(te).finally(()=>{m.updateResult()})}return n.notifyOnChangeProps?v:m.trackResult(v)}function Xe(e,t){return Je(e,Le)}const Ne=({src:e,alt:t,className:r="",placeholder:i,blurAmount:c=20,threshold:l=.01,rootMargin:n="50px",onLoad:y,onError:m})=>{const[v,M]=x.useState(!1),[u,O]=x.useState(!1),[o,f]=x.useState(!1),w=x.useRef(null);x.useEffect(()=>{if(!w.current)return;const U=new IntersectionObserver(A=>{A.forEach(K=>{K.isIntersecting&&(O(!0),U.disconnect())})},{threshold:l,rootMargin:n});return U.observe(w.current),()=>{U.disconnect()}},[l,n]);const N=()=>{M(!0),y==null||y()},b=()=>{f(!0),m==null||m()},V=()=>i||"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 400 300'%3E%3Cdefs%3E%3ClinearGradient id='grad' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' style='stop-color:rgb(229,231,235);stop-opacity:1' /%3E%3Cstop offset='100%25' style='stop-color:rgb(209,213,219);stop-opacity:1' /%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='400' height='300' fill='url(%23grad)' /%3E%3C/svg%3E";return s.jsxs("div",{ref:w,className:`relative overflow-hidden ${r}`,style:{backgroundColor:"#e5e7eb"},children:[s.jsx("img",{src:V(),alt:"","aria-hidden":"true",className:`absolute inset-0 w-full h-full object-cover transition-opacity duration-500 ${v?"opacity-0":"opacity-100"}`,style:{filter:`blur(${c}px)`,transform:"scale(1.1)"}}),u&&!o&&s.jsx("img",{src:e,alt:t,onLoad:N,onError:b,className:`relative w-full h-full object-cover transition-opacity duration-500 ${v?"opacity-100":"opacity-0"}`,loading:"lazy"}),o&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-200",children:s.jsxs("div",{className:"text-center text-gray-500",children:[s.jsx("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("span",{className:"text-sm",children:"Image unavailable"})]})}),u&&!v&&!o&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})},Ye=Qe.memo(({species:e,onClick:t,viewMode:r="grid"})=>{const i=l=>{switch(l){case"LC":return"bg-green-100 text-green-800";case"NT":return"bg-yellow-100 text-yellow-800";case"VU":return"bg-orange-100 text-orange-800";case"EN":return"bg-red-100 text-red-800";case"CR":return"bg-red-200 text-red-900";default:return"bg-gray-100 text-gray-800"}},c=l=>{switch(l){case"small":return"🐦";case"medium":return"🦅";case"large":return"🦢";default:return"🦜"}};return r==="list"?s.jsxs("div",{onClick:()=>t==null?void 0:t(e),className:"flex items-center gap-4 p-4 bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow cursor-pointer border border-gray-200",children:[e.primaryImageUrl?s.jsx(Ne,{src:e.primaryImageUrl,alt:e.spanishName,className:"w-16 h-16 rounded-lg",blurAmount:10}):s.jsx("div",{className:"w-16 h-16 bg-gray-200 rounded-lg flex items-center justify-center text-2xl",children:c(e.sizeCategory)}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:e.spanishName}),s.jsx("p",{className:"text-sm text-gray-600",children:e.englishName}),s.jsx("p",{className:"text-xs text-gray-500 italic",children:e.scientificName})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-xs text-gray-500",children:e.familyName}),e.conservationStatus&&s.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${i(e.conservationStatus)}`,children:e.conservationStatus})]}),s.jsx("div",{className:"flex gap-1",children:e.habitats.slice(0,2).map(l=>s.jsx("span",{className:"text-xs bg-blue-50 text-blue-700 px-2 py-1 rounded",children:l},l))})]}):s.jsxs("div",{onClick:()=>t==null?void 0:t(e),className:"bg-white rounded-lg shadow-md hover:shadow-xl transition-all cursor-pointer overflow-hidden group",children:[s.jsxs("div",{className:"aspect-square bg-gradient-to-br from-gray-200 to-gray-300 relative",children:[e.primaryImageUrl?s.jsx(Ne,{src:e.primaryImageUrl,alt:e.spanishName,className:"w-full h-full"}):s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-6xl opacity-50",children:c(e.sizeCategory)}),e.conservationStatus&&s.jsx("span",{className:`absolute top-2 right-2 text-xs px-2 py-1 rounded-full ${i(e.conservationStatus)}`,children:e.conservationStatus})]}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-bold text-gray-900 text-lg group-hover:text-blue-600 transition-colors",children:e.spanishName}),s.jsx("p",{className:"text-sm text-gray-600",children:e.englishName}),s.jsx("p",{className:"text-xs text-gray-500 italic mt-1",children:e.scientificName}),s.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[s.jsx("div",{className:"flex gap-1",children:e.primaryColors.slice(0,3).map(l=>s.jsx("span",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:l},title:l},l))}),s.jsx("span",{className:"text-xs text-gray-500",children:e.familyName})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:e.habitats.slice(0,2).map(l=>s.jsx("span",{className:"text-xs bg-green-50 text-green-700 px-2 py-1 rounded",children:l},l))}),e.annotationCount!==void 0&&s.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100",children:s.jsxs("p",{className:"text-xs text-gray-500",children:[e.annotationCount," annotations available"]})})]})]})}),Ze=({filters:e,onFilterChange:t,availableFilters:r})=>{const i=(n,y)=>{t({...e,[n]:y||void 0})},c=()=>{t({})},l=Object.values(e).filter(n=>n).length;return s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-gray-900",children:"Filters"}),l>0&&s.jsxs("button",{onClick:c,className:"text-sm text-blue-600 hover:text-blue-800",children:["Clear all (",l,")"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),s.jsx("input",{type:"text",value:e.searchTerm||"",onChange:n=>i("searchTerm",n.target.value),placeholder:"Spanish or English name...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order"}),s.jsxs("select",{value:e.orderName||"",onChange:n=>i("orderName",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Orders"}),r.orders.map(n=>s.jsx("option",{value:n,children:n},n))]})]}),e.orderName&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Family"}),s.jsxs("select",{value:e.familyName||"",onChange:n=>i("familyName",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Families"}),r.families.map(n=>s.jsx("option",{value:n,children:n},n))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Size"}),s.jsx("div",{className:"flex gap-2",children:["small","medium","large"].map(n=>s.jsx("button",{onClick:()=>i("sizeCategory",e.sizeCategory===n?null:n),className:`flex-1 px-3 py-2 rounded-md border text-sm capitalize transition-colors ${e.sizeCategory===n?"bg-blue-500 text-white border-blue-500":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:n},n))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Habitat"}),s.jsxs("select",{value:e.habitat||"",onChange:n=>i("habitat",n.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"All Habitats"}),r.habitats.map(n=>s.jsx("option",{value:n,children:n},n))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Primary Color"}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:r.colors.map(n=>s.jsx("button",{onClick:()=>i("primaryColor",e.primaryColor===n?null:n),className:`w-full h-8 rounded border-2 transition-all ${e.primaryColor===n?"border-blue-500 ring-2 ring-blue-200":"border-gray-300 hover:border-gray-400"}`,style:{backgroundColor:n},title:n},n))})]})]})},et=e=>Xe({queryKey:ke.species.list(e),queryFn:async()=>{try{return await _e.species.list(e)}catch(t){return Fe("Error fetching species",t instanceof Error?t:new Error(String(t))),[]}},staleTime:10*60*1e3,gcTime:30*60*1e3,placeholderData:[]}),tt=()=>{const{data:e=[],isLoading:t,error:r}=et(),[i,c]=x.useState({}),[l,n]=x.useState("grid"),y=x.useMemo(()=>{let o=[...e];if(i.searchTerm){const f=i.searchTerm.toLowerCase();o=o.filter(w=>w.spanishName.toLowerCase().includes(f)||w.englishName.toLowerCase().includes(f)||w.scientificName.toLowerCase().includes(f))}return i.orderName&&(o=o.filter(f=>f.orderName===i.orderName)),i.familyName&&(o=o.filter(f=>f.familyName===i.familyName)),i.sizeCategory&&(o=o.filter(f=>f.sizeCategory===i.sizeCategory)),i.habitat&&(o=o.filter(f=>f.habitats.includes(i.habitat))),i.primaryColor&&(o=o.filter(f=>f.primaryColors.includes(i.primaryColor))),o},[e,i]),m=x.useMemo(()=>{const o=[...new Set(e.map(b=>b.orderName))].sort(),f=i.orderName?[...new Set(e.filter(b=>b.orderName===i.orderName).map(b=>b.familyName))].sort():[...new Set(e.map(b=>b.familyName))].sort(),w=[...new Set(e.flatMap(b=>b.habitats))].sort(),N=[...new Set(e.flatMap(b=>b.primaryColors))].sort();return{orders:o,families:f,habitats:w,colors:N}},[e,i.orderName]),v=x.useCallback(o=>{Ue("Selected species:",{name:o.spanishName})},[]),M=x.useCallback(o=>{c(o)},[]),u=x.useCallback(o=>{n(o)},[]),O=x.useCallback(()=>{c({})},[]);return t?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"text-gray-500",children:"Loading species..."})}):r?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"text-red-500",children:["Error loading species: ",r instanceof Error?r.message:"Unknown error"]})}):s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Species Browser"}),s.jsxs("p",{className:"text-gray-600",children:["Explore ",e.length," bird species with Spanish vocabulary"]})]}),s.jsxs("div",{className:"flex gap-6",children:[s.jsx("div",{className:"w-64 flex-shrink-0",children:s.jsx(Ze,{filters:i,onFilterChange:M,availableFilters:m})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-4 flex items-center justify-between",children:[s.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",y.length," of ",e.length," species"]}),s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>u("grid"),className:`p-2 rounded ${l==="grid"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,"aria-label":"Grid view",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M5 3a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2V5a2 2 0 00-2-2H5zM5 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2H5zM11 5a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V5zM13 11a2 2 0 00-2 2v2a2 2 0 002 2h2a2 2 0 002-2v-2a2 2 0 00-2-2h-2z"})})}),s.jsx("button",{onClick:()=>u("list"),className:`p-2 rounded ${l==="list"?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,"aria-label":"List view",children:s.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})})]})})]}),y.length===0?s.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[s.jsx("p",{className:"text-gray-500",children:"No species found matching your filters."}),s.jsx("button",{onClick:O,className:"mt-4 text-blue-600 hover:text-blue-800",children:"Clear filters"})]}):s.jsx("div",{className:l==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4":"space-y-4",children:y.map(o=>s.jsx(Ye,{species:o,onClick:v,viewMode:l},o.id))})]})]})]})},lt=()=>s.jsx(tt,{});export{lt as SpeciesPage};
