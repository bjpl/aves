# Architecture Diagrams
## Image-Exercise Integration System

**Visual Reference Guide**
**Date**: 2025-11-17

---

## System Context Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         AVES PLATFORM                               â”‚
â”‚                                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚   Educator   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”¤   Learner    â”‚      â”‚    Admin     â”‚  â”‚
â”‚  â”‚   Creates    â”‚         â”‚   Completes  â”‚      â”‚   Manages    â”‚  â”‚
â”‚  â”‚  Exercises   â”‚         â”‚  Exercises   â”‚      â”‚   Quality    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚         â”‚                        â”‚                     â”‚           â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                          â”‚                                         â”‚
â”‚                          â–¼                                         â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚         â”‚  IMAGE-EXERCISE INTEGRATION        â”‚                    â”‚
â”‚         â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚                    â”‚
â”‚         â”‚  â€¢ ML Recommendations              â”‚                    â”‚
â”‚         â”‚  â€¢ Quality Validation              â”‚                    â”‚
â”‚         â”‚  â€¢ Image Selection UI              â”‚                    â”‚
â”‚         â”‚  â€¢ Attribution Management          â”‚                    â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                       â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                          â”‚
            â–¼                          â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Claude Sonnet  â”‚        â”‚  Unsplash API    â”‚
   â”‚  4.5 Vision API â”‚        â”‚  (Image Source)  â”‚
   â”‚  (Quality Check)â”‚        â”‚  (Attribution)   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## High-Level Architecture

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                    PRESENTATION LAYER                          â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”ƒ
â”ƒ  â”‚  Exercise    â”‚  â”‚    Image     â”‚  â”‚    Admin     â”‚        â”ƒ
â”ƒ  â”‚  Creation    â”‚  â”‚   Browser    â”‚  â”‚  Dashboard   â”‚        â”ƒ
â”ƒ  â”‚   (React)    â”‚  â”‚   (React)    â”‚  â”‚   (React)    â”‚        â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                             â†• HTTP/REST
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                    APPLICATION LAYER                           â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”ƒ
â”ƒ  â”‚              API Gateway (Express.js)                   â”‚   â”ƒ
â”ƒ  â”‚  â€¢ Authentication  â€¢ Rate Limiting  â€¢ Validation       â”‚   â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”ƒ
â”ƒ                             â†•                                  â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”ƒ
â”ƒ  â”‚   Exercise   â”‚  â”‚    Image     â”‚  â”‚      ML      â”‚        â”ƒ
â”ƒ  â”‚   Service    â”‚  â”‚   Service    â”‚  â”‚   Service    â”‚        â”ƒ
â”ƒ  â”‚              â”‚  â”‚              â”‚  â”‚              â”‚        â”ƒ
â”ƒ  â”‚  â€¢ CRUD      â”‚  â”‚  â€¢ Search    â”‚  â”‚  â€¢ Recommend â”‚        â”ƒ
â”ƒ  â”‚  â€¢ Validate  â”‚  â”‚  â€¢ Quality   â”‚  â”‚  â€¢ Learn     â”‚        â”ƒ
â”ƒ  â”‚  â€¢ Cache     â”‚  â”‚  â€¢ Attribute â”‚  â”‚  â€¢ RL Engine â”‚        â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                             â†•
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                       DATA LAYER                               â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”ƒ
â”ƒ  â”‚ PostgreSQL   â”‚  â”‚    Redis     â”‚  â”‚  Unsplash    â”‚        â”ƒ
â”ƒ  â”‚              â”‚  â”‚    Cache     â”‚  â”‚     API      â”‚        â”ƒ
â”ƒ  â”‚  â€¢ exercises â”‚  â”‚  â€¢ Recs      â”‚  â”‚  â€¢ Search    â”‚        â”ƒ
â”ƒ  â”‚  â€¢ images    â”‚  â”‚  â€¢ Quality   â”‚  â”‚  â€¢ Download  â”‚        â”ƒ
â”ƒ  â”‚  â€¢ species   â”‚  â”‚  â€¢ Sessions  â”‚  â”‚  â€¢ Attrib    â”‚        â”ƒ
â”ƒ  â”‚  â€¢ rl_tables â”‚  â”‚              â”‚  â”‚              â”‚        â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
                             â†•
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”“
â”ƒ                   EXTERNAL SERVICES                            â”ƒ
â”ƒ  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”ƒ
â”ƒ  â”‚   Claude     â”‚  â”‚   Supabase   â”‚  â”‚     CDN      â”‚        â”ƒ
â”ƒ  â”‚  Sonnet 4.5  â”‚  â”‚     Auth     â”‚  â”‚   (Images)   â”‚        â”ƒ
â”ƒ  â”‚  Vision API  â”‚  â”‚              â”‚  â”‚              â”‚        â”ƒ
â”ƒ  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”ƒ
â”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›
```

---

## Data Flow: Exercise Creation with Images

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Educator â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. Start Exercise Creation
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Exercise Creation Flow                 â”‚
â”‚                                          â”‚
â”‚  [Select Type] â†’ [Define Objectives]    â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. Request Image Recommendations
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ML Recommendation Engine               â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ 1. Fetch Approved Images      â”‚     â”‚
â”‚  â”‚    (quality_score >= 60)      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚              â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ 2. Calculate Relevance Scores â”‚     â”‚
â”‚  â”‚    â€¢ Exercise type matching   â”‚     â”‚
â”‚  â”‚    â€¢ Vocabulary gap filling   â”‚     â”‚
â”‚  â”‚    â€¢ Historical success       â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚              â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ 3. Apply Pattern Learning     â”‚     â”‚
â”‚  â”‚    â€¢ Query learned patterns   â”‚     â”‚
â”‚  â”‚    â€¢ Adjust scores            â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚              â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ 4. Rank & Cache Results       â”‚     â”‚
â”‚  â”‚    â€¢ Sort by final score      â”‚     â”‚
â”‚  â”‚    â€¢ Store in Redis (30min)   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ 3. Return Recommendations
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Image Selection UI                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Recommended Images Panel        â”‚  â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚  â”‚
â”‚  â”‚  [ğŸ–¼ï¸ Image 1] Score: 92         â”‚  â”‚
â”‚  â”‚  [ğŸ–¼ï¸ Image 2] Score: 87         â”‚  â”‚
â”‚  â”‚  [ğŸ–¼ï¸ Image 3] Score: 85         â”‚  â”‚
â”‚  â”‚                                   â”‚  â”‚
â”‚  â”‚  [Accept All] [Browse More]      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  Image Browser (Optional)        â”‚  â”‚
â”‚  â”‚  Search: [hummingbird____]       â”‚  â”‚
â”‚  â”‚  Filters: Quality â–¼ Species â–¼    â”‚  â”‚
â”‚  â”‚                                   â”‚  â”‚
â”‚  â”‚  [Grid of image thumbnails...]   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 4. Select Images (Manual or Accept Recs)
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Exercise-Image Association             â”‚
â”‚                                          â”‚
â”‚  POST /api/exercises/{id}/images        â”‚
â”‚  {                                       â”‚
â”‚    imageId: "uuid-1234",                â”‚
â”‚    position: 1,                          â”‚
â”‚    isCorrectAnswer: true                â”‚
â”‚  }                                       â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 5. Store Relationships
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database: exercise_images              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
â”‚  exercise_id | image_id | position | ...â”‚
â”‚  uuid-ex-1   | uuid-1   | 1       | âœ“  â”‚
â”‚  uuid-ex-1   | uuid-2   | 2       | âœ—  â”‚
â”‚  uuid-ex-1   | uuid-3   | 3       | âœ—  â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 6. Track for ML Learning
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  image_usage_analytics                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚
â”‚  â€¢ Was recommended: true                â”‚
â”‚  â€¢ Recommendation rank: 1               â”‚
â”‚  â€¢ User selected: true                  â”‚
â”‚  â€¢ Exercise type: visual_discrimination â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 7. Complete Exercise
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Published Exercise                     â”‚
â”‚  â€¢ 3 images attached                    â”‚
â”‚  â€¢ Proper attribution                   â”‚
â”‚  â€¢ Ready for learners                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow: Image Quality Validation

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  New Image       â”‚
â”‚  (Unsplash/      â”‚
â”‚   Upload)        â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 1. Import Image
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Database: images                       â”‚
â”‚  INSERT INTO images (...)               â”‚
â”‚  approval_status: 'pending'             â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 2. Trigger Quality Assessment
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Image Quality Validator Service        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”‚
â”‚                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ 1. Fetch Image Data           â”‚     â”‚
â”‚  â”‚    â€¢ URL, species, metadata   â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚              â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ 2. Claude Vision API Call     â”‚â”€â”€â”€â”€â”¼â”€â”€â–º Anthropic API
â”‚  â”‚    â€¢ Bird visibility (40pts)  â”‚     â”‚   (Claude Sonnet 4.5)
â”‚  â”‚    â€¢ Feature clarity (30pts)  â”‚     â”‚
â”‚  â”‚    â€¢ Technical quality (20pts)â”‚     â”‚
â”‚  â”‚    â€¢ Educational value (10pts)â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚              â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ 3. Parse & Validate Response  â”‚     â”‚
â”‚  â”‚    {                          â”‚     â”‚
â”‚  â”‚      suitable: true,          â”‚     â”‚
â”‚  â”‚      score: 82,               â”‚     â”‚
â”‚  â”‚      issues: [...],           â”‚     â”‚
â”‚  â”‚      recommendations: [...]   â”‚     â”‚
â”‚  â”‚    }                          â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚              â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ 4. Apply Pattern Learning     â”‚     â”‚
â”‚  â”‚    Adjustments                â”‚     â”‚
â”‚  â”‚    â€¢ Historical corrections   â”‚     â”‚
â”‚  â”‚    â€¢ Species-specific factors â”‚     â”‚
â”‚  â”‚    final_score = 82 â†’ 85      â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â”‚ 5. Store Assessment
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  image_quality_assessments              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€            â”‚
â”‚  â€¢ overall_score: 85                    â”‚
â”‚  â€¢ bird_visibility_score: 38            â”‚
â”‚  â€¢ feature_clarity_score: 28            â”‚
â”‚  â€¢ technical_quality_score: 19          â”‚
â”‚  â€¢ suitable: true                       â”‚
â”‚  â€¢ issues: ["slight motion blur"]      â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 6. Update Approval Status
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  images (UPDATE)                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚  IF score >= 60:                        â”‚
â”‚    approval_status = 'approved' âœ“       â”‚
â”‚  ELSE:                                   â”‚
â”‚    approval_status = 'rejected' âœ—       â”‚
â”‚    rejection_reason = skipReason        â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”‚ 7. Record for ML Learning
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  IF approved:                           â”‚
â”‚    rl_approvals                         â”‚
â”‚    â€¢ annotation_type                    â”‚
â”‚    â€¢ confidence: 0.85                   â”‚
â”‚    â€¢ bounding_box                       â”‚
â”‚                                          â”‚
â”‚  IF rejected:                           â”‚
â”‚    rl_rejection_patterns                â”‚
â”‚    â€¢ rejection_reason                   â”‚
â”‚    â€¢ rejection_category                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ML Recommendation Engine Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ML RECOMMENDATION ENGINE                      â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  1. Input Processing                           â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚    â”‚
â”‚  â”‚  â€¢ Exercise type                               â”‚    â”‚
â”‚  â”‚  â€¢ Learning objectives                         â”‚    â”‚
â”‚  â”‚  â€¢ Target vocabulary                           â”‚    â”‚
â”‚  â”‚  â€¢ Difficulty level                            â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚               â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  2. Candidate Fetching                         â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚    â”‚
â”‚  â”‚  Query: approved images with quality >= 60     â”‚    â”‚
â”‚  â”‚  Filter: species, has_annotations              â”‚    â”‚
â”‚  â”‚  Result: 50-200 candidate images               â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚               â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  3. Feature Extraction                         â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚    â”‚
â”‚  â”‚  FOR EACH image:                               â”‚    â”‚
â”‚  â”‚    â€¢ Quality score                             â”‚    â”‚
â”‚  â”‚    â€¢ Annotation count & features               â”‚    â”‚
â”‚  â”‚    â€¢ Vocabulary coverage                       â”‚    â”‚
â”‚  â”‚    â€¢ Historical success rate                   â”‚    â”‚
â”‚  â”‚    â€¢ Species characteristics                   â”‚    â”‚
â”‚  â”‚    â€¢ Image orientation & composition           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚               â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  4. Multi-Factor Scoring                       â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                          â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚ Quality Score (30% weight)           â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Direct from quality_score column   â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚ Relevance Score (40% weight)         â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Exercise type matching             â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Feature alignment                  â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Difficulty appropriateness         â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚ Historical Success (20% weight)      â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Past exercise success rate         â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Learner completion rate            â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Feedback scores                    â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                 â”‚    â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚    â”‚
â”‚  â”‚  â”‚ Pattern Learning (10% weight)        â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ RL-based adjustments               â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ Species-specific patterns          â”‚     â”‚    â”‚
â”‚  â”‚  â”‚ â€¢ User preference learning           â”‚     â”‚    â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚    â”‚
â”‚  â”‚                                                 â”‚    â”‚
â”‚  â”‚  Final Score = Î£(component Ã— weight)          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚               â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  5. Vocabulary Gap Boost                       â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                      â”‚    â”‚
â”‚  â”‚  IF image covers gap vocabulary:               â”‚    â”‚
â”‚  â”‚    final_score *= 1.3                          â”‚    â”‚
â”‚  â”‚                                                 â”‚    â”‚
â”‚  â”‚  IF high historical success:                   â”‚    â”‚
â”‚  â”‚    final_score *= 1.2                          â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚               â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  6. Ranking & Selection                        â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                        â”‚    â”‚
â”‚  â”‚  â€¢ Sort by final_score DESC                    â”‚    â”‚
â”‚  â”‚  â€¢ Apply diversity filter                      â”‚    â”‚
â”‚  â”‚  â€¢ Select top 5 (or count param)               â”‚    â”‚
â”‚  â”‚  â€¢ Generate reasoning for each                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚               â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  7. Cache Results                              â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                â”‚    â”‚
â”‚  â”‚  Store in Redis:                               â”‚    â”‚
â”‚  â”‚  â€¢ Key: hash(exerciseType + objectives)       â”‚    â”‚
â”‚  â”‚  â€¢ TTL: 30 minutes                             â”‚    â”‚
â”‚  â”‚  â€¢ Value: recommendations JSON                 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚               â”‚                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚  8. Output                                      â”‚    â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                      â”‚    â”‚
â”‚  â”‚  {                                              â”‚    â”‚
â”‚  â”‚    recommendations: [                          â”‚    â”‚
â”‚  â”‚      {                                          â”‚    â”‚
â”‚  â”‚        imageId, score, rank,                   â”‚    â”‚
â”‚  â”‚        reasoning: [                            â”‚    â”‚
â”‚  â”‚          "High quality (85/100)",              â”‚    â”‚
â”‚  â”‚          "Fills vocab gap: 'pico'",           â”‚    â”‚
â”‚  â”‚          "90% historical success"              â”‚    â”‚
â”‚  â”‚        ]                                        â”‚    â”‚
â”‚  â”‚      }                                          â”‚    â”‚
â”‚  â”‚    ],                                           â”‚    â”‚
â”‚  â”‚    vocabularyGapsFilled: ["pico", "plumas"],  â”‚    â”‚
â”‚  â”‚    mlModelVersion: "v2.1.0"                    â”‚    â”‚
â”‚  â”‚  }                                              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Database Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    species       â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ â€¢ id (PK)        â”‚
â”‚ â€¢ scientific_nameâ”‚
â”‚ â€¢ english_name   â”‚
â”‚ â€¢ spanish_name   â”‚
â”‚ â€¢ habitats[]     â”‚
â”‚ â€¢ primary_colors[]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1:N
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     images       â”‚           â”‚ image_quality_assessments  â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ â€¢ id (PK)        â”‚ 1:N       â”‚ â€¢ id (PK)                  â”‚
â”‚ â€¢ species_id (FK)â”‚           â”‚ â€¢ image_id (FK)            â”‚
â”‚ â€¢ url            â”‚           â”‚ â€¢ overall_score            â”‚
â”‚ â€¢ approval_statusâ”‚           â”‚ â€¢ bird_visibility_score    â”‚
â”‚ â€¢ quality_score  â”‚           â”‚ â€¢ feature_clarity_score    â”‚
â”‚ â€¢ photographer   â”‚           â”‚ â€¢ technical_quality_score  â”‚
â”‚ â€¢ exercise_usage â”‚           â”‚ â€¢ suitable                 â”‚
â”‚   _count         â”‚           â”‚ â€¢ issues[]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚ â€¢ recommendations[]        â”‚
         â”‚                     â”‚ â€¢ assessed_at              â”‚
         â”‚ N:M                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â””â”€â”€â”€â”€â”€â”€â”¤  exercise_images     â”‚
                â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”¤ â€¢ id (PK)            â”‚
         â”‚      â”‚ â€¢ exercise_id (FK)   â”‚
         â”‚      â”‚ â€¢ image_id (FK)      â”‚
         â”‚      â”‚ â€¢ position           â”‚
         â”‚      â”‚ â€¢ is_correct_answer  â”‚
         â”‚      â”‚ â€¢ annotation_overrides
         â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ 1:N
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    exercises     â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ â€¢ id (PK)        â”‚
â”‚ â€¢ type           â”‚
â”‚ â€¢ title          â”‚
â”‚ â€¢ instructions   â”‚
â”‚ â€¢ primary_image  â”‚
â”‚   _id (FK)       â”‚
â”‚ â€¢ uses_ml        â”‚
â”‚   _recommendationsâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ image_usage_analyticsâ”‚â—„â”€â”€â”€â”€â”
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚     â”‚
â”‚ â€¢ id (PK)            â”‚     â”‚
â”‚ â€¢ image_id (FK)      â”‚     â”‚ Tracks
â”‚ â€¢ exercise_id (FK)   â”‚     â”‚ usage &
â”‚ â€¢ used_in_exercise   â”‚     â”‚ outcomes
â”‚   _type              â”‚     â”‚
â”‚ â€¢ was_recommended    â”‚     â”‚
â”‚ â€¢ recommendation_rankâ”‚     â”‚
â”‚ â€¢ success_rate       â”‚     â”‚
â”‚ â€¢ feedback_score     â”‚     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ image_recommendations    â”‚ â”‚
â”‚ _cache                   â”‚ â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚ â”‚
â”‚ â€¢ id (PK)                â”‚â”€â”˜
â”‚ â€¢ exercise_type          â”‚   Caches
â”‚ â€¢ learning_objectives    â”‚   ML recs
â”‚ â€¢ recommended_images[]   â”‚
â”‚ â€¢ cache_key              â”‚
â”‚ â€¢ expires_at             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Reinforcement Learning Tables:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ rl_learning_patterns â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ â€¢ species            â”‚
â”‚ â€¢ feature            â”‚
â”‚ â€¢ original_box       â”‚
â”‚ â€¢ corrected_box      â”‚
â”‚ â€¢ adjustment         â”‚
â”‚ â€¢ confidence         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ rl_rejection_patternsâ”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ â€¢ species            â”‚
â”‚ â€¢ feature            â”‚
â”‚ â€¢ rejection_reason   â”‚
â”‚ â€¢ rejection_category â”‚
â”‚ â€¢ confidence         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ rl_approvals         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ â€¢ annotation_id      â”‚
â”‚ â€¢ species            â”‚
â”‚ â€¢ feature            â”‚
â”‚ â€¢ bounding_box       â”‚
â”‚ â€¢ confidence         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Component Hierarchy (Frontend)

```
<ExerciseCreationFlow>
â”‚
â”œâ”€ <ExerciseTypeSelector>
â”‚   â”œâ”€ <TypeCard type="visual_discrimination" />
â”‚   â”œâ”€ <TypeCard type="visual_identification" />
â”‚   â”œâ”€ <TypeCard type="image_labeling" />
â”‚   â””â”€ <TypeCard type="contextual_fill" />
â”‚
â”œâ”€ <LearningObjectivesForm>
â”‚   â”œâ”€ <VocabularySelector>
â”‚   â”‚   â””â”€ <MultiSelect options={anatomicalFeatures} />
â”‚   â”œâ”€ <DifficultySelector>
â”‚   â”‚   â””â”€ <RadioGroup options={["beginner", "intermediate", "advanced"]} />
â”‚   â””â”€ <SpeciesSelector>
â”‚       â””â”€ <SearchableSelect options={species} />
â”‚
â”œâ”€ <ImageSelectionStep> â˜… NEW COMPONENT â˜…
â”‚   â”‚
â”‚   â”œâ”€ <ImageRecommendationsPanel> â˜… NEW â˜…
â”‚   â”‚   â”œâ”€ <LoadingSpinner when={isLoadingRecs} />
â”‚   â”‚   â”œâ”€ <RecommendationHeader>
â”‚   â”‚   â”‚   â””â”€ "Top Recommendations Based on ML Analysis"
â”‚   â”‚   â”œâ”€ <RecommendedImageCard>  [repeat 5x]
â”‚   â”‚   â”‚   â”œâ”€ <ImageThumbnail />
â”‚   â”‚   â”‚   â”œâ”€ <QualityBadge score={85} />
â”‚   â”‚   â”‚   â”œâ”€ <RecommendationScore rank={1} score={92} />
â”‚   â”‚   â”‚   â”œâ”€ <ReasoningList>
â”‚   â”‚   â”‚   â”‚   â”œâ”€ "âœ“ High quality (85/100)"
â”‚   â”‚   â”‚   â”‚   â”œâ”€ "âœ“ Fills vocabulary gap: 'pico'"
â”‚   â”‚   â”‚   â”‚   â””â”€ "âœ“ 90% historical success rate"
â”‚   â”‚   â”‚   â””â”€ <SelectButton onClick={handleSelect} />
â”‚   â”‚   â”œâ”€ <AcceptAllButton>
â”‚   â”‚   â”‚   â””â”€ "Accept Top 3 Recommendations"
â”‚   â”‚   â””â”€ <BrowseMoreButton>
â”‚   â”‚       â””â”€ "Browse All Images"
â”‚   â”‚
â”‚   â”œâ”€ <ImageBrowserPanel> â˜… NEW â˜…
â”‚   â”‚   â”œâ”€ <SearchBar
â”‚   â”‚   â”‚     value={searchQuery}
â”‚   â”‚   â”‚     onChange={handleSearch}
â”‚   â”‚   â”‚     placeholder="Search by species, feature..."
â”‚   â”‚   â”‚   />
â”‚   â”‚   â”œâ”€ <FilterPanel>
â”‚   â”‚   â”‚   â”œâ”€ <SpeciesFilter>
â”‚   â”‚   â”‚   â”‚   â””â”€ <MultiSelect options={speciesList} />
â”‚   â”‚   â”‚   â”œâ”€ <QualityFilter>
â”‚   â”‚   â”‚   â”‚   â””â”€ <RangeSlider min={0} max={100} />
â”‚   â”‚   â”‚   â”œâ”€ <ApprovalStatusFilter>
â”‚   â”‚   â”‚   â”‚   â””â”€ <CheckboxGroup options={["approved", "pending"]} />
â”‚   â”‚   â”‚   â””â”€ <AnnotationCountFilter>
â”‚   â”‚   â”‚       â””â”€ <NumberInput min={0} label="Min annotations" />
â”‚   â”‚   â”œâ”€ <SortControls>
â”‚   â”‚   â”‚   â””â”€ <Select options={["quality", "usage", "created", "relevance"]} />
â”‚   â”‚   â”œâ”€ <ImageGrid>
â”‚   â”‚   â”‚   â””â”€ <ImageCard>  [repeat N times]
â”‚   â”‚   â”‚       â”œâ”€ <ImageThumbnail lazy />
â”‚   â”‚   â”‚       â”œâ”€ <QualityBadge />
â”‚   â”‚   â”‚       â”œâ”€ <ApprovalStatusBadge />
â”‚   â”‚   â”‚       â”œâ”€ <SpeciesLabel />
â”‚   â”‚   â”‚       â”œâ”€ <AnnotationCountBadge />
â”‚   â”‚   â”‚       â”œâ”€ <SelectButton />
â”‚   â”‚   â”‚       â””â”€ <PreviewButton />
â”‚   â”‚   â””â”€ <Pagination
â”‚   â”‚         page={currentPage}
â”‚   â”‚         totalPages={totalPages}
â”‚   â”‚         onPageChange={handlePageChange}
â”‚   â”‚       />
â”‚   â”‚
â”‚   â””â”€ <SelectedImagesPanel> â˜… NEW â˜…
â”‚       â”œâ”€ <PanelHeader>
â”‚       â”‚   â””â”€ "Selected Images (3/3)"
â”‚       â”œâ”€ <DragDropContext onDragEnd={handleReorder}>
â”‚       â”‚   â””â”€ <SelectedImagePreview>  [repeat per selected]
â”‚       â”‚       â”œâ”€ <DragHandle />
â”‚       â”‚       â”œâ”€ <ImageWithAnnotations>
â”‚       â”‚       â”‚   â”œâ”€ <Image src={image.url} />
â”‚       â”‚       â”‚   â””â”€ <AnnotationOverlay annotations={image.annotations} />
â”‚       â”‚       â”œâ”€ <PositionBadge position={1} />
â”‚       â”‚       â”œâ”€ <CorrectAnswerToggle
â”‚       â”‚       â”‚     checked={isCorrectAnswer}
â”‚       â”‚       â”‚     onChange={handleToggle}
â”‚       â”‚       â”‚   />
â”‚       â”‚       â”œâ”€ <AttributionDisplay>
â”‚       â”‚       â”‚   â””â”€ "Photo by {photographer} on Unsplash"
â”‚       â”‚       â””â”€ <RemoveButton onClick={handleRemove} />
â”‚       â”œâ”€ <ValidationStatus>
â”‚       â”‚   â”œâ”€ âœ“ "Minimum images selected (3)"
â”‚       â”‚   â”œâ”€ âœ“ "One correct answer marked"
â”‚       â”‚   â””â”€ âœ“ "All attributions present"
â”‚       â””â”€ <ActionButtons>
â”‚           â”œâ”€ <ClearAllButton />
â”‚           â””â”€ <ContinueButton disabled={!isValid} />
â”‚
â”œâ”€ <ExerciseContentForm>
â”‚   â”œâ”€ <TitleInput />
â”‚   â”œâ”€ <InstructionsEditor />
â”‚   â””â”€ <OptionsEditor when={type === "visual_discrimination"}>
â”‚       â””â”€ [Auto-populated from selected images]
â”‚
â”œâ”€ <ExercisePreview>
â”‚   â”œâ”€ <PreviewHeader />
â”‚   â”œâ”€ <ExerciseContent>
â”‚   â”‚   â”œâ”€ <SelectedImagesDisplay />
â”‚   â”‚   â”œâ”€ <Instructions />
â”‚   â”‚   â””â”€ <Options />
â”‚   â””â”€ <AttributionFooter>
â”‚       â””â”€ [All image attributions]
â”‚
â””â”€ <ActionBar>
    â”œâ”€ <SaveDraftButton />
    â”œâ”€ <PublishButton />
    â””â”€ <CancelButton />


State Management (Zustand):

useExerciseCreationStore:
  - exerciseType
  - learningObjectives
  - recommendedImages: RecommendedImage[]
  - selectedImages: SelectedImage[]
  - imageSearchQuery
  - imageFilters
  - validationState
  - savingStatus

useImageRecommendationStore:
  - isLoading
  - recommendations: RecommendedImage[]
  - reasoning
  - vocabularyGapsFilled
  - acceptanceTracking

useImageBrowserStore:
  - images: ImageWithQuality[]
  - searchQuery
  - filters
  - sortBy
  - currentPage
  - totalPages
  - isLoading
```

---

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LOAD BALANCER                        â”‚
â”‚                   (Ingress/ALB)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚
        â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  API Gateway   â”‚        â”‚  API Gateway   â”‚
â”‚    Pod 1       â”‚        â”‚    Pod 2       â”‚
â”‚                â”‚        â”‚                â”‚
â”‚  â€¢ Auth MW     â”‚        â”‚  â€¢ Auth MW     â”‚
â”‚  â€¢ Rate Limit  â”‚        â”‚  â€¢ Rate Limit  â”‚
â”‚  â€¢ Validation  â”‚        â”‚  â€¢ Validation  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                           â”‚
        â–¼                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Image Service  â”‚          â”‚ ML Service     â”‚
â”‚   Pod 1-3      â”‚          â”‚   Pod 1-2      â”‚
â”‚                â”‚          â”‚                â”‚
â”‚ â€¢ Search       â”‚          â”‚ â€¢ Recommend    â”‚
â”‚ â€¢ Quality Mgmt â”‚          â”‚ â€¢ Pattern Learnâ”‚
â”‚ â€¢ Attribution  â”‚          â”‚ â€¢ RL Engine    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                             â”‚
        â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PostgreSQL    â”‚          â”‚  Redis Cluster â”‚
â”‚  (Primary +    â”‚          â”‚  (Cache)       â”‚
â”‚   2 Replicas)  â”‚          â”‚                â”‚
â”‚                â”‚          â”‚  â€¢ Recs        â”‚
â”‚  â€¢ Images      â”‚          â”‚  â€¢ Quality     â”‚
â”‚  â€¢ Exercises   â”‚          â”‚  â€¢ Sessions    â”‚
â”‚  â€¢ RL Tables   â”‚          â”‚                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


External Services:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Claude API     â”‚    â”‚ Unsplash API   â”‚    â”‚ CloudFlare CDN â”‚
â”‚ (Quality)      â”‚    â”‚ (Images)       â”‚    â”‚ (Delivery)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Monitoring Stack:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Prometheus     â”‚    â”‚ Grafana        â”‚    â”‚ ELK Stack      â”‚
â”‚ (Metrics)      â”‚    â”‚ (Dashboards)   â”‚    â”‚ (Logs)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Horizontal Pod Autoscaling:
  API Gateway:     2-10 pods (CPU > 70%)
  Image Service:   3-10 pods (CPU > 70%, Memory > 80%)
  ML Service:      2-5 pods (Request rate > 100/sec)
```

---

## Sequence Diagram: Complete Flow

```
Educator  UI         API         ImageSvc    MLSvc      DB          Claude      Cache
   â”‚       â”‚          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚   1. Create Exercise          â”‚          â”‚          â”‚            â”‚          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚   2. POST /exercises  â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚  3. INSERT â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚   4. Request Image Recs       â”‚          â”‚          â”‚            â”‚          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚   5. POST /images/recsâ”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚         â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚ 6. Check Cache      â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚       â”‚          â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚       â”‚          â”‚            â”‚  MISS    â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚ 7. Request ML       â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚ 8. Query approved images        â”‚
   â”‚       â”‚          â”‚            â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚ 9. Extract features & score     â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚ 10. Apply RL adjustments        â”‚
   â”‚       â”‚          â”‚            â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚ 11. Rank & select               â”‚
   â”‚       â”‚          â”‚            â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚ 12. Cache results   â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚       â”‚          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚â—„â”€â”€â”€â”€â”€â”€â”¤          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚  13. Display Recommendations  â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚  14. Select Images            â”‚          â”‚          â”‚            â”‚          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚  15. POST /exercises/{id}/images â”‚          â”‚            â”‚          â”‚
   â”‚       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚         â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚ 16. Validate        â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚ 17. Store relationship            â”‚          â”‚
   â”‚       â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚ 18. Track usage analytics         â”‚          â”‚
   â”‚       â”‚          â”‚            â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚â—„â”€â”€â”€â”€â”€â”€â”¤          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚  19. Complete & Publish       â”‚          â”‚          â”‚            â”‚          â”‚
   â”œâ”€â”€â”€â”€â”€â”€â–ºâ”‚          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚  20. PUT /exercises/{id}         â”‚          â”‚            â”‚          â”‚
   â”‚       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚           â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚ 21. UPDATE exercise   â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚            â”‚          â”‚
   â”‚       â”‚          â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚          â”‚
   â”‚       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚â—„â”€â”€â”€â”€â”€â”€â”¤          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
   â”‚  Exercise Published Successfully         â”‚          â”‚            â”‚          â”‚
   â”‚       â”‚          â”‚            â”‚          â”‚          â”‚            â”‚          â”‚
```

---

## Cache Strategy Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              MULTI-LEVEL CACHE STRATEGY                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Request Flow:
  User Request
       â”‚
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   L1: In-Memory Cache (Node.js) â”‚
  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚   TTL: 5 minutes                 â”‚
  â”‚   Max Size: 100 items            â”‚
  â”‚   Keys:                          â”‚
  â”‚   â€¢ image-recommendations        â”‚
  â”‚   â€¢ quality-assessments          â”‚
  â”‚   â€¢ vocabulary-gaps              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ HIT â†’ Return
             â”‚ MISS â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   L2: Redis Cache                â”‚
  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚   TTL: 30 minutes                â”‚
  â”‚   Keys:                          â”‚
  â”‚   â€¢ image-search-results:{hash} â”‚
  â”‚   â€¢ ml-recommendations:{hash}    â”‚
  â”‚   â€¢ species-data:{id}            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ HIT â†’ Return & Cache L1
             â”‚ MISS â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   L3: Database (PostgreSQL)      â”‚
  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚   â€¢ Query with optimized indexes â”‚
  â”‚   â€¢ Materialized views           â”‚
  â”‚   â€¢ Efficient joins              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â–¼
         Return & Cache L1+L2


Image Delivery:
  Image Request
       â”‚
       â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   CDN Cache (CloudFlare)         â”‚
  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚   TTL: 7 days                    â”‚
  â”‚   Resources:                     â”‚
  â”‚   â€¢ Image thumbnails (200px)     â”‚
  â”‚   â€¢ Image previews (800px)       â”‚
  â”‚   â€¢ Full size images (original)  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ HIT â†’ Return (fastest)
             â”‚ MISS â†“
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚   Origin Server / S3             â”‚
  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚   â€¢ Fetch image                  â”‚
  â”‚   â€¢ Cache in CDN                 â”‚
  â”‚   â€¢ Return to user               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


Cache Invalidation Events:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Event Triggers:           â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                           â”‚
â”‚ â€¢ Image Approved          â”‚â”€â”€â”€â–º Invalidate:
â”‚                           â”‚     â€¢ image-search-results
â”‚                           â”‚     â€¢ ml-recommendations
â”‚                           â”‚
â”‚ â€¢ Quality Updated         â”‚â”€â”€â”€â–º Invalidate:
â”‚                           â”‚     â€¢ quality-assessments
â”‚                           â”‚     â€¢ image-recommendations
â”‚                           â”‚
â”‚ â€¢ New Annotation Created  â”‚â”€â”€â”€â–º Invalidate:
â”‚                           â”‚     â€¢ image-search-results
â”‚                           â”‚     â€¢ vocabulary-gaps
â”‚                           â”‚
â”‚ â€¢ Exercise Completed      â”‚â”€â”€â”€â–º Invalidate:
â”‚   with Feedback           â”‚     â€¢ ml-recommendations
â”‚                           â”‚     â€¢ pattern-learning-cache
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**End of Architecture Diagrams**

For detailed implementation specifications, see:
`/docs/architecture/image-exercise-integration-architecture.md`
