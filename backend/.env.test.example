# ========================================
# TEST DATABASE CONFIGURATION (Supabase)
# ========================================
# This file configures the test database for running Jest integration tests
# Tests run against a separate 'aves_test' database to avoid affecting production data

# Test Database Connection (Supabase with test schema)
# Uses same database as production but isolated test schema via TEST_SCHEMA
# Using IPv6-compatible connection pooler (port 6543)
TEST_DB_HOST=your-supabase-project.pooler.supabase.com
TEST_DB_PORT=6543
TEST_DB_NAME=postgres
TEST_DB_USER=postgres.your-project-id
TEST_DB_PASSWORD=your-test-db-password-here
TEST_SCHEMA=aves_test

# Main pool also needs these for tests that import services directly
DB_HOST=your-supabase-project.pooler.supabase.com
DB_PORT=6543
DB_NAME=postgres
DB_USER=postgres.your-project-id
DB_PASSWORD=your-db-password-here
DB_ALLOW_EXIT_ON_IDLE=true

# Database SSL Configuration (Supabase requires SSL)
DB_SSL_ENABLED=true

# ========================================
# SECURITY KEYS (Generate new keys for testing)
# ========================================
# Generate with: openssl rand -hex 32
JWT_SECRET=your-jwt-secret-key-replace-with-real
JWT_EXPIRES_IN=24h
SESSION_SECRET=your-session-secret-key-replace-with-real

# ========================================
# ANTHROPIC CLAUDE (For AI Annotation Tests)
# ========================================
ANTHROPIC_API_KEY=sk-ant-api03-your-api-key-here
ANTHROPIC_MODEL=claude-sonnet-4-5-20250629
ANTHROPIC_MAX_TOKENS=4096
ANTHROPIC_TEMPERATURE=0.7

# AI Feature Flags (Enable for testing)
ENABLE_VISION_AI=true
VISION_PROVIDER=claude
ENABLE_IMAGE_ANALYSIS=true
ENABLE_EXERCISE_GENERATION=true
ENABLE_IMAGE_GENERATION=true

# ========================================
# TEST ENVIRONMENT
# ========================================
NODE_ENV=test
